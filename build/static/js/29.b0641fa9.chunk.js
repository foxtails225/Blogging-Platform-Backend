(this["webpackJsonpdankstocks-client"]=this["webpackJsonpdankstocks-client"]||[]).push([[29],{1372:function(e,t,a){"use strict";a.r(t);var n=a(7),r=a.n(n),c=a(12),o=a(0),i=a.n(o),l=a(38),u=a(14),s=a(649),d=a(1114),m=a(645),f=a(1116),p=a(1126),b=a(78),v=a(1110),y=a(1091),E=a(35),g=a(1220),h=a(1221),x=a(1107),k=a(642),C=a(1092),j=a(57),O=a(99),w=Object(s.a)((function(e){return{box:{display:"grid",columnGap:"16px",gridTemplateColumns:"repeat(7, 1fr)"},digit:{display:"inline-block",textAlign:"center","& .MuiInputBase-input":{textAlign:"center"}},helper:{mx:"14px"}}})),S=function(){var e,t=w(),a=Object(O.a)(),n=Object(j.a)().verifyCode,u=Object(l.h)(),s=Object(o.useRef)([]);return Object(o.useEffect)((function(){s.current=s.current.slice(0,6)}),[]),i.a.createElement(h.a,{initialValues:{email:(null===(e=u.state)||void 0===e?void 0:e.username)||"",code:["","","","","",""],submit:null},validationSchema:g.c().shape({email:g.e().email("Must be a valid email").max(255).required("Email is required"),code:g.a().of(g.e().required("Code is required"))}),onSubmit:function(){var e=Object(c.a)(r.a.mark((function e(t,c){var o,i,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=c.setErrors,i=c.setStatus,l=c.setSubmitting,e.prev=1,e.next=4,n(t.email,t.code.join(""));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0),a.current&&(i({success:!1}),o({submit:e.t0.message}),l(!1));case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,a){return e.apply(this,arguments)}}()},(function(e){var a=e.errors,n=e.handleBlur,r=e.handleSubmit,c=e.isSubmitting,o=e.setFieldValue,l=e.touched,u=e.values;return i.a.createElement("form",{noValidate:!0,onSubmit:r},i.a.createElement(m.a,{mt:3},i.a.createElement(b.a,{color:"textSecondary",variant:"subtitle2"},"Verification code")),i.a.createElement(m.a,{pt:1,className:t.box},[1,2,3,4,5,6].map((function(e,r){return i.a.createElement(x.a,{error:Boolean(Array.isArray(l.code)&&6===l.code.length&&a.code),fullWidth:!0,inputRef:function(e){return s.current[r]=e},key:"code-".concat(r),name:"code[".concat(r,"]"),onBlur:n,onKeyDown:function(e){if("ENTER"===e.code){if(u.code[r])return void o("code[".concat(r,"]"),"");if(r>0)return o("code[".concat(r,"]"),""),void s.current[r-1].focus()}Number.isInteger(parseInt(e.key,10))&&(o("code[".concat(r,"]"),e.key),r<5&&s.current[r+1].focus())},onPaste:function(e){var t=e.clipboardData.getData("text").split("");if(6===t.length){var a=!0;t.forEach((function(e){Number.isInteger(parseInt(e,10))||(a=!1)})),a&&(o("code",t),s.current[5].focus())}},value:u.code[r],variant:"outlined",className:t.digit})}))),Boolean(Array.isArray(l.code)&&6===l.code.length&&a.code)&&i.a.createElement(k.a,{error:!0,className:t.helper},Array.isArray(a.code)&&a.code.find((function(e){return void 0!==e}))),a.submit&&i.a.createElement(m.a,{mt:3},i.a.createElement(k.a,{error:!0},a.submit)),i.a.createElement(m.a,{mt:3},i.a.createElement(C.a,{color:"primary",disabled:c,fullWidth:!0,size:"large",type:"submit",variant:"contained"},"Verify")))}))},N=a(102),A=a(357),B=Object(s.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,display:"flex",flexDirection:"column",minHeight:"100vh"},methodIcon:{height:30,marginLeft:e.spacing(2),marginRight:e.spacing(2)},cardContainer:{paddingBottom:80,paddingTop:80},cardContent:{padding:e.spacing(4),display:"flex",flexDirection:"column",minHeight:400}}}));t.default=function(){var e,t=B(),a=Object(j.a)().method,n=null===(e=Object(l.h)().state)||void 0===e?void 0:e.username,o=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("/resend-code",{email:n});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return i.a.createElement(A.a,{className:t.root,title:"Verify Code"},i.a.createElement(d.a,{className:t.cardContainer,maxWidth:"sm"},i.a.createElement(m.a,{mb:8,display:"flex",justifyContent:"center"},i.a.createElement(u.a,{to:"/"},i.a.createElement(N.a,null))),i.a.createElement(f.a,null,i.a.createElement(p.a,{className:t.cardContent},i.a.createElement(m.a,{alignItems:"center",display:"flex",justifyContent:"space-between",mb:3},i.a.createElement("div",null,i.a.createElement(b.a,{color:"textPrimary",gutterBottom:!0,variant:"h2"},"Verify Code"),i.a.createElement(b.a,{variant:"body2",color:"textSecondary"},"Confirm registration using your verification code"))),i.a.createElement(m.a,{flexGrow:1,mt:1},"JWT"===a&&i.a.createElement(S,null)),i.a.createElement(m.a,{my:3},i.a.createElement(v.a,null)),i.a.createElement(m.a,{display:"flex"},i.a.createElement(y.a,{component:u.a,to:"/login",variant:"body2",color:"textSecondary"},"Have an account?"),i.a.createElement(m.a,{flexGrow:1}),i.a.createElement(y.a,{variant:"body2",component:"button",onClick:o},"Resend Code"))))))}}}]);
//# sourceMappingURL=29.b0641fa9.chunk.js.map