(this["webpackJsonpdankstocks-client"]=this["webpackJsonpdankstocks-client"]||[]).push([[14],{1138:function(e,t,a){"use strict";var n=a(1),r=a(5),c=a(0),o=(a(3),a(2)),l=a(8),s=a(78),i=c.forwardRef((function(e,t){var a=e.children,l=e.classes,i=e.className,u=e.disableTypography,m=void 0!==u&&u,d=Object(r.a)(e,["children","classes","className","disableTypography"]);return c.createElement("div",Object(n.a)({className:Object(o.a)(l.root,i),ref:t},d),m?a:c.createElement(s.a,{component:"h2",variant:"h6"},a))}));t.a=Object(l.a)({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(i)},1144:function(e,t,a){"use strict";var n=a(1),r=a(48),c=a(5),o=a(0),l=(a(3),a(1145)),s=a(15),i=a(111),u=a(1284),m=a(205),d=o.forwardRef((function(e,t){var a=e.actions,d=e.children,p=e.name,f=e.value,b=e.onChange,h=Object(c.a)(e,["actions","children","name","value","onChange"]),g=o.useRef(null),v=Object(i.a)({controlled:f,default:e.defaultValue,name:"RadioGroup"}),E=Object(r.a)(v,2),O=E[0],j=E[1];o.useImperativeHandle(a,(function(){return{focus:function(){var e=g.current.querySelector("input:not(:disabled):checked");e||(e=g.current.querySelector("input:not(:disabled)")),e&&e.focus()}}}),[]);var k=Object(s.a)(t,g),y=Object(m.a)(p);return o.createElement(u.a.Provider,{value:{name:y,onChange:function(e){j(e.target.value),b&&b(e,e.target.value)},value:O}},o.createElement(l.a,Object(n.a)({role:"radiogroup",ref:k},h),d))}));t.a=d},1145:function(e,t,a){"use strict";var n=a(1),r=a(5),c=a(0),o=(a(3),a(2)),l=a(8),s=c.forwardRef((function(e,t){var a=e.classes,l=e.className,s=e.row,i=void 0!==s&&s,u=Object(r.a)(e,["classes","className","row"]);return c.createElement("div",Object(n.a)({className:Object(o.a)(a.root,l,i&&a.row),ref:t},u))}));t.a=Object(l.a)({root:{display:"flex",flexDirection:"column",flexWrap:"wrap"},row:{flexDirection:"row"}},{name:"MuiFormGroup"})(s)},1149:function(e,t,a){"use strict";var n=a(1),r=a(5),c=a(0),o=(a(3),a(2)),l=a(365),s=a(100),i=Object(s.a)(c.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),u=Object(s.a)(c.createElement("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),m=a(8);var d=Object(m.a)((function(e){return{root:{position:"relative",display:"flex","&$checked $layer":{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}},layer:{left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest})},checked:{}}}),{name:"PrivateRadioButtonIcon"})((function(e){var t=e.checked,a=e.classes,n=e.fontSize;return c.createElement("div",{className:Object(o.a)(a.root,t&&a.checked)},c.createElement(i,{fontSize:n}),c.createElement(u,{fontSize:n,className:a.layer}))})),p=a(17),f=a(10),b=a(69),h=a(1284);var g=c.createElement(d,{checked:!0}),v=c.createElement(d,null),E=c.forwardRef((function(e,t){var a=e.checked,s=e.classes,i=e.color,u=void 0===i?"secondary":i,m=e.name,d=e.onChange,p=e.size,E=void 0===p?"medium":p,O=Object(r.a)(e,["checked","classes","color","name","onChange","size"]),j=c.useContext(h.a),k=a,y=Object(b.a)(d,j&&j.onChange),x=m;return j&&("undefined"===typeof k&&(k=j.value===e.value),"undefined"===typeof x&&(x=j.name)),c.createElement(l.a,Object(n.a)({color:u,type:"radio",icon:c.cloneElement(v,{fontSize:"small"===E?"small":"default"}),checkedIcon:c.cloneElement(g,{fontSize:"small"===E?"small":"default"}),classes:{root:Object(o.a)(s.root,s["color".concat(Object(f.a)(u))]),checked:s.checked,disabled:s.disabled},name:x,checked:k,onChange:y,ref:t},O))}));t.a=Object(m.a)((function(e){return{root:{color:e.palette.text.secondary},checked:{},disabled:{},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(p.c)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(p.c)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}}}}),{name:"MuiRadio"})(E)},1220:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(648),o=a(1130),l=Object(c.a)((function(){return{root:{textAlign:"center"},icon:{display:"flex",height:"inherit",width:"inherit"}}}));t.a=function(e){var t=l();return r.a.createElement(o.a,{classes:{root:t.root},fontSize:"small"},r.a.createElement("img",Object.assign({alt:"Custom Icon",className:t.icon,src:e.src},e)))}},1237:function(e,t,a){"use strict";var n=a(97),r=a(98);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(a(0)),o=(0,n(a(99)).default)(c.createElement("path",{d:"M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2zm0 15l-5-2.18L7 18V5h10v13z"}),"BookmarkBorderOutlined");t.default=o},1265:function(e,t,a){"use strict";var n=a(7),r=a.n(n),c=a(11),o=a(23),l=a(44),s=a(0),i=a.n(s),u=a(2),m=a(1236),d=a(648),p=a(1133),f=a(1134),b=a(1136),h=a(1137),g=a(34),v=a(22),E=a(12),O=a(1131),j=a(644),k=a(1132),y=a(1091),x=a(57),N={style:{base:{color:E.a.grey[500],fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:E.a.grey[500]}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}},w=Object(d.a)((function(e){return{root:{}}})),C=function(e){var t=e.className,a=(e.open,e.author),n=e.secret,o=e.amount,s=e.onOpen,d=e.onBack,p=e.onSuccess,f=Object(l.a)(e,["className","open","author","secret","amount","onOpen","onBack","onSuccess"]),b=Object(x.a)().user,h=Object(m.useStripe)(),v=Object(m.useElements)(),E=w(),C=function(){var e=Object(c.a)(r.a.mark((function e(t){var c,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),h&&v){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,h.confirmCardPayment(n,{payment_method:{card:v.getElement(m.CardElement),billing_details:{email:a.email}}});case 5:if(!(c=e.sent).error){e.next=10;break}console.log(c.error.message),e.next=15;break;case 10:if("succeeded"!==c.paymentIntent.status){e.next=15;break}return l={user:a._id,type:"tips_success",title:"New payment received",description:"You got the new tips. You received $".concat(o," from ").concat(b.name),isRead:!1,url:"#"},e.next=14,g.a.post("/notifications/create",l);case 14:p();case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement("div",Object.assign({className:Object(u.a)(E.root,t)},f),i.a.createElement("form",{onSubmit:C},i.a.createElement(O.a,null,i.a.createElement(j.a,{border:1,padding:2,borderRadius:5},i.a.createElement(m.CardElement,{options:N}))),i.a.createElement(k.a,null,i.a.createElement(y.a,{onClick:function(){return s()},color:"primary"},"Cancel"),i.a.createElement(y.a,{onClick:function(){return d()},color:"primary"},"Back"),i.a.createElement(y.a,{disabled:!h,type:"submit",color:"primary"},"Confirm"))))},S=a(1114),_=a(1106),B=a(1107),I=Object(d.a)((function(e){return{root:{}}})),z=function(e){var t=e.className,a=e.author,n=(e.open,e.onOpen),m=e.onNext,d=Object(l.a)(e,["className","author","open","onOpen","onNext"]),p=I(),f=Object(s.useState)(),b=Object(o.a)(f,2),h=b[0],v=b[1],E=function(){var e=Object(c.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={stripeId:a.stripeId,amount:h},e.next=3,g.a.post("/stripe/secret",t);case 3:(n=e.sent).data&&m(n.data.secret,4*h/5);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return i.a.createElement("div",Object.assign({className:Object(u.a)(p.root,t)},d),i.a.createElement(O.a,null,i.a.createElement(S.a,{container:!0,justify:"center"},i.a.createElement(S.a,{item:!0,md:5},i.a.createElement(_.a,{label:"Name",defaultValue:a.name,InputProps:{readOnly:!0}})),i.a.createElement(S.a,{item:!0,md:5},i.a.createElement(_.a,{label:"Amount",type:"number",placeholder:"Must be larger than 3",value:h,onChange:function(e){return v(e.target.value)},error:h<3,InputProps:{inputProps:{min:3},startAdornment:i.a.createElement(B.a,{position:"start"},"$")}})))),i.a.createElement(k.a,null,i.a.createElement(y.a,{onClick:function(){return n()},color:"primary"},"Cancel"),i.a.createElement(y.a,{onClick:E,disabled:h<3||!h,color:"primary"},"Confirm")))},R=Object(d.a)((function(e){return{root:{},backButton:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}}));t.a=function(e){var t=e.className,a=e.postId,n=e.open,d=e.onOpen,E=e.onSuccess,O=Object(l.a)(e,["className","postId","open","onOpen","onSuccess"]),j=R(),k=Object(s.useState)(0),y=Object(o.a)(k,2),x=y[0],N=y[1],w=Object(s.useState)(),S=Object(o.a)(w,2),_=S[0],B=S[1],I=Object(s.useState)(0),L=Object(o.a)(I,2),T=L[0],M=L[1],P=Object(s.useState)(),F=Object(o.a)(P,2),H=F[0],A=F[1],V=["Author Info","Card Details"];Object(s.useEffect)((function(){(function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("/posts/getById/"+a);case 2:(t=e.sent).data&&A(t.data.post.author);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a]);return i.a.createElement("div",Object.assign({className:Object(u.a)(j.root,t)},O),H&&i.a.createElement(p.a,{open:n,keepMounted:!0,onClose:function(){return d()},"aria-labelledby":"checkform-dialog",fullWidth:!0},i.a.createElement(f.a,{activeStep:x,alternativeLabel:!0},V.map((function(e){return i.a.createElement(b.a,{key:e},i.a.createElement(h.a,null,e))}))),0===x&&i.a.createElement(z,{open:n,author:H,onOpen:d,onNext:function(e,t){B(e),M(t),N((function(e){return e+1}))}}),1===x&&i.a.createElement(m.Elements,{stripe:v.g},i.a.createElement(C,{open:n,author:H,amount:T,secret:_,onOpen:d,onBack:function(){N((function(e){return e-1}))},onSuccess:E}))))}},1284:function(e,t,a){"use strict";var n=a(0),r=n.createContext();t.a=r},1316:function(e,t,a){"use strict";var n=a(97),r=a(98);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(a(0)),o=(0,n(a(99)).default)(c.createElement("path",{d:"M14.4 6L14 4H5v17h2v-7h5.6l.4 2h7V6z"}),"Flag");t.default=o},1317:function(e,t,a){"use strict";var n=a(97),r=a(98);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(a(0)),o=(0,n(a(99)).default)(c.createElement("path",{d:"M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"}),"FlagOutlined");t.default=o},1318:function(e,t,a){"use strict";var n=a(97),r=a(98);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(a(0)),o=(0,n(a(99)).default)(c.createElement("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"}),"Send");t.default=o},1319:function(e,t,a){"use strict";var n=a(97),r=a(98);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(a(0)),o=(0,n(a(99)).default)(c.createElement("path",{d:"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z"}),"AttachFile");t.default=o},1359:function(e,t,a){"use strict";a.r(t);var n=a(7),r=a.n(n),c=a(11),o=a(23),l=a(356),s=a(0),i=a.n(s),u=a(37),m=a(20),d=a(1280),p=a(4),f=a.n(p),b=a(648),h=a(12),g=a(36),v=a(626),E=a(164),O=a(644),j=a(1114),k=a(78),y=a(1120),x=a(1090),N=a(1121),w=a(1109),C=a(34),S=a(57),_=a(357),B=a(44),I=a(2),z=a(1097),R=a(633),L=a(1237),T=a.n(L),M=a(1228),P=a.n(M),F=a(359),H=a.n(F),A=a(1197),V=a(1220),$=a(1265),D=Object(b.a)((function(e){return{root:{display:"flex",alignItems:"center"},div:{flexDirection:"column",position:"sticky",float:"left",top:"45vh",left:"10vw"},likedButton:{color:h.a.red[600]},likedIcon:{padding:e.spacing(1)},commentBox:Object(l.a)({marginTop:e.spacing(3)},e.breakpoints.down("sm"),{marginTop:e.typography.pxToRem(6),marginLeft:e.spacing(2),marginRight:e.spacing(1)}),iconBox:Object(l.a)({marginTop:e.spacing(1)},e.breakpoints.down("sm"),{marginTop:e.typography.pxToRem(2)}),commentIcon:{color:h.a.grey[700]}}})),G=function(e){var t=e.className,a=e.post,n=e.isBookmarked,l=e.onBookmarked,u=Object(B.a)(e,["className","post","isBookmarked","onBookmarked"]),m=D(),d=Object(S.a)(),p=d.user,f=d.isAuthenticated,b=Object(s.useState)(!1),h=Object(o.a)(b,2),g=h[0],v=h[1],E=Object(s.useState)(a.liked.count),j=Object(o.a)(E,2),y=j[0],x=j[1],N=Object(s.useState)(!1),w=Object(o.a)(N,2),_=w[0],L=w[1],M=Object(s.useState)(!1),F=Object(o.a)(M,2),G=F[0],W=F[1];Object(s.useEffect)((function(){f&&p._id===a.author._id&&L(!0),!f&&L(!0)}),[p,f,a.author]),Object(s.useEffect)((function(){f&&a.liked.users.forEach((function(e){return e===p._id&&v(!0)}))}),[a.liked.users]);var U=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={postId:a._id,isLiked:!g},e.next=3,C.a.put("/posts/liked",t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(c.a)(r.a.mark((function e(){var t,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={postId:a._id},c=n?"delete":"create",e.next=4,C.a.post("/bookmarks/".concat(c),t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){return W(!G)};return i.a.createElement("div",Object.assign({className:Object(I.a)(m.root,m[t])},u),g?i.a.createElement(z.a,{title:"Unlike",disableTouchListener:!0,disableHoverListener:_},i.a.createElement("span",null,i.a.createElement(R.a,{className:Object(I.a)(m.likedButton,m.likedIcon),onClick:function(){v(!1),x((function(e){return e-1})),U()},disabled:_},i.a.createElement(V.a,{src:"/static/icons/trending_filled.svg"})))):i.a.createElement(z.a,{title:"Like",disableTouchListener:!0,disableHoverListener:_},i.a.createElement("span",null,i.a.createElement(R.a,{className:m.likedIcon,onClick:function(){v(!0),x((function(e){return e+1})),U()},disabled:_},i.a.createElement(V.a,{src:"/static/icons/trending_outlined.svg"})))),i.a.createElement(k.a,{color:"textSecondary",variant:"h6"},y),i.a.createElement(O.a,{className:m.commentBox},i.a.createElement(A.a,{className:m.commentIcon,size:"20"})),i.a.createElement(k.a,{color:"textSecondary",variant:"h6"},a.comments.length),i.a.createElement(O.a,{className:m.iconBox},n?i.a.createElement(z.a,{title:"Unsaved",disableTouchListener:!0,disableHoverListener:_},i.a.createElement("span",null,i.a.createElement(R.a,{className:m.likedButton,onClick:function(){l(!1),q()},disabled:_},i.a.createElement(T.a,{fontSize:"small"})))):i.a.createElement(z.a,{title:"Saved",disableTouchListener:!0,disableHoverListener:_},i.a.createElement("span",null,i.a.createElement(R.a,{onClick:function(){l(!0),q()},disabled:_},i.a.createElement(T.a,{fontSize:"small"}))))),i.a.createElement(O.a,{className:m.iconBox},i.a.createElement("span",null,i.a.createElement(R.a,{disabled:_,onClick:J},i.a.createElement(H.a,{fontSize:"small"})))),i.a.createElement(O.a,{className:m.iconBox},i.a.createElement("span",null,i.a.createElement(R.a,{disabled:_},i.a.createElement(P.a,{fontSize:"small"})))),G&&i.a.createElement($.a,{open:G,postId:a._id,onOpen:J,onSuccess:J}))},W=a(33),U=a(1118),q=a(1091),J=a(1316),Y=a.n(J),Z=a(1317),K=a.n(Z),Q=a(1133),X=a(1138),ee=a(1131),te=a(638),ae=a(640),ne=a(1144),re=a(1101),ce=a(1149),oe=a(1106),le=a(1132),se=a(22),ie=Object(b.a)((function(e){return{root:{},toggleBtn:{"&.MuiToggleButton-root":{color:e.palette.text.primary},"&.Mui-selected":{backgroundColor:e.palette.secondary.main,color:e.palette.common.white}}}})),ue=function(e){var t=e.open,a=(e.user,e.comment),n=e.onOpen,l=e.onFlag,u=e.className,m=Object(B.a)(e,["open","user","comment","onOpen","onFlag","className"]),d=ie(),p=Object(s.useState)(""),f=Object(o.a)(p,2),b=f[0],h=f[1],g=Object(s.useState)(""),v=Object(o.a)(g,2),E=v[0],O=v[1],j=function(){var e=Object(c.a)(r.a.mark((function e(){var t,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=""!==E?E:b,c={comment:a._id,reason:t,type:"comment"},e.next=4,C.a.put("/comments/flag",c);case 4:n(),l();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){n()};return i.a.createElement("div",Object.assign({className:Object(I.a)(d.root,u)},m),i.a.createElement(Q.a,{open:t,keepMounted:!0,onClose:k,"aria-labelledby":"status-dialog"},i.a.createElement(X.a,null,"Report"),i.a.createElement(ee.a,null,i.a.createElement(te.a,{component:"fieldset"},i.a.createElement(ae.a,{component:"legend"},"Please choose the reason"),i.a.createElement(ne.a,{"aria-label":"spam-flag-report",name:"report",value:b,onChange:function(e){O(""),h(e.target.value)}},se.c.map((function(e,t){return i.a.createElement(re.a,{key:e.name+t,value:e.name,control:i.a.createElement(ce.a,null),label:e.label})})))),i.a.createElement(oe.a,{value:E,margin:"dense",type:"text",onChange:function(e){O(e.target.value)},disabled:"other"!==b,fullWidth:!0})),i.a.createElement(le.a,null,i.a.createElement(q.a,{onClick:k,color:"primary"},"Cancel"),i.a.createElement(q.a,{onClick:j,color:"primary"},"Confirm"))))},me={reply:!1,disable:!0},de=Object(b.a)((function(e){return{root:{display:"flex",marginBottom:e.spacing(2)},bubble:{borderRadius:e.shape.borderRadius},header:Object(l.a)({},e.breakpoints.down("sm"),{flexWrap:"wrap"}),name:Object(l.a)({},e.breakpoints.down("sm"),{width:"100%"}),replybtn:{marginRight:e.spacing(1)},replyIcon:{color:h.a.grey[700]},replyClickIcon:{color:h.a.red[700]},small:{width:e.spacing(4),height:e.spacing(4)},large:{width:e.spacing(5),height:e.spacing(5)},date:{marginLeft:e.spacing(1)}}})),pe=function(e){var t=e.className,a=e.comment,n=e.reply,l=e.onComment,u=Object(B.a)(e,["className","comment","reply","onComment"]),d=de(),p=Object(g.a)(),b=Object(v.a)(p.breakpoints.down("sm")),h=Object(S.a)(),E=h.user,j=h.isAuthenticated,N=Object(s.useState)(!1),w=Object(o.a)(N,2),_=w[0],z=w[1],R=Object(s.useState)(me),L=Object(o.a)(R,2),T=L[0],M=L[1],P=Object(s.useState)(!1),F=Object(o.a)(P,2),H=F[0],$=F[1],D=Object(s.useState)(!1),G=Object(o.a)(D,2),J=G[0],Z=G[1],Q=Object(s.useState)(a.liked.count),X=Object(o.a)(Q,2),ee=X[0],te=X[1],ae={marginLeft:p.typography.pxToRem((b?10:20)*a.depth)};Object(s.useEffect)((function(){j&&E._id===a.user._id&&M((function(e){return Object(W.a)(Object(W.a)({},e),{},{disabled:!0})})),!j&&M((function(e){return Object(W.a)(Object(W.a)({},e),{},{disabled:!0})}))}),[E,j,a.user]),Object(s.useEffect)((function(){j&&a.liked.users.forEach((function(e){return e===E._id&&$(!0)}))}),[a.liked.users]),Object(s.useEffect)((function(){if(j){var e=a.flags.find((function(e){return e.user===E._id}));Z(Boolean(e))}}),[a.flags]),Object(s.useEffect)((function(){if(E){var e=n===a._id&&a.user._id!==E._id,t=a.user._id===E._id;M({reply:e,disable:t})}}),[n,a,E]);var ne=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={commentId:a._id,isLiked:!H},e.next=3,C.a.put("/comments/liked",t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return i.a.createElement("div",Object.assign({className:Object(I.a)(d.root,t),style:ae},u),i.a.createElement(y.a,{alt:"Person",component:m.a,src:a.user.avatar,className:Object(I.a)(b?d.small:d.large),to:"#"}),i.a.createElement(O.a,{flexGrow:1,p:2,ml:2,bgcolor:"background.dark",className:d.bubble},i.a.createElement(O.a,{display:"flex",alignItems:"center",className:d.header,mb:1},i.a.createElement(O.a,{className:d.name},i.a.createElement(x.a,{color:"textPrimary",component:m.a,to:"#",variant:"h6"},a.user.name),i.a.createElement(U.a,{smUp:!0},i.a.createElement(k.a,{color:"textSecondary",variant:"caption",className:d.date},f()(a.createdAt).fromNow()))),i.a.createElement(O.a,{flexGrow:1}),i.a.createElement(q.a,{size:"small",className:d.replybtn,onClick:function(){var e=a.depth+1;l(a._id,e)},disabled:T.disable,startIcon:i.a.createElement(A.a,{size:"20",className:T.reply?d.replyClickIcon:d.replyIcon})},"Reply"),H?i.a.createElement(q.a,{size:"small",className:d.replybtn,onClick:function(){$(!1),te((function(e){return e-1})),ne()},disabled:T.disable,startIcon:i.a.createElement(V.a,{src:"/static/icons/trending_filled.svg"})},ee," likes"):i.a.createElement(q.a,{size:"small",className:d.replybtn,onClick:function(){$(!0),te((function(e){return e+1})),ne()},disabled:T.disable,startIcon:i.a.createElement(V.a,{src:"/static/icons/trending_outlined.svg"})},ee," likes"),i.a.createElement(q.a,{size:"small",className:d.replybtn,onClick:function(){z(!0)},disabled:T.disable||J,startIcon:J?i.a.createElement(Y.a,null):i.a.createElement(K.a,null)},"Flag"),i.a.createElement(U.a,{smDown:!0},i.a.createElement(k.a,{color:"textSecondary",variant:"caption",className:d.date},f()(a.createdAt).fromNow()))),i.a.createElement(k.a,{variant:"body1",color:"textPrimary"},a.comment)),_&&i.a.createElement(ue,{open:_,user:E,comment:a,onOpen:function(){z(!_)},onFlag:function(){Z(!0)}}))},fe=a(150),be=a(351),he=a(1318),ge=a.n(he),ve=a(1279),Ee=a.n(ve),Oe=a(1319),je=a.n(Oe),ke=Object(b.a)((function(e){return{root:Object(l.a)({alignItems:"center",display:"flex"},e.breakpoints.down("sm"),{flexWrap:"wrap"}),inputContainer:Object(l.a)({flexGrow:1,marginLeft:e.spacing(2),paddingBottom:e.spacing(.5),paddingLeft:e.spacing(.5),paddingRight:e.spacing(.5),paddingTop:e.spacing(.5)},e.breakpoints.down("sm"),{width:"100%"}),divider:{height:24,width:1},fileInput:{display:"none"}}})),ye=function(e){var t=e.className,a=e.post,n=e.status,l=e.onFetch,u=Object(B.a)(e,["className","post","status","onFetch"]),m=ke(),d=Object(S.a)().user,p=Object(fe.b)().enqueueSnackbar,f=Object(g.a)(),b=Object(v.a)(f.breakpoints.down("sm")),h=Object(s.useRef)(null),O=Object(s.useState)(""),j=Object(o.a)(O,2),k=j[0],x=j[1],N=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={parent:n.parent,post:a._id,depth:n.depth,comment:k},e.next=4,C.a.post("/comments/create",t);case 4:x(""),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0.message&&p(e.t0.message,{variant:"error"});case 10:l();case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),_=function(){h.current.click()};return i.a.createElement("div",Object.assign({className:Object(I.a)(m.root,t)},u),!b&&i.a.createElement(y.a,{alt:"Person",src:d?d.avatar:""}),i.a.createElement(E.a,{className:m.inputContainer,variant:"outlined"},i.a.createElement(be.a,{value:k,disableUnderline:!0,fullWidth:!0,multiline:!0,rows:3,onChange:function(e){e.persist(),x(e.target.value)}})),i.a.createElement(z.a,{title:"Send"},i.a.createElement("span",null,i.a.createElement(R.a,{color:k.length>0?"primary":"default",onClick:N,disabled:""===k},i.a.createElement(ge.a,null)))),i.a.createElement(w.a,{className:m.divider}),i.a.createElement(z.a,{title:"Attach image"},i.a.createElement(R.a,{edge:"end",onClick:_},i.a.createElement(Ee.a,null))),i.a.createElement(z.a,{title:"Attach file"},i.a.createElement(R.a,{edge:"end",onClick:_},i.a.createElement(je.a,null))),i.a.createElement("input",{className:m.fileInput,ref:h,type:"file"}))},xe={depth:0,parent:null},Ne=Object(b.a)((function(e){return{root:Object(l.a)({backgroundColor:e.palette.background.dark,margin:"0 auto",width:"80%",minHeight:"100%",paddingTop:e.spacing(3),paddingBottom:e.spacing(3)},e.breakpoints.down("sm"),{width:"100%"}),chip:{marginLeft:e.spacing(1),marginTop:e.spacing(1)},box:Object(l.a)({padding:e.spacing(7),flexGrow:1},e.breakpoints.down("sm"),{padding:e.spacing(3)}),author:{marginTop:e.spacing(2),display:"flex",alignItems:"center"},avatar:{marginRight:e.spacing(2)},content:Object(l.a)({fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(17),marginBottom:e.spacing(2)},e.breakpoints.down("sm"),{fontSize:e.typography.pxToRem(17)}),disclosure:Object(l.a)({fontFamily:e.typography.fontFamily,color:h.a.grey[500]},e.breakpoints.down("sm"),{fontSize:"0.9rem"})}}));t.default=function(){var e=Ne(),t=Object(g.a)(),a=Object(u.g)(),n=Object(u.h)(),l=Object(S.a)(),p=l.user,b=l.isAuthenticated,h=Object(v.a)(t.breakpoints.down("md")),B=Object(s.useState)(),I=Object(o.a)(B,2),z=I[0],R=I[1],L=Object(s.useState)(xe),T=Object(o.a)(L,2),M=T[0],P=T[1],F=Object(s.useState)(!1),H=Object(o.a)(F,2),A=H[0],V=H[1];Object(s.useEffect)((function(){$(),se.f.on("fetchPost",(function(e){$()}))}),[]);var $=function(){var e=Object(c.a)(r.a.mark((function e(){var t,c,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.pathname.split("/")[3],c=b&&{user:p._id},e.next=5,C.a.get("/posts/get/".concat(t),{params:c});case 5:o=e.sent,R(o.data.post),V(o.data.isBookmark),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),a.push("/404");case 13:P(xe);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),D=function(e){V(e)},W=function(e,t){var a=M.parent!==e?e:null;P({parent:a,depth:t})};return i.a.createElement(i.a.Fragment,null,z&&!h&&i.a.createElement(G,{post:z,isBookmarked:A,onBookmarked:D,className:"div"}),i.a.createElement(_.a,{className:e.root,title:z&&z.title?z.title:"Post"},i.a.createElement(E.a,null,z&&i.a.createElement(O.a,{mt:3,className:e.box},i.a.createElement(j.a,{container:!0,spacing:3},h&&i.a.createElement(i.a.Fragment,null,i.a.createElement(O.a,{flexGrow:1}),i.a.createElement(G,{post:z,isBookmarked:A,onBookmarked:D})),i.a.createElement(j.a,{item:!0,xs:12,md:10},i.a.createElement(k.a,{variant:"h1",component:"header",color:"textPrimary"},z.title),i.a.createElement(O.a,{className:e.author},i.a.createElement(y.a,{alt:"Person",component:m.a,src:z.author.avatar,className:e.avatar,to:"/users/"+z.author.name}),i.a.createElement(k.a,{variant:"caption",color:"textSecondary"},i.a.createElement(x.a,{color:"textSecondary",component:m.a,to:"/users/"+z.author.name,variant:"h6"},z.author.name)," ",f()(z.createdAt).fromNow())),i.a.createElement(O.a,{mt:2},z.tags.map((function(t){return i.a.createElement(N.a,{key:t.symbol,clickable:!0,variant:"outlined",label:t.symbol,className:e.chip,onClick:function(){return e=t.symbol,a.push("/symbol/".concat(e));var e}})}))))),i.a.createElement(O.a,{mt:3,className:e.content},Object(d.a)(z.content)),i.a.createElement(w.a,null),i.a.createElement(O.a,{mt:3,className:e.disclosure},Object(d.a)(z.disclosure)))),z&&i.a.createElement(E.a,null,i.a.createElement(O.a,{mt:3,className:e.box},i.a.createElement(j.a,{container:!0,spacing:3},i.a.createElement(j.a,{item:!0,xs:12,md:12},z.comments.map((function(e){return i.a.createElement(i.a.Fragment,{key:e._id},i.a.createElement(pe,{comment:e,reply:M.parent,onComment:W}))})),i.a.createElement(O.a,{my:2},i.a.createElement(w.a,null)),i.a.createElement(ye,{post:z,status:M,onFetch:$})))))))}}}]);
//# sourceMappingURL=14.09f02218.chunk.js.map