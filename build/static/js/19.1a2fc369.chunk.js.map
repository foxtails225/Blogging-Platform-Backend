{"version":3,"sources":["components/CustomIcon.tsx","views/post/PostView/Reactions.tsx","views/post/PostView/Comment/FlagModal.tsx","views/post/PostView/Comment/index.tsx","views/post/PostView/CommentAdd.tsx","views/post/PostView/index.tsx"],"names":["useStyles","makeStyles","root","textAlign","icon","display","height","width","CustomIcon","props","classes","fontSize","alt","className","src","theme","alignItems","div","flexDirection","position","float","top","left","likedButton","color","colors","red","likedIcon","padding","spacing","commentBox","marginTop","breakpoints","down","typography","pxToRem","marginLeft","marginRight","iconBox","commentIcon","grey","Reactions","post","isBookmarked","onBookmarked","rest","useAuth","user","isAuthenticated","useState","isLiked","setLiked","liked","count","likes","setLikes","disabled","setDisabled","useEffect","_id","author","users","forEach","item","updateLiked","a","params","postId","axios","put","updateSaved","path","clsx","Tooltip","title","disableTouchListener","disableHoverListener","IconButton","onClick","prevLikes","Typography","variant","Box","size","comments","length","toggleBtn","palette","text","primary","backgroundColor","secondary","main","common","white","FlagModal","open","comment","onOpen","onFlag","option","setOption","value","setValue","handleConfirm","reason","type","handleClose","Dialog","keepMounted","onClose","aria-labelledby","DialogTitle","DialogContent","FormControl","component","FormLabel","RadioGroup","aria-label","name","onChange","event","target","FLAG_OPTIONS","map","idx","FormControlLabel","key","control","Radio","label","TextField","margin","fullWidth","DialogActions","Button","initialStatus","reply","disable","marginBottom","bubble","borderRadius","shape","header","flexWrap","replybtn","replyIcon","replyClickIcon","small","large","date","Comment","onComment","useTheme","match","useMediaQuery","setOpen","status","setStatus","isFlag","setFlag","style","depth","prevState","flags","find","Boolean","commentId","Avatar","RouterLink","avatar","to","flexGrow","p","ml","bgcolor","mb","Link","Hidden","smUp","moment","createdAt","fromNow","startIcon","smDown","inputContainer","paddingBottom","paddingLeft","paddingRight","paddingTop","divider","fileInput","CommentAdd","onFetch","enqueueSnackbar","useSnackbar","fileInputRef","useRef","handleClick","parent","message","handleAttach","current","click","Paper","Input","disableUnderline","multiline","rows","persist","Divider","edge","ref","background","dark","minHeight","chip","box","content","fontFamily","disclosure","PostView","history","useHistory","location","useLocation","matches","setPost","setBookmarked","handleFetch","socket","on","data","pathname","split","get","response","isBookmark","push","handleBookmark","handleComment","id","Page","mt","Grid","container","xs","md","tags","tag","Chip","symbol","parse","Fragment","my"],"mappings":"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","file":"static/js/19.1a2fc369.chunk.js","sourcesContent":["import React, { FC } from 'react';\r\nimport { Icon, makeStyles } from '@material-ui/core';\r\n\r\ninterface CustomIconProps {\r\n  src: string;\r\n  [key: string]: any;\r\n}\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    textAlign: 'center'\r\n  },\r\n  icon: {\r\n    display: 'flex',\r\n    height: 'inherit',\r\n    width: 'inherit'\r\n  }\r\n}));\r\n\r\nconst CustomIcon: FC<CustomIconProps> = props => {\r\n  const classes = useStyles();\r\n  return (\r\n    <Icon classes={{ root: classes.root }} fontSize=\"small\">\r\n      <img\r\n        alt=\"Custom Icon\"\r\n        className={classes.icon}\r\n        src={props.src}\r\n        {...props}\r\n      />\r\n    </Icon>\r\n  );\r\n};\r\n\r\nexport default CustomIcon;\r\n","import React, { FC, useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport clsx from 'clsx';\r\nimport axios from 'src/utils/axios';\r\nimport {\r\n  Box,\r\n  IconButton,\r\n  Tooltip,\r\n  Typography,\r\n  colors,\r\n  makeStyles\r\n} from '@material-ui/core';\r\nimport BookmarkBorderOutlinedIcon from '@material-ui/icons/BookmarkBorderOutlined';\r\nimport ShareIcon from '@material-ui/icons/Share';\r\nimport { MessageCircle as MessageCircleIcon } from 'react-feather';\r\nimport CustomIcon from 'src/components/CustomIcon';\r\nimport useAuth from 'src/hooks/useAuth';\r\nimport { Bookmark } from 'src/types/bookmark';\r\nimport { Post } from 'src/types/post';\r\nimport { Theme } from 'src/theme';\r\n\r\ninterface ReactionsProps {\r\n  className?: string;\r\n  post: Post;\r\n  isBookmarked: boolean;\r\n  onBookmarked: (param: boolean) => void;\r\n}\r\n\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    alignItems: 'center'\r\n  },\r\n  div: {\r\n    flexDirection: 'column',\r\n    position: 'sticky',\r\n    float: 'left',\r\n    top: '45vh',\r\n    left: '10vw'\r\n  },\r\n  likedButton: {\r\n    color: colors.red[600]\r\n  },\r\n  likedIcon: {\r\n    padding: theme.spacing(1)\r\n  },\r\n  commentBox: {\r\n    marginTop: theme.spacing(3),\r\n    [theme.breakpoints.down('sm')]: {\r\n      marginTop: theme.typography.pxToRem(6),\r\n      marginLeft: theme.spacing(2),\r\n      marginRight: theme.spacing(1)\r\n    }\r\n  },\r\n  iconBox: {\r\n    marginTop: theme.spacing(1),\r\n    [theme.breakpoints.down('sm')]: {\r\n      marginTop: theme.typography.pxToRem(2)\r\n    }\r\n  },\r\n  commentIcon: {\r\n    color: colors.grey[700]\r\n  }\r\n}));\r\n\r\nconst Reactions: FC<ReactionsProps> = ({\r\n  className,\r\n  post,\r\n  isBookmarked,\r\n  onBookmarked,\r\n  ...rest\r\n}) => {\r\n  const classes = useStyles();\r\n  const { user, isAuthenticated } = useAuth();\r\n  const [isLiked, setLiked] = useState<boolean>(false);\r\n  const [likes, setLikes] = useState<number>(post.liked.count);\r\n  const [disabled, setDisabled] = useState<boolean>(false);\r\n\r\n  useEffect(() => {\r\n    //@ts-ignore\r\n    isAuthenticated && user._id === post.author._id && setDisabled(true);\r\n    !isAuthenticated && setDisabled(true);\r\n  }, [user, isAuthenticated, post.author]);\r\n\r\n  useEffect(() => {\r\n    isAuthenticated &&\r\n      post.liked.users.forEach(item => item === user._id && setLiked(true));\r\n    //eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [post.liked.users]);\r\n\r\n  const updateLiked = async (): Promise<void> => {\r\n    const params = { postId: post._id, isLiked: !isLiked };\r\n    await axios.put<{ post: Post }>('/posts/liked', params);\r\n  };\r\n\r\n  const updateSaved = async (): Promise<void> => {\r\n    const params = { postId: post._id };\r\n    const path = isBookmarked ? 'delete' : 'create';\r\n    await axios.post<{ bookmark: Bookmark }>(`/bookmarks/${path}`, params);\r\n  };\r\n\r\n  const handleLike = (): void => {\r\n    setLiked(true);\r\n    setLikes(prevLikes => prevLikes + 1);\r\n    updateLiked();\r\n  };\r\n\r\n  const handleUnlike = (): void => {\r\n    setLiked(false);\r\n    setLikes(prevLikes => prevLikes - 1);\r\n    updateLiked();\r\n  };\r\n\r\n  const handleSaved = (): void => {\r\n    onBookmarked(true);\r\n    updateSaved();\r\n  };\r\n\r\n  const handleUnsaved = (): void => {\r\n    onBookmarked(false);\r\n    updateSaved();\r\n  };\r\n\r\n  return (\r\n    <div className={clsx(classes.root, classes[className])} {...rest}>\r\n      {isLiked ? (\r\n        <Tooltip\r\n          title=\"Unlike\"\r\n          disableTouchListener\r\n          disableHoverListener={disabled}\r\n        >\r\n          <span>\r\n            <IconButton\r\n              className={clsx(classes.likedButton, classes.likedIcon)}\r\n              onClick={handleUnlike}\r\n              disabled={disabled}\r\n            >\r\n              <CustomIcon src=\"/static/icons/trending_filled.svg\" />\r\n            </IconButton>\r\n          </span>\r\n        </Tooltip>\r\n      ) : (\r\n        <Tooltip\r\n          title=\"Like\"\r\n          disableTouchListener\r\n          disableHoverListener={disabled}\r\n        >\r\n          <span>\r\n            <IconButton\r\n              className={classes.likedIcon}\r\n              onClick={handleLike}\r\n              disabled={disabled}\r\n            >\r\n              <CustomIcon src=\"/static/icons/trending_outlined.svg\" />\r\n            </IconButton>\r\n          </span>\r\n        </Tooltip>\r\n      )}\r\n      <Typography color=\"textSecondary\" variant=\"h6\">\r\n        {likes}\r\n      </Typography>\r\n      <Box className={classes.commentBox}>\r\n        <MessageCircleIcon className={classes.commentIcon} size=\"20\" />\r\n      </Box>\r\n      <Typography color=\"textSecondary\" variant=\"h6\">\r\n        {post.comments.length}\r\n      </Typography>\r\n      <Box className={classes.iconBox}>\r\n        {isBookmarked ? (\r\n          <Tooltip\r\n            title=\"Unsaved\"\r\n            disableTouchListener\r\n            disableHoverListener={disabled}\r\n          >\r\n            <span>\r\n              <IconButton\r\n                className={classes.likedButton}\r\n                onClick={handleUnsaved}\r\n                disabled={disabled}\r\n              >\r\n                <BookmarkBorderOutlinedIcon fontSize=\"small\" />\r\n              </IconButton>\r\n            </span>\r\n          </Tooltip>\r\n        ) : (\r\n          <Tooltip\r\n            title=\"Saved\"\r\n            disableTouchListener\r\n            disableHoverListener={disabled}\r\n          >\r\n            <span>\r\n              <IconButton onClick={handleSaved} disabled={disabled}>\r\n                <BookmarkBorderOutlinedIcon fontSize=\"small\" />\r\n              </IconButton>\r\n            </span>\r\n          </Tooltip>\r\n        )}\r\n      </Box>\r\n      <Box className={classes.iconBox}>\r\n        <span>\r\n          <IconButton disabled={disabled}>\r\n            <ShareIcon fontSize=\"small\" />\r\n          </IconButton>\r\n        </span>\r\n      </Box>\r\n    </div>\r\n  );\r\n};\r\n\r\nReactions.propTypes = {\r\n  className: PropTypes.string,\r\n  // @ts-ignore\r\n  post: PropTypes.object.isRequired,\r\n  isBookmarked: PropTypes.bool,\r\n  onBookmarked: PropTypes.func\r\n};\r\n\r\nexport default Reactions;\r\n","import React, { FC, ChangeEvent, useState } from 'react';\r\nimport clsx from 'clsx';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Button,\r\n  TextField,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  FormControl,\r\n  FormLabel,\r\n  RadioGroup,\r\n  FormControlLabel,\r\n  Radio,\r\n  makeStyles\r\n} from '@material-ui/core';\r\nimport axios from 'src/utils/axios';\r\nimport { Theme } from 'src/theme';\r\nimport { CommentsWithUser } from 'src/types/comment';\r\nimport { User } from 'src/types/user';\r\nimport { Flag } from 'src/types/flag';\r\nimport { FLAG_OPTIONS } from 'src/constants';\r\n\r\ninterface FlagProps {\r\n  className?: string;\r\n  open: boolean;\r\n  user: User;\r\n  comment: CommentsWithUser;\r\n  onOpen: () => void;\r\n  onFlag: () => void;\r\n}\r\n\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n  root: {},\r\n  toggleBtn: {\r\n    '&.MuiToggleButton-root': {\r\n      color: theme.palette.text.primary\r\n    },\r\n    '&.Mui-selected': {\r\n      backgroundColor: theme.palette.secondary.main,\r\n      color: theme.palette.common.white\r\n    }\r\n  }\r\n}));\r\n\r\nconst FlagModal: FC<FlagProps> = ({\r\n  open,\r\n  user,\r\n  comment,\r\n  onOpen,\r\n  onFlag,\r\n  className,\r\n  ...rest\r\n}) => {\r\n  const classes = useStyles();\r\n  const [option, setOption] = useState<string>('');\r\n  const [value, setValue] = useState<string>('');\r\n\r\n  const handleConfirm = async () => {\r\n    const reason = value !== '' ? value : option;\r\n    const params = {\r\n      comment: comment._id,\r\n      reason,\r\n      type: 'comment'\r\n    };\r\n    await axios.put<{ flag: Flag }>('/comments/flag', params);\r\n    onOpen();\r\n    onFlag();\r\n  };\r\n\r\n  const handleClose = () => {\r\n    onOpen();\r\n  };\r\n\r\n  const handleOption = (event: ChangeEvent<HTMLInputElement>): void => {\r\n    setValue('');\r\n    setOption(event.target.value);\r\n  };\r\n\r\n  const handleChange = (event: ChangeEvent<HTMLInputElement>): void => {\r\n    setValue(event.target.value);\r\n  };\r\n\r\n  return (\r\n    <div className={clsx(classes.root, className)} {...rest}>\r\n      <Dialog\r\n        open={open}\r\n        keepMounted\r\n        onClose={handleClose}\r\n        aria-labelledby=\"status-dialog\"\r\n      >\r\n        <DialogTitle>Report</DialogTitle>\r\n        <DialogContent>\r\n          <FormControl component=\"fieldset\">\r\n            <FormLabel component=\"legend\">Please choose the reason</FormLabel>\r\n            <RadioGroup\r\n              aria-label=\"spam-flag-report\"\r\n              name=\"report\"\r\n              value={option}\r\n              onChange={handleOption}\r\n            >\r\n              {FLAG_OPTIONS.map((item, idx: number) => (\r\n                <FormControlLabel\r\n                  key={item.name + idx}\r\n                  value={item.name}\r\n                  control={<Radio />}\r\n                  label={item.label}\r\n                />\r\n              ))}\r\n            </RadioGroup>\r\n          </FormControl>\r\n          <TextField\r\n            value={value}\r\n            margin=\"dense\"\r\n            type=\"text\"\r\n            onChange={handleChange}\r\n            disabled={option !== 'other'}\r\n            fullWidth\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={handleConfirm} color=\"primary\">\r\n            Confirm\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nFlagModal.propTypes = {\r\n  className: PropTypes.string,\r\n  //@ts-ignore\r\n  user: PropTypes.object,\r\n  open: PropTypes.bool,\r\n  onOpen: PropTypes.func,\r\n  onFlag: PropTypes.func\r\n};\r\n\r\nexport default FlagModal;\r\n","import React, { FC, useState, useEffect } from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport moment from 'moment';\nimport {\n  Avatar,\n  Box,\n  Link,\n  Button,\n  Typography,\n  Hidden,\n  useTheme,\n  useMediaQuery,\n  makeStyles,\n  colors\n} from '@material-ui/core';\nimport { MessageCircle as MessageCircleIcon } from 'react-feather';\nimport FlagIcon from '@material-ui/icons/Flag';\nimport FlagOutlinedIcon from '@material-ui/icons/FlagOutlined';\nimport CustomIcon from 'src/components/CustomIcon';\nimport axios from 'src/utils/axios';\nimport useAuth from 'src/hooks/useAuth';\nimport { Theme } from 'src/theme';\nimport { CommentsWithUser } from 'src/types/comment';\nimport FlagModal from './FlagModal';\nimport { Flag } from 'src/types/flag';\n\ninterface CommentProps {\n  className?: string;\n  reply: string;\n  commentId?: string;\n  comment: CommentsWithUser;\n  onComment: (parent: string, depth: number) => void;\n}\n\ninterface Status {\n  reply: boolean;\n  disable: boolean;\n}\n\nconst initialStatus = {\n  reply: false,\n  disable: true\n};\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  root: {\n    display: 'flex',\n    marginBottom: theme.spacing(2)\n  },\n  bubble: {\n    borderRadius: theme.shape.borderRadius\n  },\n  header: {\n    [theme.breakpoints.down('sm')]: {\n      flexWrap: 'wrap'\n    }\n  },\n  name: {\n    [theme.breakpoints.down('sm')]: {\n      width: '100%'\n    }\n  },\n  replybtn: {\n    marginRight: theme.spacing(1)\n  },\n  replyIcon: {\n    color: colors.grey[700]\n  },\n  replyClickIcon: {\n    color: colors.red[700]\n  },\n  small: {\n    width: theme.spacing(4),\n    height: theme.spacing(4)\n  },\n  large: {\n    width: theme.spacing(5),\n    height: theme.spacing(5)\n  },\n  date: {\n    marginLeft: theme.spacing(1)\n  }\n}));\n\nconst Comment: FC<CommentProps> = ({\n  className,\n  comment,\n  reply,\n  onComment,\n  ...rest\n}) => {\n  const classes = useStyles();\n  const theme = useTheme();\n  const match = useMediaQuery(theme.breakpoints.down('sm'));\n  const { user, isAuthenticated } = useAuth();\n  const [open, setOpen] = useState<boolean>(false);\n  const [status, setStatus] = useState<Status>(initialStatus);\n  const [isLiked, setLiked] = useState<boolean>(false);\n  const [isFlag, setFlag] = useState<boolean>(false);\n  const [likes, setLikes] = useState<number>(comment.liked.count);\n  const style = {\n    marginLeft: theme.typography.pxToRem((match ? 10 : 20) * comment.depth)\n  };\n\n  useEffect(() => {\n    //@ts-ignore\n    isAuthenticated &&\n      user._id === comment.user._id &&\n      setStatus(prevState => ({ ...prevState, disabled: true }));\n    !isAuthenticated &&\n      setStatus(prevState => ({ ...prevState, disabled: true }));\n  }, [user, isAuthenticated, comment.user]);\n\n  useEffect(() => {\n    isAuthenticated &&\n      comment.liked.users.forEach(item => item === user._id && setLiked(true));\n    //eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [comment.liked.users]);\n\n  useEffect(() => {\n    if (isAuthenticated) {\n      // @ts-ignore\n      const value = comment.flags.find((item: Flag) => item.user === user._id);\n      setFlag(Boolean(value));\n    }\n    //eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [comment.flags]);\n\n  useEffect(() => {\n    if (user) {\n      const value = reply === comment._id && comment.user._id !== user._id;\n      const disable = comment.user._id === user._id;\n      setStatus({ reply: value, disable });\n    }\n  }, [reply, comment, user]);\n\n  const updateLiked = async (): Promise<void> => {\n    const params = { commentId: comment._id, isLiked: !isLiked };\n    await axios.put<{ comment: CommentsWithUser }>('/comments/liked', params);\n  };\n\n  const handleReply = (): void => {\n    const depth = comment.depth + 1;\n    onComment(comment._id, depth);\n  };\n\n  const handleLiked = (): void => {\n    setLiked(true);\n    setLikes(prevLikes => prevLikes + 1);\n    updateLiked();\n  };\n\n  const handleUnLiked = (): void => {\n    setLiked(false);\n    setLikes(prevLikes => prevLikes - 1);\n    updateLiked();\n  };\n\n  const handleFlag = (): void => {\n    setOpen(true);\n  };\n\n  const handleFlagSubmit = (): void => {\n    setFlag(true);\n  };\n\n  const handleOpen = () => {\n    setOpen(!open);\n  };\n\n  return (\n    <div className={clsx(classes.root, className)} style={style} {...rest}>\n      <Avatar\n        alt=\"Person\"\n        component={RouterLink}\n        src={comment.user.avatar}\n        className={clsx(match ? classes.small : classes.large)}\n        to=\"#\"\n      />\n      <Box\n        flexGrow={1}\n        p={2}\n        ml={2}\n        bgcolor=\"background.dark\"\n        className={classes.bubble}\n      >\n        <Box\n          display=\"flex\"\n          alignItems=\"center\"\n          className={classes.header}\n          mb={1}\n        >\n          <Box className={classes.name}>\n            <Link\n              color=\"textPrimary\"\n              component={RouterLink}\n              to=\"#\"\n              variant=\"h6\"\n            >\n              {comment.user.name}\n            </Link>\n            <Hidden smUp>\n              <Typography\n                color=\"textSecondary\"\n                variant=\"caption\"\n                className={classes.date}\n              >\n                {moment(comment.createdAt).fromNow()}\n              </Typography>\n            </Hidden>\n          </Box>\n          <Box flexGrow={1} />\n          <Button\n            size=\"small\"\n            className={classes.replybtn}\n            onClick={handleReply}\n            disabled={status.disable}\n            startIcon={\n              <MessageCircleIcon\n                size=\"20\"\n                className={\n                  status.reply ? classes.replyClickIcon : classes.replyIcon\n                }\n              />\n            }\n          >\n            Reply\n          </Button>\n          {isLiked ? (\n            <Button\n              size=\"small\"\n              className={classes.replybtn}\n              onClick={handleUnLiked}\n              disabled={status.disable}\n              startIcon={<CustomIcon src=\"/static/icons/trending_filled.svg\" />}\n            >\n              {likes} likes\n            </Button>\n          ) : (\n            <Button\n              size=\"small\"\n              className={classes.replybtn}\n              onClick={handleLiked}\n              disabled={status.disable}\n              startIcon={\n                <CustomIcon src=\"/static/icons/trending_outlined.svg\" />\n              }\n            >\n              {likes} likes\n            </Button>\n          )}\n          <Button\n            size=\"small\"\n            className={classes.replybtn}\n            onClick={handleFlag}\n            disabled={status.disable || isFlag}\n            startIcon={isFlag ? <FlagIcon /> : <FlagOutlinedIcon />}\n          >\n            Flag\n          </Button>\n          <Hidden smDown>\n            <Typography\n              color=\"textSecondary\"\n              variant=\"caption\"\n              className={classes.date}\n            >\n              {moment(comment.createdAt).fromNow()}\n            </Typography>\n          </Hidden>\n        </Box>\n        <Typography variant=\"body1\" color=\"textPrimary\">\n          {comment.comment}\n        </Typography>\n      </Box>\n      {open && (\n        <FlagModal\n          open={open}\n          user={user}\n          comment={comment}\n          onOpen={handleOpen}\n          onFlag={handleFlagSubmit}\n        />\n      )}\n    </div>\n  );\n};\n\nComment.propTypes = {\n  className: PropTypes.string,\n  // @ts-ignore\n  comment: PropTypes.object.isRequired,\n  onReply: PropTypes.func\n};\n\nexport default Comment;\n","import React, { useRef, useState, FC, ChangeEvent } from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { useSnackbar } from 'notistack';\nimport {\n  Avatar,\n  Divider,\n  IconButton,\n  Input,\n  Paper,\n  Tooltip,\n  useTheme,\n  useMediaQuery,\n  makeStyles\n} from '@material-ui/core';\nimport SendIcon from '@material-ui/icons/Send';\nimport AddPhotoIcon from '@material-ui/icons/AddPhotoAlternate';\nimport AttachFileIcon from '@material-ui/icons/AttachFile';\nimport axios from 'src/utils/axios';\nimport useAuth from 'src/hooks/useAuth';\nimport { Theme } from 'src/theme';\nimport { Comments } from 'src/types/comment';\nimport { Post } from 'src/types/post';\n\ninterface Status {\n  depth: number;\n  parent: string | null;\n}\n\ninterface CommentAddProps {\n  className?: string;\n  post?: Post;\n  status: Status;\n  onFetch?: () => void;\n}\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  root: {\n    alignItems: 'center',\n    display: 'flex',\n    [theme.breakpoints.down('sm')]: {\n      flexWrap: 'wrap'\n    }\n  },\n  inputContainer: {\n    flexGrow: 1,\n    marginLeft: theme.spacing(2),\n    paddingBottom: theme.spacing(0.5),\n    paddingLeft: theme.spacing(0.5),\n    paddingRight: theme.spacing(0.5),\n    paddingTop: theme.spacing(0.5),\n    [theme.breakpoints.down('sm')]: {\n      width: '100%'\n    }\n  },\n  divider: {\n    height: 24,\n    width: 1\n  },\n  fileInput: {\n    display: 'none'\n  }\n}));\n\nconst CommentAdd: FC<CommentAddProps> = ({\n  className,\n  post,\n  status,\n  onFetch,\n  ...rest\n}) => {\n  const classes = useStyles();\n  const { user } = useAuth();\n  const { enqueueSnackbar } = useSnackbar();\n  const theme = useTheme();\n  const match = useMediaQuery(theme.breakpoints.down('sm'));\n  const fileInputRef = useRef<HTMLInputElement | null>(null);\n  const [value, setValue] = useState<string>('');\n\n  const handleChange = (event: ChangeEvent<HTMLInputElement>): void => {\n    event.persist();\n    setValue(event.target.value);\n  };\n  \n  const handleClick = async () => {\n    try {\n      const params = {\n        parent: status.parent,\n        post: post._id,\n        depth: status.depth,\n        comment: value\n      };\n      await axios.post<{ comment: Comments }>('/comments/create', params);\n      setValue('');\n    } catch (err) {\n      err.message &&\n        enqueueSnackbar(err.message, {\n          variant: 'error'\n        });\n    }\n    onFetch();\n  };\n\n  const handleAttach = (): void => {\n    fileInputRef.current.click();\n  };\n\n  return (\n    <div className={clsx(classes.root, className)} {...rest}>\n      {!match && <Avatar alt=\"Person\" src={user ? user.avatar : ''} />}\n      <Paper className={classes.inputContainer} variant=\"outlined\">\n        <Input\n          value={value}\n          disableUnderline\n          fullWidth\n          multiline\n          rows={3}\n          onChange={handleChange}\n        />\n      </Paper>\n      <Tooltip title=\"Send\">\n        <span>\n          <IconButton\n            color={value.length > 0 ? 'primary' : 'default'}\n            onClick={handleClick}\n            disabled={value === ''}\n          >\n            <SendIcon />\n          </IconButton>\n        </span>\n      </Tooltip>\n      <Divider className={classes.divider} />\n      <Tooltip title=\"Attach image\">\n        <IconButton edge=\"end\" onClick={handleAttach}>\n          <AddPhotoIcon />\n        </IconButton>\n      </Tooltip>\n      <Tooltip title=\"Attach file\">\n        <IconButton edge=\"end\" onClick={handleAttach}>\n          <AttachFileIcon />\n        </IconButton>\n      </Tooltip>\n      <input className={classes.fileInput} ref={fileInputRef} type=\"file\" />\n    </div>\n  );\n};\n\nCommentAdd.propTypes = {\n  className: PropTypes.string\n};\n\nexport default CommentAdd;\n","import React, { FC, useState, useEffect } from 'react';\r\nimport { useHistory, useLocation, Link as RouterLink } from 'react-router-dom';\r\nimport parse from 'html-react-parser';\r\nimport moment from 'moment';\r\nimport {\r\n  Paper,\r\n  Box,\r\n  Grid,\r\n  Avatar,\r\n  Typography,\r\n  Chip,\r\n  Divider,\r\n  Link,\r\n  useTheme,\r\n  useMediaQuery,\r\n  makeStyles,\r\n  colors\r\n} from '@material-ui/core';\r\nimport axios from 'src/utils/axios';\r\nimport useAuth from 'src/hooks/useAuth';\r\nimport { Theme } from 'src/theme';\r\nimport { PostWithAuthor, Tag } from 'src/types/post';\r\nimport { Comments, CommentsWithUser } from 'src/types/comment';\r\nimport Page from 'src/components/Page';\r\nimport Reactions from './Reactions';\r\nimport Comment from './Comment';\r\nimport CommentAdd from './CommentAdd';\r\nimport { socket } from 'src/constants';\r\n\r\ninterface Status {\r\n  depth: number;\r\n  parent: string | null;\r\n}\r\n\r\nconst initialStatus: Status = {\r\n  depth: 0,\r\n  parent: null\r\n};\r\n\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n  root: {\r\n    backgroundColor: theme.palette.background.dark,\r\n    margin: '0 auto',\r\n    width: '80%',\r\n    minHeight: '100%',\r\n    paddingTop: theme.spacing(3),\r\n    paddingBottom: theme.spacing(3),\r\n    [theme.breakpoints.down('sm')]: {\r\n      width: '100%'\r\n    }\r\n  },\r\n  chip: {\r\n    marginLeft: theme.spacing(1),\r\n    marginTop: theme.spacing(1)\r\n  },\r\n  box: {\r\n    padding: theme.spacing(7),\r\n    flexGrow: 1,\r\n    [theme.breakpoints.down('sm')]: {\r\n      padding: theme.spacing(3)\r\n    }\r\n  },\r\n  author: {\r\n    marginTop: theme.spacing(2),\r\n    display: 'flex',\r\n    alignItems: 'center'\r\n  },\r\n  avatar: {\r\n    marginRight: theme.spacing(2)\r\n  },\r\n  content: {\r\n    fontFamily: theme.typography.fontFamily,\r\n    fontSize: theme.typography.pxToRem(17),\r\n    marginBottom: theme.spacing(2),\r\n    [theme.breakpoints.down('sm')]: {\r\n      fontSize: theme.typography.pxToRem(17)\r\n    }\r\n  },\r\n  disclosure: {\r\n    fontFamily: theme.typography.fontFamily,\r\n    color: colors.grey[500],\r\n    [theme.breakpoints.down('sm')]: {\r\n      fontSize: '0.9rem'\r\n    }\r\n  }\r\n}));\r\n\r\nconst PostView: FC = () => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const { user, isAuthenticated } = useAuth();\r\n  const matches = useMediaQuery(theme.breakpoints.down('md'));\r\n  const [post, setPost] = useState<PostWithAuthor>();\r\n  const [status, setStatus] = useState<Status>(initialStatus);\r\n  const [isBookmarked, setBookmarked] = useState<boolean>(false);\r\n\r\n  useEffect(() => {\r\n    handleFetch();\r\n    socket.on('fetchPost', data => {\r\n      handleFetch();\r\n    });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const handleFetch = async (): Promise<void> => {\r\n    try {\r\n      const path = location.pathname.split('/')[3];\r\n      const params = isAuthenticated && { user: user._id };\r\n      const response = await axios.get<{\r\n        post: PostWithAuthor;\r\n        comments: Comments[];\r\n        isBookmark: boolean;\r\n      }>(`/posts/get/${path}`, {\r\n        params\r\n      });\r\n\r\n      setPost(response.data.post);\r\n      setBookmarked(response.data.isBookmark);\r\n    } catch (err) {\r\n      history.push('/404');\r\n    }\r\n\r\n    setStatus(initialStatus);\r\n  };\r\n\r\n  const handleBookmark = (value: boolean): void => {\r\n    setBookmarked(value);\r\n  };\r\n\r\n  const handleComment = (id: string, depth: number): void => {\r\n    const parent = status.parent !== id ? id : null;\r\n    setStatus({ parent, depth });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {post && !matches && (\r\n        <Reactions\r\n          post={post}\r\n          isBookmarked={isBookmarked}\r\n          onBookmarked={handleBookmark}\r\n          className=\"div\"\r\n        />\r\n      )}\r\n      <Page\r\n        className={classes.root}\r\n        title={post && post.title ? post.title : 'Post'}\r\n      >\r\n        <Paper>\r\n          {post && (\r\n            <Box mt={3} className={classes.box}>\r\n              <Grid container spacing={3}>\r\n                {matches && (\r\n                  <>\r\n                    <Box flexGrow={1} />\r\n                    <Reactions\r\n                      post={post}\r\n                      isBookmarked={isBookmarked}\r\n                      onBookmarked={handleBookmark}\r\n                    />\r\n                  </>\r\n                )}\r\n                <Grid item xs={12} md={10}>\r\n                  <Typography\r\n                    variant=\"h1\"\r\n                    component=\"header\"\r\n                    color=\"textPrimary\"\r\n                  >\r\n                    {post.title}\r\n                  </Typography>\r\n\r\n                  <Box className={classes.author}>\r\n                    <Avatar\r\n                      alt=\"Person\"\r\n                      component={RouterLink}\r\n                      src={post.author.avatar}\r\n                      className={classes.avatar}\r\n                      to={'/users/' + post.author.name}\r\n                    />\r\n                    <Typography variant=\"caption\" color=\"textSecondary\">\r\n                      <Link\r\n                        color=\"textSecondary\"\r\n                        component={RouterLink}\r\n                        to={'/users/' + post.author.name}\r\n                        variant=\"h6\"\r\n                      >\r\n                        {post.author.name}\r\n                      </Link>\r\n                      {` `}\r\n                      {moment(post.createdAt).fromNow()}\r\n                    </Typography>\r\n                  </Box>\r\n                  <Box mt={2}>\r\n                    {post.tags.map((tag: Tag) => (\r\n                      <Chip\r\n                        key={tag.symbol}\r\n                        variant=\"outlined\"\r\n                        label={tag.symbol}\r\n                        className={classes.chip}\r\n                      />\r\n                    ))}\r\n                  </Box>\r\n                </Grid>\r\n              </Grid>\r\n              <Box mt={3} className={classes.content}>\r\n                {parse(post.content)}\r\n              </Box>\r\n              <Divider />\r\n              <Box mt={3} className={classes.disclosure}>\r\n                {parse(post.disclosure)}\r\n              </Box>\r\n            </Box>\r\n          )}\r\n        </Paper>\r\n        {post && (\r\n          <Paper>\r\n            <Box mt={3} className={classes.box}>\r\n              <Grid container spacing={3}>\r\n                <Grid item xs={12} md={12}>\r\n                  {post.comments.map((comment: CommentsWithUser) => (\r\n                    <React.Fragment key={comment._id}>\r\n                      <Comment\r\n                        comment={comment}\r\n                        reply={status.parent}\r\n                        onComment={handleComment}\r\n                      />\r\n                    </React.Fragment>\r\n                  ))}\r\n                  <Box my={2}>\r\n                    <Divider />\r\n                  </Box>\r\n                  <CommentAdd\r\n                    post={post}\r\n                    status={status}\r\n                    onFetch={handleFetch}\r\n                  />\r\n                </Grid>\r\n              </Grid>\r\n            </Box>\r\n          </Paper>\r\n        )}\r\n      </Page>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PostView;\r\n"],"sourceRoot":""}