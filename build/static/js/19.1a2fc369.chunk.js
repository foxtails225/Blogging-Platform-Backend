(this["webpackJsonpdankstocks-client"]=this["webpackJsonpdankstocks-client"]||[]).push([[19],{1210:function(e,a,t){"use strict";var n=t(0),r=t.n(n),c=t(1114),o=t(1118),l=Object(c.a)((function(){return{root:{textAlign:"center"},icon:{display:"flex",height:"inherit",width:"inherit"}}}));a.a=function(e){var a=l();return r.a.createElement(o.a,{classes:{root:a.root},fontSize:"small"},r.a.createElement("img",Object.assign({alt:"Custom Icon",className:a.icon,src:e.src},e)))}},1348:function(e,a,t){"use strict";t.r(a);var n=t(7),r=t.n(n),c=t(11),o=t(23),l=t(359),s=t(0),i=t.n(s),m=t(36),u=t(21),p=t(1268),d=t(4),b=t.n(d),f=t(1114),g=t(14),E=t(35),h=t(616),k=t(161),O=t(1109),j=t(1101),v=t(77),y=t(1112),x=t(1078),w=t(1113),N=t(1095),S=t(82),C=t(56),B=t(360),_=t(45),I=t(3),T=t(1084),L=t(623),F=t(1229),R=t.n(F),z=t(1215),A=t.n(z),P=t(1188),G=t(1210),H=Object(f.a)((function(e){return{root:{display:"flex",alignItems:"center"},div:{flexDirection:"column",position:"sticky",float:"left",top:"45vh",left:"10vw"},likedButton:{color:g.a.red[600]},likedIcon:{padding:e.spacing(1)},commentBox:Object(l.a)({marginTop:e.spacing(3)},e.breakpoints.down("sm"),{marginTop:e.typography.pxToRem(6),marginLeft:e.spacing(2),marginRight:e.spacing(1)}),iconBox:Object(l.a)({marginTop:e.spacing(1)},e.breakpoints.down("sm"),{marginTop:e.typography.pxToRem(2)}),commentIcon:{color:g.a.grey[700]}}})),U=function(e){var a=e.className,t=e.post,n=e.isBookmarked,l=e.onBookmarked,m=Object(_.a)(e,["className","post","isBookmarked","onBookmarked"]),u=H(),p=Object(C.a)(),d=p.user,b=p.isAuthenticated,f=Object(s.useState)(!1),g=Object(o.a)(f,2),E=g[0],h=g[1],k=Object(s.useState)(t.liked.count),j=Object(o.a)(k,2),y=j[0],x=j[1],w=Object(s.useState)(!1),N=Object(o.a)(w,2),B=N[0],F=N[1];Object(s.useEffect)((function(){b&&d._id===t.author._id&&F(!0),!b&&F(!0)}),[d,b,t.author]),Object(s.useEffect)((function(){b&&t.liked.users.forEach((function(e){return e===d._id&&h(!0)}))}),[t.liked.users]);var z=function(){var e=Object(c.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={postId:t._id,isLiked:!E},e.next=3,S.a.put("/posts/liked",a);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(c.a)(r.a.mark((function e(){var a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={postId:t._id},c=n?"delete":"create",e.next=4,S.a.post("/bookmarks/".concat(c),a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return i.a.createElement("div",Object.assign({className:Object(I.a)(u.root,u[a])},m),E?i.a.createElement(T.a,{title:"Unlike",disableTouchListener:!0,disableHoverListener:B},i.a.createElement("span",null,i.a.createElement(L.a,{className:Object(I.a)(u.likedButton,u.likedIcon),onClick:function(){h(!1),x((function(e){return e-1})),z()},disabled:B},i.a.createElement(G.a,{src:"/static/icons/trending_filled.svg"})))):i.a.createElement(T.a,{title:"Like",disableTouchListener:!0,disableHoverListener:B},i.a.createElement("span",null,i.a.createElement(L.a,{className:u.likedIcon,onClick:function(){h(!0),x((function(e){return e+1})),z()},disabled:B},i.a.createElement(G.a,{src:"/static/icons/trending_outlined.svg"})))),i.a.createElement(v.a,{color:"textSecondary",variant:"h6"},y),i.a.createElement(O.a,{className:u.commentBox},i.a.createElement(P.a,{className:u.commentIcon,size:"20"})),i.a.createElement(v.a,{color:"textSecondary",variant:"h6"},t.comments.length),i.a.createElement(O.a,{className:u.iconBox},n?i.a.createElement(T.a,{title:"Unsaved",disableTouchListener:!0,disableHoverListener:B},i.a.createElement("span",null,i.a.createElement(L.a,{className:u.likedButton,onClick:function(){l(!1),U()},disabled:B},i.a.createElement(R.a,{fontSize:"small"})))):i.a.createElement(T.a,{title:"Saved",disableTouchListener:!0,disableHoverListener:B},i.a.createElement("span",null,i.a.createElement(L.a,{onClick:function(){l(!0),U()},disabled:B},i.a.createElement(R.a,{fontSize:"small"}))))),i.a.createElement(O.a,{className:u.iconBox},i.a.createElement("span",null,i.a.createElement(L.a,{disabled:B},i.a.createElement(A.a,{fontSize:"small"})))))},W=t(33),M=t(1110),D=t(1079),J=t(1304),q=t.n(J),K=t(1305),Q=t.n(K),V=t(1123),X=t(1124),Y=t(1125),Z=t(628),$=t(630),ee=t(1129),ae=t(1087),te=t(1139),ne=t(1092),re=t(1126),ce=t(24),oe=Object(f.a)((function(e){return{root:{},toggleBtn:{"&.MuiToggleButton-root":{color:e.palette.text.primary},"&.Mui-selected":{backgroundColor:e.palette.secondary.main,color:e.palette.common.white}}}})),le=function(e){var a=e.open,t=(e.user,e.comment),n=e.onOpen,l=e.onFlag,m=e.className,u=Object(_.a)(e,["open","user","comment","onOpen","onFlag","className"]),p=oe(),d=Object(s.useState)(""),b=Object(o.a)(d,2),f=b[0],g=b[1],E=Object(s.useState)(""),h=Object(o.a)(E,2),k=h[0],O=h[1],j=function(){var e=Object(c.a)(r.a.mark((function e(){var a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=""!==k?k:f,c={comment:t._id,reason:a,type:"comment"},e.next=4,S.a.put("/comments/flag",c);case 4:n(),l();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){n()};return i.a.createElement("div",Object.assign({className:Object(I.a)(p.root,m)},u),i.a.createElement(V.a,{open:a,keepMounted:!0,onClose:v,"aria-labelledby":"status-dialog"},i.a.createElement(X.a,null,"Report"),i.a.createElement(Y.a,null,i.a.createElement(Z.a,{component:"fieldset"},i.a.createElement($.a,{component:"legend"},"Please choose the reason"),i.a.createElement(ee.a,{"aria-label":"spam-flag-report",name:"report",value:f,onChange:function(e){O(""),g(e.target.value)}},ce.c.map((function(e,a){return i.a.createElement(ae.a,{key:e.name+a,value:e.name,control:i.a.createElement(te.a,null),label:e.label})})))),i.a.createElement(ne.a,{value:k,margin:"dense",type:"text",onChange:function(e){O(e.target.value)},disabled:"other"!==f,fullWidth:!0})),i.a.createElement(re.a,null,i.a.createElement(D.a,{onClick:v,color:"primary"},"Cancel"),i.a.createElement(D.a,{onClick:j,color:"primary"},"Confirm"))))},se={reply:!1,disable:!0},ie=Object(f.a)((function(e){return{root:{display:"flex",marginBottom:e.spacing(2)},bubble:{borderRadius:e.shape.borderRadius},header:Object(l.a)({},e.breakpoints.down("sm"),{flexWrap:"wrap"}),name:Object(l.a)({},e.breakpoints.down("sm"),{width:"100%"}),replybtn:{marginRight:e.spacing(1)},replyIcon:{color:g.a.grey[700]},replyClickIcon:{color:g.a.red[700]},small:{width:e.spacing(4),height:e.spacing(4)},large:{width:e.spacing(5),height:e.spacing(5)},date:{marginLeft:e.spacing(1)}}})),me=function(e){var a=e.className,t=e.comment,n=e.reply,l=e.onComment,m=Object(_.a)(e,["className","comment","reply","onComment"]),p=ie(),d=Object(E.a)(),f=Object(h.a)(d.breakpoints.down("sm")),g=Object(C.a)(),k=g.user,j=g.isAuthenticated,w=Object(s.useState)(!1),N=Object(o.a)(w,2),B=N[0],T=N[1],L=Object(s.useState)(se),F=Object(o.a)(L,2),R=F[0],z=F[1],A=Object(s.useState)(!1),H=Object(o.a)(A,2),U=H[0],J=H[1],K=Object(s.useState)(!1),V=Object(o.a)(K,2),X=V[0],Y=V[1],Z=Object(s.useState)(t.liked.count),$=Object(o.a)(Z,2),ee=$[0],ae=$[1],te={marginLeft:d.typography.pxToRem((f?10:20)*t.depth)};Object(s.useEffect)((function(){j&&k._id===t.user._id&&z((function(e){return Object(W.a)(Object(W.a)({},e),{},{disabled:!0})})),!j&&z((function(e){return Object(W.a)(Object(W.a)({},e),{},{disabled:!0})}))}),[k,j,t.user]),Object(s.useEffect)((function(){j&&t.liked.users.forEach((function(e){return e===k._id&&J(!0)}))}),[t.liked.users]),Object(s.useEffect)((function(){if(j){var e=t.flags.find((function(e){return e.user===k._id}));Y(Boolean(e))}}),[t.flags]),Object(s.useEffect)((function(){if(k){var e=n===t._id&&t.user._id!==k._id,a=t.user._id===k._id;z({reply:e,disable:a})}}),[n,t,k]);var ne=function(){var e=Object(c.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={commentId:t._id,isLiked:!U},e.next=3,S.a.put("/comments/liked",a);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return i.a.createElement("div",Object.assign({className:Object(I.a)(p.root,a),style:te},m),i.a.createElement(y.a,{alt:"Person",component:u.a,src:t.user.avatar,className:Object(I.a)(f?p.small:p.large),to:"#"}),i.a.createElement(O.a,{flexGrow:1,p:2,ml:2,bgcolor:"background.dark",className:p.bubble},i.a.createElement(O.a,{display:"flex",alignItems:"center",className:p.header,mb:1},i.a.createElement(O.a,{className:p.name},i.a.createElement(x.a,{color:"textPrimary",component:u.a,to:"#",variant:"h6"},t.user.name),i.a.createElement(M.a,{smUp:!0},i.a.createElement(v.a,{color:"textSecondary",variant:"caption",className:p.date},b()(t.createdAt).fromNow()))),i.a.createElement(O.a,{flexGrow:1}),i.a.createElement(D.a,{size:"small",className:p.replybtn,onClick:function(){var e=t.depth+1;l(t._id,e)},disabled:R.disable,startIcon:i.a.createElement(P.a,{size:"20",className:R.reply?p.replyClickIcon:p.replyIcon})},"Reply"),U?i.a.createElement(D.a,{size:"small",className:p.replybtn,onClick:function(){J(!1),ae((function(e){return e-1})),ne()},disabled:R.disable,startIcon:i.a.createElement(G.a,{src:"/static/icons/trending_filled.svg"})},ee," likes"):i.a.createElement(D.a,{size:"small",className:p.replybtn,onClick:function(){J(!0),ae((function(e){return e+1})),ne()},disabled:R.disable,startIcon:i.a.createElement(G.a,{src:"/static/icons/trending_outlined.svg"})},ee," likes"),i.a.createElement(D.a,{size:"small",className:p.replybtn,onClick:function(){T(!0)},disabled:R.disable||X,startIcon:X?i.a.createElement(q.a,null):i.a.createElement(Q.a,null)},"Flag"),i.a.createElement(M.a,{smDown:!0},i.a.createElement(v.a,{color:"textSecondary",variant:"caption",className:p.date},b()(t.createdAt).fromNow()))),i.a.createElement(v.a,{variant:"body1",color:"textPrimary"},t.comment)),B&&i.a.createElement(le,{open:B,user:k,comment:t,onOpen:function(){T(!B)},onFlag:function(){Y(!0)}}))},ue=t(148),pe=t(354),de=t(1248),be=t.n(de),fe=t(1247),ge=t.n(fe),Ee=t(1306),he=t.n(Ee),ke=Object(f.a)((function(e){return{root:Object(l.a)({alignItems:"center",display:"flex"},e.breakpoints.down("sm"),{flexWrap:"wrap"}),inputContainer:Object(l.a)({flexGrow:1,marginLeft:e.spacing(2),paddingBottom:e.spacing(.5),paddingLeft:e.spacing(.5),paddingRight:e.spacing(.5),paddingTop:e.spacing(.5)},e.breakpoints.down("sm"),{width:"100%"}),divider:{height:24,width:1},fileInput:{display:"none"}}})),Oe=function(e){var a=e.className,t=e.post,n=e.status,l=e.onFetch,m=Object(_.a)(e,["className","post","status","onFetch"]),u=ke(),p=Object(C.a)().user,d=Object(ue.b)().enqueueSnackbar,b=Object(E.a)(),f=Object(h.a)(b.breakpoints.down("sm")),g=Object(s.useRef)(null),O=Object(s.useState)(""),j=Object(o.a)(O,2),v=j[0],x=j[1],w=function(){var e=Object(c.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={parent:n.parent,post:t._id,depth:n.depth,comment:v},e.next=4,S.a.post("/comments/create",a);case 4:x(""),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0.message&&d(e.t0.message,{variant:"error"});case 10:l();case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),B=function(){g.current.click()};return i.a.createElement("div",Object.assign({className:Object(I.a)(u.root,a)},m),!f&&i.a.createElement(y.a,{alt:"Person",src:p?p.avatar:""}),i.a.createElement(k.a,{className:u.inputContainer,variant:"outlined"},i.a.createElement(pe.a,{value:v,disableUnderline:!0,fullWidth:!0,multiline:!0,rows:3,onChange:function(e){e.persist(),x(e.target.value)}})),i.a.createElement(T.a,{title:"Send"},i.a.createElement("span",null,i.a.createElement(L.a,{color:v.length>0?"primary":"default",onClick:w,disabled:""===v},i.a.createElement(be.a,null)))),i.a.createElement(N.a,{className:u.divider}),i.a.createElement(T.a,{title:"Attach image"},i.a.createElement(L.a,{edge:"end",onClick:B},i.a.createElement(ge.a,null))),i.a.createElement(T.a,{title:"Attach file"},i.a.createElement(L.a,{edge:"end",onClick:B},i.a.createElement(he.a,null))),i.a.createElement("input",{className:u.fileInput,ref:g,type:"file"}))},je={depth:0,parent:null},ve=Object(f.a)((function(e){return{root:Object(l.a)({backgroundColor:e.palette.background.dark,margin:"0 auto",width:"80%",minHeight:"100%",paddingTop:e.spacing(3),paddingBottom:e.spacing(3)},e.breakpoints.down("sm"),{width:"100%"}),chip:{marginLeft:e.spacing(1),marginTop:e.spacing(1)},box:Object(l.a)({padding:e.spacing(7),flexGrow:1},e.breakpoints.down("sm"),{padding:e.spacing(3)}),author:{marginTop:e.spacing(2),display:"flex",alignItems:"center"},avatar:{marginRight:e.spacing(2)},content:Object(l.a)({fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(17),marginBottom:e.spacing(2)},e.breakpoints.down("sm"),{fontSize:e.typography.pxToRem(17)}),disclosure:Object(l.a)({fontFamily:e.typography.fontFamily,color:g.a.grey[500]},e.breakpoints.down("sm"),{fontSize:"0.9rem"})}}));a.default=function(){var e=ve(),a=Object(E.a)(),t=Object(m.g)(),n=Object(m.h)(),l=Object(C.a)(),d=l.user,f=l.isAuthenticated,g=Object(h.a)(a.breakpoints.down("md")),_=Object(s.useState)(),I=Object(o.a)(_,2),T=I[0],L=I[1],F=Object(s.useState)(je),R=Object(o.a)(F,2),z=R[0],A=R[1],P=Object(s.useState)(!1),G=Object(o.a)(P,2),H=G[0],W=G[1];Object(s.useEffect)((function(){M(),ce.f.on("fetchPost",(function(e){M()}))}),[]);var M=function(){var e=Object(c.a)(r.a.mark((function e(){var a,c,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=n.pathname.split("/")[3],c=f&&{user:d._id},e.next=5,S.a.get("/posts/get/".concat(a),{params:c});case 5:o=e.sent,L(o.data.post),W(o.data.isBookmark),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t.push("/404");case 13:A(je);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),D=function(e){W(e)},J=function(e,a){var t=z.parent!==e?e:null;A({parent:t,depth:a})};return i.a.createElement(i.a.Fragment,null,T&&!g&&i.a.createElement(U,{post:T,isBookmarked:H,onBookmarked:D,className:"div"}),i.a.createElement(B.a,{className:e.root,title:T&&T.title?T.title:"Post"},i.a.createElement(k.a,null,T&&i.a.createElement(O.a,{mt:3,className:e.box},i.a.createElement(j.a,{container:!0,spacing:3},g&&i.a.createElement(i.a.Fragment,null,i.a.createElement(O.a,{flexGrow:1}),i.a.createElement(U,{post:T,isBookmarked:H,onBookmarked:D})),i.a.createElement(j.a,{item:!0,xs:12,md:10},i.a.createElement(v.a,{variant:"h1",component:"header",color:"textPrimary"},T.title),i.a.createElement(O.a,{className:e.author},i.a.createElement(y.a,{alt:"Person",component:u.a,src:T.author.avatar,className:e.avatar,to:"/users/"+T.author.name}),i.a.createElement(v.a,{variant:"caption",color:"textSecondary"},i.a.createElement(x.a,{color:"textSecondary",component:u.a,to:"/users/"+T.author.name,variant:"h6"},T.author.name)," ",b()(T.createdAt).fromNow())),i.a.createElement(O.a,{mt:2},T.tags.map((function(a){return i.a.createElement(w.a,{key:a.symbol,variant:"outlined",label:a.symbol,className:e.chip})}))))),i.a.createElement(O.a,{mt:3,className:e.content},Object(p.a)(T.content)),i.a.createElement(N.a,null),i.a.createElement(O.a,{mt:3,className:e.disclosure},Object(p.a)(T.disclosure)))),T&&i.a.createElement(k.a,null,i.a.createElement(O.a,{mt:3,className:e.box},i.a.createElement(j.a,{container:!0,spacing:3},i.a.createElement(j.a,{item:!0,xs:12,md:12},T.comments.map((function(e){return i.a.createElement(i.a.Fragment,{key:e._id},i.a.createElement(me,{comment:e,reply:z.parent,onComment:J}))})),i.a.createElement(O.a,{my:2},i.a.createElement(N.a,null)),i.a.createElement(Oe,{post:T,status:z,onFetch:M})))))))}}}]);
//# sourceMappingURL=19.1a2fc369.chunk.js.map