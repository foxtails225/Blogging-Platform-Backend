(this["webpackJsonpblogging-platform-frontend"]=this["webpackJsonpblogging-platform-frontend"]||[]).push([[11],{1116:function(e,t,a){"use strict";var n=a(1),r=a(5),c=a(0),o=(a(2),a(4)),l=a(8),i=a(10),s=c.forwardRef((function(e,t){var a=e.classes,l=e.className,s=e.color,m=void 0===s?"inherit":s,d=e.component,u=void 0===d?"span":d,p=e.fontSize,f=void 0===p?"default":p,b=Object(r.a)(e,["classes","className","color","component","fontSize"]);return c.createElement(u,Object(n.a)({className:Object(o.a)("material-icons",a.root,l,"inherit"!==m&&a["color".concat(Object(i.a)(m))],"default"!==f&&a["fontSize".concat(Object(i.a)(f))]),"aria-hidden":!0,ref:t},b))}));s.muiName="Icon",t.a=Object(l.a)((function(e){return{root:{userSelect:"none",fontSize:e.typography.pxToRem(24),width:"1em",height:"1em",overflow:"hidden",flexShrink:0},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:e.typography.pxToRem(20)},fontSizeLarge:{fontSize:e.typography.pxToRem(36)}}}),{name:"MuiIcon"})(s)},1218:function(e,t,a){"use strict";var n=a(261),r=a(262);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(a(0)),o=(0,n(a(263)).default)(c.createElement("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"}),"Share");t.default=o},1233:function(e,t,a){"use strict";var n=a(261),r=a(262);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(a(0)),o=(0,n(a(263)).default)(c.createElement("path",{d:"M19 7v2.99s-1.99.01-2 0V7h-3s.01-1.99 0-2h3V2h2v3h3v2h-3zm-3 4V8h-3V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8h-3zM5 19l3-4 2 3 3-4 4 5H5z"}),"AddPhotoAlternate");t.default=o},1234:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(1112),o=a(1116),l=Object(c.a)((function(){return{root:{textAlign:"center"},icon:{display:"flex",height:"inherit",width:"inherit"}}}));t.a=function(e){var t=l();return r.a.createElement(o.a,{classes:{root:t.root},fontSize:"small"},r.a.createElement("img",Object.assign({alt:"Custom Icon",className:t.icon,src:e.src},e)))}},1235:function(e,t,a){"use strict";var n=a(261),r=a(262);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(a(0)),o=(0,n(a(263)).default)(c.createElement("path",{d:"M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2zm0 15l-5-2.18L7 18V5h10v13z"}),"BookmarkBorderOutlined");t.default=o},1286:function(e,t,a){"use strict";var n=a(261),r=a(262);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(a(0)),o=(0,n(a(263)).default)(c.createElement("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"}),"Send");t.default=o},1287:function(e,t,a){"use strict";var n=a(261),r=a(262);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(a(0)),o=(0,n(a(263)).default)(c.createElement("path",{d:"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z"}),"AttachFile");t.default=o},1319:function(e,t,a){"use strict";a.r(t);var n=a(7),r=a.n(n),c=a(11),o=a(23),l=a(356),i=a(0),s=a.n(i),m=a(42),d=a(24),u=a(1250),p=a(3),f=a.n(p),b=a(1112),h=a(14),g=a(34),v=a(615),E=a(160),y=a(1107),O=a(1099),j=a(76),k=a(1110),x=a(1077),w=a(1111),N=a(1097),S=a(134),I=a(81),_=a(357),z=a(45),B=a(4),R=a(1083),T=a(622),L=a(1235),C=a.n(L),P=a(1218),M=a.n(P),A=a(1185),F=a(1234),V=Object(b.a)((function(e){return{root:{display:"flex",alignItems:"center"},div:{flexDirection:"column",position:"sticky",float:"left",top:"45vh",left:"10vw"},likedButton:{color:h.a.red[600]},likedIcon:{padding:e.spacing(1)},commentBox:Object(l.a)({marginTop:e.spacing(3)},e.breakpoints.down("sm"),{marginTop:e.typography.pxToRem(6),marginLeft:e.spacing(2),marginRight:e.spacing(1)}),iconBox:Object(l.a)({marginTop:e.spacing(1)},e.breakpoints.down("sm"),{marginTop:e.typography.pxToRem(2)}),commentIcon:{color:h.a.grey[700]}}})),H=function(e){var t=e.className,a=e.post,n=e.comments,l=e.isBookmarked,m=e.onBookmarked,d=Object(z.a)(e,["className","post","comments","isBookmarked","onBookmarked"]),u=V(),p=Object(I.a)(),f=p.user,b=p.isAuthenticated,h=Object(i.useState)(!1),g=Object(o.a)(h,2),v=g[0],E=g[1],O=Object(i.useState)(a.liked.count),k=Object(o.a)(O,2),x=k[0],w=k[1],N=Object(i.useState)(!1),_=Object(o.a)(N,2),L=_[0],P=_[1];Object(i.useEffect)((function(){b&&f._id===a.author._id&&P(!0),!b&&P(!0)}),[f,b,a.author]),Object(i.useEffect)((function(){b&&a.liked.users.forEach((function(e){return e===f._id&&E(!0)}))}),[a.liked.users]);var H=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={postId:a._id,isLiked:!v},e.next=3,S.a.put("/posts/liked",t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(c.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={postId:a._id},n=l?"delete":"create",e.next=4,S.a.post("/bookmarks/".concat(n),t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return s.a.createElement("div",Object.assign({className:Object(B.a)(u.root,u[t])},d),v?s.a.createElement(R.a,{title:"Unlike",disableTouchListener:!0,disableHoverListener:L},s.a.createElement("span",null,s.a.createElement(T.a,{className:Object(B.a)(u.likedButton,u.likedIcon),onClick:function(){E(!1),w((function(e){return e-1})),H()},disabled:L},s.a.createElement(F.a,{src:"/static/icons/trending_filled.svg"})))):s.a.createElement(R.a,{title:"Like",disableTouchListener:!0,disableHoverListener:L},s.a.createElement("span",null,s.a.createElement(T.a,{className:u.likedIcon,onClick:function(){E(!0),w((function(e){return e+1})),H()},disabled:L},s.a.createElement(F.a,{src:"/static/icons/trending_outlined.svg"})))),s.a.createElement(j.a,{color:"textSecondary",variant:"h6"},x),s.a.createElement(y.a,{className:u.commentBox},s.a.createElement(A.a,{className:u.commentIcon,size:"20"})),s.a.createElement(j.a,{color:"textSecondary",variant:"h6"},n),s.a.createElement(y.a,{className:u.iconBox},l?s.a.createElement(R.a,{title:"Unsaved",disableTouchListener:!0,disableHoverListener:L},s.a.createElement("span",null,s.a.createElement(T.a,{className:u.likedButton,onClick:function(){m(!1),G()},disabled:L},s.a.createElement(C.a,{fontSize:"small"})))):s.a.createElement(R.a,{title:"Saved",disableTouchListener:!0,disableHoverListener:L},s.a.createElement("span",null,s.a.createElement(T.a,{onClick:function(){m(!0),G()},disabled:L},s.a.createElement(C.a,{fontSize:"small"}))))),s.a.createElement(y.a,{className:u.iconBox},s.a.createElement("span",null,s.a.createElement(T.a,{disabled:L},s.a.createElement(M.a,{fontSize:"small"})))))},G=a(1078),U={reply:!1,disable:!0},W=Object(b.a)((function(e){return{root:{display:"flex",marginBottom:e.spacing(2)},bubble:{borderRadius:e.shape.borderRadius},header:Object(l.a)({},e.breakpoints.down("sm"),{flexWrap:"wrap"}),name:Object(l.a)({},e.breakpoints.down("sm"),{width:"100%"}),replybtn:{marginRight:e.spacing(1)},replyIcon:{color:h.a.grey[700]},replyClickIcon:{color:h.a.red[700]},small:{width:e.spacing(4),height:e.spacing(4)},large:{width:e.spacing(5),height:e.spacing(5)}}})),D=function(e){var t=e.className,a=e.user,n=e.commentId,r=e.comment,c=e.depth,l=e.reply,m=e.onReply,u=Object(z.a)(e,["className","user","commentId","comment","depth","reply","onReply"]),p=W(),b=Object(g.a)(),h=Object(v.a)(b.breakpoints.down("sm")),E=Object(i.useState)(U),O=Object(o.a)(E,2),w=O[0],N=O[1],S={marginLeft:b.typography.pxToRem((h?10:20)*c)};Object(i.useEffect)((function(){if(a){var e=l===r._id&&r.user._id!==a._id,t=r.user._id===a._id;N({reply:e,disable:t})}}),[l,r,a]);return s.a.createElement("div",Object.assign({className:Object(B.a)(p.root,t),style:S},u),s.a.createElement(k.a,{alt:"Person",component:d.a,src:r.user.avatar,className:Object(B.a)(h?p.small:p.large),to:"#"}),s.a.createElement(y.a,{flexGrow:1,p:2,ml:2,bgcolor:"background.dark",className:p.bubble},s.a.createElement(y.a,{display:"flex",alignItems:"center",className:p.header,mb:1},s.a.createElement(y.a,{className:p.name},s.a.createElement(x.a,{color:"textPrimary",component:d.a,to:"#",variant:"h6"},r.user.name)),s.a.createElement(y.a,{flexGrow:1}),s.a.createElement(G.a,{id:r._id,size:"small",className:p.replybtn,onClick:function(e){var t=Object.keys(r).includes("depth")?r.depth+1:1;m(e.currentTarget.id,t,n)},disabled:w.disable,startIcon:s.a.createElement(A.a,{size:"20",className:w.reply?p.replyClickIcon:p.replyIcon})},"Reply"),s.a.createElement(j.a,{color:"textSecondary",variant:"caption"},f()(r.createdAt).fromNow())),s.a.createElement(j.a,{variant:"body1",color:"textPrimary"},r.comment)))},J=a(147),q=a(351),K=a(1286),Q=a.n(K),X=a(1233),Y=a.n(X),Z=a(1287),$=a.n(Z),ee=Object(b.a)((function(e){return{root:Object(l.a)({alignItems:"center",display:"flex"},e.breakpoints.down("sm"),{flexWrap:"wrap"}),inputContainer:Object(l.a)({flexGrow:1,marginLeft:e.spacing(2),paddingBottom:e.spacing(.5),paddingLeft:e.spacing(.5),paddingRight:e.spacing(.5),paddingTop:e.spacing(.5)},e.breakpoints.down("sm"),{width:"100%"}),divider:{height:24,width:1},fileInput:{display:"none"}}})),te=function(e){var t=e.className,a=e.post,n=e.reply,l=e.onFetch,m=Object(z.a)(e,["className","post","reply","onFetch"]),d=ee(),u=Object(I.a)().user,p=Object(J.b)().enqueueSnackbar,f=Object(g.a)(),b=Object(v.a)(f.breakpoints.down("sm")),h=Object(i.useRef)(null),y=Object(i.useState)(""),O=Object(o.a)(y,2),j=O[0],x=O[1],w=function(){var e=Object(c.a)(r.a.mark((function e(){var t,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.value){e.next=7;break}return t={slug:a.slug,post:a._id,comment:j},e.next=5,S.a.post("/comments/create",t);case 5:e.next=10;break;case 7:return c={parent:n.value,commentId:n.commentId,comment:j,depth:n.depth},e.next=10,S.a.post("/comments/reply/create",c);case 10:x(""),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),e.t0.message&&p(e.t0.message,{variant:"error"});case 16:l();case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),_=function(){h.current.click()};return s.a.createElement("div",Object.assign({className:Object(B.a)(d.root,t)},m),null!==b&&void 0!==b?b:s.a.createElement(k.a,{alt:"Person",src:u?u.avatar:""}),s.a.createElement(E.a,{className:d.inputContainer,variant:"outlined"},s.a.createElement(q.a,{value:j,disableUnderline:!0,fullWidth:!0,multiline:!0,rows:3,onChange:function(e){e.persist(),x(e.target.value)}})),s.a.createElement(R.a,{title:"Send"},s.a.createElement("span",null,s.a.createElement(T.a,{color:j.length>0?"primary":"default",onClick:w,disabled:""===j},s.a.createElement(Q.a,null)))),s.a.createElement(N.a,{className:d.divider}),s.a.createElement(R.a,{title:"Attach image"},s.a.createElement(T.a,{edge:"end",onClick:_},s.a.createElement(Y.a,null))),s.a.createElement(R.a,{title:"Attach file"},s.a.createElement(T.a,{edge:"end",onClick:_},s.a.createElement($.a,null))),s.a.createElement("input",{className:d.fileInput,ref:h,type:"file"}))},ae={value:null,depth:0,commentId:null},ne=Object(b.a)((function(e){return{root:Object(l.a)({backgroundColor:e.palette.background.dark,margin:"0 auto",width:"80%",minHeight:"100%",paddingTop:e.spacing(3),paddingBottom:e.spacing(3)},e.breakpoints.down("sm"),{width:"100%"}),chip:{marginLeft:e.spacing(1),marginTop:e.spacing(1)},box:Object(l.a)({padding:e.spacing(7),flexGrow:1},e.breakpoints.down("sm"),{padding:e.spacing(3)}),author:{marginTop:e.spacing(2),display:"flex",alignItems:"center"},avatar:{marginRight:e.spacing(2)},content:Object(l.a)({fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(17),marginBottom:e.spacing(2)},e.breakpoints.down("sm"),{fontSize:e.typography.pxToRem(17)}),disclosure:{fontFamily:e.typography.fontFamily,"& p":Object(l.a)({color:h.a.grey[500]},e.breakpoints.down("sm"),{fontSize:"0.9rem"})}}}));t.default=function(){var e=ne(),t=Object(g.a)(),a=Object(m.g)(),n=Object(m.h)(),l=Object(I.a)(),p=l.user,b=l.isAuthenticated,h=Object(v.a)(t.breakpoints.down("md")),z=Object(i.useState)(),B=Object(o.a)(z,2),R=B[0],T=B[1],L=Object(i.useState)([]),C=Object(o.a)(L,2),P=C[0],M=C[1],A=Object(i.useState)(ae),F=Object(o.a)(A,2),V=F[0],G=F[1],U=Object(i.useState)(!1),W=Object(o.a)(U,2),J=W[0],q=W[1];Object(i.useEffect)((function(){K()}),[]);var K=function(){var e=Object(c.a)(r.a.mark((function e(){var t,c,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.pathname.split("/")[3],c=b&&{user:p._id},e.next=4,S.a.get("/posts/get/".concat(t),{params:c});case 4:(o=e.sent).data.post?(T(o.data.post),q(o.data.isBookmark),M(o.data.comments),G(ae)):a.push("/404");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(e){q(e)},X=function(e,t,a){var n=V.value!==e?e:null;G({value:n,depth:t,commentId:a})};return s.a.createElement(s.a.Fragment,null,R&&!h&&s.a.createElement(H,{post:R,comments:P.length,isBookmarked:J,onBookmarked:Q,className:"div"}),s.a.createElement(_.a,{className:e.root,title:R&&R.title?R.title:"Post"},s.a.createElement(E.a,null,R&&s.a.createElement(y.a,{mt:3,className:e.box},s.a.createElement(O.a,{container:!0,spacing:3},h&&s.a.createElement(H,{post:R,comments:P.length,isBookmarked:J,onBookmarked:Q}),s.a.createElement(O.a,{item:!0,xs:12,md:10},s.a.createElement(j.a,{variant:"h1",component:"header",color:"textPrimary"},R.title),s.a.createElement(y.a,{className:e.author},s.a.createElement(k.a,{alt:"Person",component:d.a,src:"string"!==typeof R.author&&R.author.avatar,className:e.avatar,to:"#"}),s.a.createElement(j.a,{variant:"caption",color:"textSecondary"},s.a.createElement(x.a,{color:"textSecondary",component:d.a,to:"#",variant:"h6"},"string"!==typeof R.author&&R.author.name)," ",f()(R.createdAt).fromNow())),s.a.createElement(y.a,{mt:2},R.tags.map((function(t){return s.a.createElement(w.a,{key:t.symbol,variant:"outlined",label:t.symbol,className:e.chip})}))))),s.a.createElement(y.a,{mt:3,className:e.content},Object(u.a)(R.content)),s.a.createElement(N.a,null),s.a.createElement(y.a,{mt:3,className:e.disclosure},Object(u.a)(R.disclosure)))),R&&s.a.createElement(E.a,null,s.a.createElement(y.a,{mt:3,className:e.box},s.a.createElement(O.a,{container:!0,spacing:3},s.a.createElement(O.a,{item:!0,xs:12,md:12},P.map((function(e){return s.a.createElement(s.a.Fragment,{key:e._id},s.a.createElement(D,{user:p,comment:e,commentId:e._id,reply:V.value,depth:0,onReply:X}),e.reply.map((function(t){return s.a.createElement(D,{user:p,key:t._id,comment:t,commentId:e._id,reply:V.value,depth:t.depth,onReply:X})})))})),s.a.createElement(y.a,{my:2},s.a.createElement(N.a,null)),s.a.createElement(te,{post:R,reply:V,onFetch:K})))))))}}}]);
//# sourceMappingURL=11.01a33bed.chunk.js.map