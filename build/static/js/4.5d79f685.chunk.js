(this["webpackJsonpdankstocks-client"]=this["webpackJsonpdankstocks-client"]||[]).push([[4],{1210:function(e,a,t){"use strict";var n=t(0),r=t.n(n),c=t(1114),o=t(1118),l=Object(c.a)((function(){return{root:{textAlign:"center"},icon:{display:"flex",height:"inherit",width:"inherit"}}}));a.a=function(e){var a=l();return r.a.createElement(o.a,{classes:{root:a.root},fontSize:"small"},r.a.createElement("img",Object.assign({alt:"Custom Icon",className:a.icon,src:e.src},e)))}},1346:function(e,a,t){"use strict";t.r(a);var n=t(7),r=t.n(n),c=t(11),o=t(23),l=t(0),i=t.n(l),s=t(36),m=t(1114),u=t(1100),p=t(1109),b=t(1095),d=t(82),E=t(83),g=t(360),f=t(45),h=t(359),v=t(21),j=t(3),O=t(14),y=t(1079),x=t(1112),k=t(77),N=t(1110),w=t(1084),S=t(623),C=t(1247),P=t.n(C),A=t(1286),I=t.n(A),z=Object(m.a)((function(e){var a;return{root:{},cover:{position:"relative",height:260,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center","&:before":{position:"absolute",content:'" "',top:0,left:0,height:"100%",width:"100%",backgroundImage:"linear-gradient(-180deg, rgba(0,0,0,0.00) 58%, rgba(0,0,0,0.32) 100%)"},"&:hover":{"& $changeButton":{visibility:"visible"}}},changeButton:(a={visibility:"hidden",position:"absolute",bottom:e.spacing(3),right:e.spacing(3),backgroundColor:O.a.blueGrey[900],color:e.palette.common.white},Object(h.a)(a,e.breakpoints.down("md"),{top:e.spacing(3),bottom:"auto"}),Object(h.a)(a,"&:hover",{backgroundColor:O.a.blueGrey[900]}),a),avatar:Object(h.a)({border:"2px solid ".concat(e.palette.common.white),height:120,width:120,top:-60,left:e.spacing(3),position:"absolute"},e.breakpoints.down("sm"),{height:100,width:100,left:e.spacing(1)}),action:{marginLeft:e.spacing(1)},bioBox:Object(h.a)({marginLeft:"160px"},e.breakpoints.down("sm"),{marginLeft:"120px"})}})),G=function(e){var a=e.className,t=e.profile,n=Object(f.a)(e,["className","profile"]),r=z(),c=Object(s.h)(),m=Object(l.useState)(!1),b=Object(o.a)(m,2),d=b[0],E=b[1];return Object(l.useEffect)((function(){E("/account/profile"!==c.pathname)}),[c.pathname]),i.a.createElement("div",Object.assign({className:Object(j.a)(r.root,a)},n),i.a.createElement("div",{className:r.cover,style:{backgroundImage:"url(".concat(t.cover,")")}},i.a.createElement(y.a,{className:r.changeButton,variant:"contained",startIcon:i.a.createElement(P.a,null)},"Change Cover")),i.a.createElement(u.a,{maxWidth:"lg"},i.a.createElement(p.a,{position:"relative",mt:1,display:"flex",alignItems:"center"},i.a.createElement(x.a,{alt:"Person",className:r.avatar,src:t.avatar}),i.a.createElement(p.a,{className:r.bioBox,mt:1},i.a.createElement(k.a,{variant:"h4",color:"textPrimary"},t.name),i.a.createElement(N.a,{smDown:!0},i.a.createElement(k.a,{variant:"overline",color:"textSecondary"},t.bio))),i.a.createElement(p.a,{flexGrow:1}),!d&&i.a.createElement(i.a.Fragment,null,i.a.createElement(N.a,{smDown:!0},i.a.createElement(y.a,{color:"secondary",component:v.a,size:"small",to:"/account/setting",variant:"contained",className:r.action},"Edit Profile")),i.a.createElement(N.a,{mdUp:!0},i.a.createElement(w.a,{title:"More options"},i.a.createElement(S.a,{className:r.action},i.a.createElement(I.a,{fontSize:"small"})))))),i.a.createElement(N.a,{mdUp:!0},i.a.createElement(p.a,{textAlign:"center"},i.a.createElement(k.a,{variant:"overline",color:"textSecondary"},t.bio)))))},T=t(1101),B=t(4),L=t.n(B),R=t(1331),_=t(1102),F=t(1103),U=t(1078),D=t(1287),J=t.n(D),W=t(1215),H=t.n(W),M=t(1188),$=t(1210),q=Object(m.a)((function(){return{root:{display:"flex",alignItems:"center"},iconRoot:{textAlign:"center"},likedButton:{color:O.a.red[600]},likedIcon:{display:"flex",height:"inherit",width:"inherit"},commentIcon:{color:O.a.grey[500]}}})),K=function(e){var a=e.className,t=e.author,n=e.post,r=Object(f.a)(e,["className","author","post"]),c=q(),s=Object(l.useState)(!1),m=Object(o.a)(s,2),u=m[0],b=m[1],d=Object(l.useState)(n.liked.count),E=Object(o.a)(d,2),g=E[0],h=E[1],v=function(){b(!0),h((function(e){return e+1}))};return i.a.createElement("div",Object.assign({className:Object(j.a)(c.root,a)},r),t&&i.a.createElement(S.a,{onClick:v,disabled:t},i.a.createElement($.a,{src:"/static/icons/trending_outlined.svg"})),!t&&i.a.createElement(i.a.Fragment,null,u?i.a.createElement(w.a,{title:"Unlike"},i.a.createElement(S.a,{className:c.likedButton,onClick:function(){b(!1),h((function(e){return e-1}))}},i.a.createElement($.a,{src:"/static/icons/trending_filled.svg"}))):i.a.createElement(w.a,{title:"Like"},i.a.createElement(S.a,{onClick:v},i.a.createElement($.a,{src:"/static/icons/trending_outlined.svg"})))),i.a.createElement(k.a,{color:"textSecondary",variant:"h6"},g),i.a.createElement(p.a,{ml:2,mr:1,marginTop:"2px"},i.a.createElement(M.a,{className:c.commentIcon,size:"20"})),i.a.createElement(k.a,{color:"textSecondary",variant:"h6"},n.comments.length),i.a.createElement(p.a,{flexGrow:1}),i.a.createElement(S.a,null,i.a.createElement(H.a,{fontSize:"small"})))},Q=Object(m.a)((function(e){return{root:{},date:{marginLeft:6},media:{height:500,backgroundPosition:"top"},title:Object(h.a)({marginLeft:e.spacing(5),marginRight:e.spacing(5)},e.breakpoints.down("sm"),{marginLeft:e.spacing(1),marginRight:e.spacing(1)})}})),V=function(e){var a=e.className,t=e.author,n=e.post,r=Object(f.a)(e,["className","author","post"]),c=Q(),s=Object(l.useState)(null),m=Object(o.a)(s,2),u=m[0],b=m[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement(_.a,Object.assign({className:Object(j.a)(c.root,a)},r),i.a.createElement(F.a,{avatar:i.a.createElement(x.a,{alt:"Person",component:v.a,src:"string"!==typeof n.author&&n.author.avatar,to:"#"}),disableTypography:!0,subheader:i.a.createElement(p.a,{display:"flex",alignItems:"center"},i.a.createElement(J.a,{fontSize:"small"}),i.a.createElement(k.a,{variant:"caption",color:"textSecondary",className:c.date},L()(n.createdAt).fromNow())),title:i.a.createElement(U.a,{color:"textPrimary",component:v.a,to:"#",variant:"h6"},"string"!==typeof n.author&&n.author.name)}),i.a.createElement(p.a,{px:3,pb:1,className:c.title},i.a.createElement(U.a,{color:"textPrimary",component:v.a,to:"/posts/public/"+n.slug,variant:"h3"},n.title)),i.a.createElement(p.a,{mt:2,pb:2,px:3},i.a.createElement(K,{post:n,author:t}))),u&&i.a.createElement(R.a,{large:u,onClose:function(){return b(null)}}))},X=t(1117),Y=t(619),Z=t(620),ee=t(1085),ae=t(1086),te=t(1113),ne=t(1288),re=t.n(ne),ce=t(1289),oe=t.n(ce),le=t(1333),ie=t(56),se={published:0,pending:0,comments:0,tags:0},me=Object(m.a)((function(e){return{root:{},blueAvatar:{backgroundColor:e.palette.secondary.main},redAvatar:{backgroundColor:O.a.red[600]},cardContent:{paddingTop:0}}})),ue=function(e){var a=e.className,t=e.profile,n=Object(f.a)(e,["className","profile"]),m=Object(s.g)(),u=Object(s.h)(),E=me(),g=Object(ie.a)().user,h=Object(l.useState)(se),v=Object(o.a)(h,2),O=v[0],y=v[1],k=Object(l.useState)(!1),N=Object(o.a)(k,2),w=N[0],S=N[1];Object(l.useEffect)((function(){(function(){var e=Object(c.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("/account/profile"!==u.pathname){e.next=6;break}return e.next=3,d.a.get("/account/status");case 3:a=e.sent,e.next=9;break;case 6:return e.next=8,d.a.get(u.pathname+"/status");case 8:a=e.sent;case 9:y(a.data.status);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[u.pathname]),Object(l.useEffect)((function(){var e=g&&g.email!==t.email;S(e)}),[g,t]);return i.a.createElement("div",Object.assign({className:Object(j.a)(E.root,a)},n),i.a.createElement(p.a,{mt:2},i.a.createElement(_.a,null,i.a.createElement(F.a,{title:"Profile Status"}),i.a.createElement(b.a,null),i.a.createElement(X.a,{className:E.cardContent},i.a.createElement(Y.a,null,i.a.createElement(Z.a,{disableGutters:!0,divider:!0},i.a.createElement(ee.a,null,i.a.createElement(x.a,{className:E.blueAvatar},i.a.createElement(re.a,null))),i.a.createElement(ae.a,{primary:"".concat(O.published," posts published"),primaryTypographyProps:{variant:"body2",color:"textSecondary"}}),!w&&i.a.createElement(te.a,{color:"secondary",size:"small",label:"Contribute",onClick:function(){return m.push("/posts/new")}})),i.a.createElement(Z.a,{disableGutters:!0,divider:!0},i.a.createElement(ee.a,null,i.a.createElement(x.a,{className:E.blueAvatar},i.a.createElement(oe.a,null))),i.a.createElement(ae.a,{primary:"".concat(O.pending," posts pended"),primaryTypographyProps:{variant:"body2",color:"textSecondary"}})),i.a.createElement(Z.a,{disableGutters:!0,divider:!0},i.a.createElement(ee.a,null,i.a.createElement(x.a,{className:E.redAvatar},i.a.createElement(M.a,null))),i.a.createElement(ae.a,{primary:"".concat(O.comments," comments written"),primaryTypographyProps:{variant:"body2",color:"textSecondary"}})),i.a.createElement(Z.a,{disableGutters:!0,divider:!0},i.a.createElement(ee.a,null,i.a.createElement(x.a,{className:E.redAvatar},i.a.createElement(le.a,{size:22}))),i.a.createElement(ae.a,{primary:"".concat(O.tags," tag followed"),primaryTypographyProps:{variant:"body2",color:"textSecondary"}})))))))},pe=t(361),be=t.n(pe),de=t(18),Ee=t(200),ge=Object(m.a)((function(e){return{root:{},item:{padding:e.spacing(3),flexGrow:1,"&:first-of-type":{borderRight:"1px solid ".concat(e.palette.divider)}}}})),fe=function(e){var a=e.className,t=Object(f.a)(e,["className"]),n=ge(),s=Object(E.a)(),m=Object(l.useState)([]),u=Object(o.a)(m,2),d=u[0],g=u[1],h=Object(l.useCallback)(Object(c.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,de.a.get("/api/reports/customer-activity");case 3:a=e.sent,s.current&&g(a.data.activities),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[s]);return Object(l.useEffect)((function(){h()}),[h]),i.a.createElement(_.a,Object.assign({className:Object(j.a)(n.root,a)},t),i.a.createElement(F.a,{title:"Recent Comments"}),i.a.createElement(b.a,null),i.a.createElement(Y.a,{disablePadding:!0},d.map((function(e,a){return i.a.createElement(Z.a,{divider:a<d.length-1,key:e.id},i.a.createElement(ee.a,null,i.a.createElement(x.a,{alt:"Customer",component:v.a,src:e.customer.avatar,to:"#"},Object(Ee.a)(e.customer.name))),i.a.createElement(ae.a,{disableTypography:!0,primary:i.a.createElement(U.a,{color:"textPrimary",component:v.a,to:"#",underline:"none",variant:"h6"},e.customer.name),secondary:i.a.createElement(k.a,{variant:"body2",color:"textSecondary"},e.description)}))}))),i.a.createElement(b.a,null),i.a.createElement(p.a,{p:2,display:"flex",justifyContent:"flex-end"},i.a.createElement(y.a,{component:v.a,size:"small",to:"#",endIcon:i.a.createElement(be.a,null)},"See all")))},he=Object(m.a)((function(){return{root:{}}})),ve=function(e){var a=e.className,t=e.profile,n=Object(f.a)(e,["className","profile"]),s=he(),m=Object(E.a)(),u=Object(l.useState)([]),b=Object(o.a)(u,2),g=b[0],h=b[1],v=Object(l.useState)(!1),O=Object(o.a)(v,2),y=O[0],x=O[1],k=Object(l.useState)(0),N=Object(o.a)(k,2),w=N[0],S=N[1],C=Object(l.useCallback)(Object(c.a)(r.a.mark((function e(){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={email:t.email,page:w||0},e.next=4,d.a.post("/posts/all/",a);case 4:n=e.sent,m.current&&(h(n.data.posts),x(n.data.isAuthor),S(n.data.page)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[m,w,t]);return Object(l.useEffect)((function(){C()}),[C]),i.a.createElement("div",Object.assign({className:Object(j.a)(s.root,a)},n),i.a.createElement(T.a,{container:!0,spacing:3},i.a.createElement(T.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(T.a,{container:!0,spacing:3},i.a.createElement(T.a,{item:!0,xs:12,md:12,lg:12},i.a.createElement(ue,{profile:t})),i.a.createElement(T.a,{item:!0,xs:12,md:12,lg:12},i.a.createElement(fe,null)))),i.a.createElement(T.a,{item:!0,xs:12,md:6,lg:8},g.map((function(e){return i.a.createElement(p.a,{mt:2,key:e._id},i.a.createElement(V,{post:e,author:y}))})))))},je=Object(m.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%"}}}));a.default=function(){var e=je(),a=Object(s.g)(),t=Object(s.h)(),n=Object(E.a)(),m=Object(l.useState)(null),f=Object(o.a)(m,2),h=f[0],v=f[1],j=Object(l.useCallback)(Object(c.a)(r.a.mark((function e(){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"/account/profile"!==t.pathname){e.next=7;break}return e.next=4,d.a.get("/account/about");case 4:c=e.sent,e.next=10;break;case 7:return e.next=9,d.a.get(t.pathname+"/about");case 9:c=e.sent;case 10:n.current&&v(c.data.user),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),a.push("/404");case 16:case"end":return e.stop()}}),e,null,[[0,13]])}))),[n,t.pathname,a]);return Object(l.useEffect)((function(){j()}),[j]),h?i.a.createElement(g.a,{className:e.root,title:"Profile"},i.a.createElement(G,{profile:h}),i.a.createElement(u.a,{maxWidth:"lg"},i.a.createElement(p.a,{py:3,pb:6},i.a.createElement(ve,{profile:h})),i.a.createElement(b.a,null))):null}}}]);
//# sourceMappingURL=4.5d79f685.chunk.js.map