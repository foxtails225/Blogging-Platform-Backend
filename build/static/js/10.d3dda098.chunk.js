(this["webpackJsonpdankstocks-client"]=this["webpackJsonpdankstocks-client"]||[]).push([[10],{1369:function(e,t,a){"use strict";a.r(t);var n=a(33),r=a(7),o=a.n(r),c=a(11),l=a(22),i=a(102),s=a(0),u=a.n(s),m=a(38),p=a(13),d=a(2),b=a(8),f=a(1139),g=a(650),y=a(1122),v=a(12),E=a(1115),h=a(646),j=a(79),k=a(165),O=a(1116),x=a(1138),N=a(1140),w=a(1141),S=a(1117),P=a(1126),C=a(1093),q=a(1355),B=a(1356),T=a(1357),z=a(1344),D=a.n(z),R=a(1345),F=a.n(R),L=a(31),I=a(57),M=a(358),A=a(46),G=a(34),W=a(1220),Y=a(1221),_=a(1108),J=a(635),K=a(136),V=a(1123),H=a(643),U=a(1349),Q=a(1324),X=a(1213),Z=a(1354),$=[{name:"bullish",text:"Bullish"},{name:"bearish",text:"Bearish"},{name:"neutral",text:"Neutral"},{name:"no_opinion",text:"No Opinion"}],ee=Object(g.a)((function(e){return{root:{},addTab:{marginLeft:e.spacing(2)},tag:{"& + &":{marginLeft:e.spacing(1)}},datePicker:{"& + &":{marginLeft:e.spacing(2)}},toggleBtn:{marginTop:e.spacing(3),"&.MuiToggleButton-root":{color:e.palette.text.primary},"&.Mui-selected":{backgroundColor:e.palette.secondary.main,color:e.palette.common.white}}}})),te={symbol:"",securityName:"",main:!1},ae=function(e){var t=e.className,a=e.post,r=e.onPost,i=e.onNext,m=Object(G.a)(e,["className","post","onPost","onNext"]),p=ee(),b=Object(s.useState)([]),f=Object(l.a)(b,2),g=f[0],y=f[1],v=Object(s.useState)(""),E=Object(l.a)(v,2),k=E[0],O=E[1],x=Object(s.useState)(te),N=Object(l.a)(x,2),w=N[0],S=N[1];Object(s.useEffect)((function(){""!==k?function(){var e=Object(c.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.get("/stock/search/".concat(k));case 2:(t=e.sent).data&&t.data.length>0&&(a=t.data.map((function(e){return{symbol:e.symbol,securityName:e.securityName,main:!1}})),y(a));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()():y([])}),[k]);var P=function(e,t){var a=t.split(": ");S({symbol:a[0],securityName:a[1],main:!1})};return u.a.createElement(Y.a,{enableReinitialize:!0,initialValues:{title:a.title||"",tags:a.tags||[],picker:a.picker||$[0].name,submit:null},validationSchema:W.c().shape({title:W.e().min(3,"Must be at least 3 characters").max(255).required("Required"),picker:W.e().required("Required"),tags:W.a().required()}),onSubmit:function(){var e=Object(c.a)(o.a.mark((function e(t,a){var n,c,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.setErrors,c=a.setStatus,l=a.setSubmitting;try{r({title:t.title.trim(),tags:t.tags,picker:t.picker}),c({success:!0}),l(!1),i&&i()}catch(o){c({success:!1}),n({submit:o.message}),l(!1)}case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},(function(e){var a=e.errors,r=e.handleBlur,o=e.handleChange,c=e.handleSubmit,l=e.isSubmitting,i=e.setFieldValue,s=e.touched,b=e.values;return u.a.createElement("form",Object.assign({onSubmit:c,className:Object(d.a)(p.root,t),onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()}},m),u.a.createElement(j.a,{variant:"h3",color:"textPrimary"},"Details"),u.a.createElement(h.a,{mt:2},u.a.createElement(j.a,{variant:"subtitle1",color:"textSecondary"},"Do not spam tags. ",u.a.createElement("br",null),"Title should not be spammy. ",u.a.createElement("br",null),"Title and article contents may be subject to grammatical and punctual editing to ensure quality.")),u.a.createElement(h.a,{mt:2},u.a.createElement(_.a,{error:Boolean(s.title&&a.title),fullWidth:!0,helperText:s.title&&a.title,label:"Article Title",name:"title",placeholder:"Please type article title.",value:b.title,onBlur:r,onChange:o,variant:"outlined"}),u.a.createElement(U.a,{value:b.picker,exclusive:!0,size:"small",onChange:function(e,t){i("picker",t)},"aria-label":"text alignment"},$.map((function(e,t){return u.a.createElement(Q.a,{key:e.name+t,value:e.name,className:p.toggleBtn},e.text)}))),u.a.createElement(h.a,{mt:3,display:"flex",alignItems:"center"},u.a.createElement(X.a,{freeSolo:!0,disableClearable:!0,options:g.map((function(e){return e.symbol+": "+e.securityName})),onChange:P,onKeyPress:function(e){if("Enter"===e.key){var t=w;if(""===w.symbol||""===w.securityName)return;0===b.tags.length&&(t.main=!0),i("tags",[].concat(Object(A.a)(b.tags),[t])),S(te),O("")}},value:k,renderInput:function(e){return u.a.createElement(_.a,Object.assign({},e,{fullWidth:!0,name:"tags",label:"Ticker",placeholder:"Please choose at least one tag.",variant:"outlined",InputProps:Object(n.a)({},e.InputProps),style:{width:"47vw"},onChange:function(e){return O(e.target.value)}}))}}),u.a.createElement(J.a,{className:p.addTab,onClick:function(){var e=w;""!==w.symbol&&""!==w.securityName&&(0===b.tags.length&&(e.main=!0),i("tags",[].concat(Object(A.a)(b.tags),[e])),S(te),O(""))}},u.a.createElement(K.a,null,u.a.createElement(Z.a,null)))),u.a.createElement(h.a,{mt:2},b.tags.map((function(e,t){return u.a.createElement(V.a,{variant:e.main?"default":"outlined",key:t,label:e.symbol,className:p.tag,onDelete:function(){b.tags.length>1&&e.main&&(b.tags[1].main=!0);var t=b.tags.filter((function(t){return t.symbol!==e.symbol&&t.securityName!==e.securityName}));i("tags",t)},color:e.main?"secondary":"default"})}))),Boolean(s.tags&&a.tags)&&u.a.createElement(h.a,{mt:2},u.a.createElement(H.a,{error:!0},a.tags))),u.a.createElement(h.a,{mt:6,display:"flex"},u.a.createElement(h.a,{flexGrow:1}),u.a.createElement(C.a,{color:"secondary",disabled:l,type:"submit",variant:"contained",size:"large"},"Next")))}))};ae.defaultProps={onPost:function(){},onNext:function(){}};var ne=ae,re=a(1329),oe=a.n(re),ce=Object(g.a)((function(e){return{root:{"& .ql-toolbar":{borderLeft:"none",borderTop:"none",borderRight:"none",borderBottom:"1px solid ".concat(e.palette.divider),"& .ql-picker-label:hover":{color:e.palette.secondary.main},"& .ql-picker-label.ql-active":{color:e.palette.secondary.main},"& .ql-picker-item:hover":{color:e.palette.secondary.main},"& .ql-picker-item.ql-selected":{color:e.palette.secondary.main},"& button:hover":{color:e.palette.secondary.main,"& .ql-stroke":{stroke:e.palette.secondary.main}},"& button:focus":{color:e.palette.secondary.main,"& .ql-stroke":{stroke:e.palette.secondary.main}},"& button.ql-active":{"& .ql-stroke":{stroke:e.palette.secondary.main}},"& .ql-stroke":{stroke:e.palette.text.primary},"& .ql-picker":{color:e.palette.text.primary},"& .ql-picker-options":{padding:e.spacing(2),backgroundColor:e.palette.background.default,border:"none",boxShadow:e.shadows[10],borderRadius:e.shape.borderRadius}},"& .ql-container":{border:"none","& .ql-editor":{fontFamily:e.typography.fontFamily,fontSize:16,color:e.palette.text.primary,"&.ql-blank::before":{color:e.palette.text.secondary}}}}}})),le=function(e){var t=e.className,a=e.forwardRef,n=Object(G.a)(e,["className","forwardRef"]),r=ce();return console.log(a),u.a.createElement(oe.a,Object.assign({ref:a,className:Object(d.a)(r.root,t)},n))},ie=Object(g.a)((function(e){return{root:{},editorContainer:{marginTop:e.spacing(3)},editor:{"& .ql-editor":{height:400}}}})),se=function(e){var t=e.className,a=e.post,n=e.onPost,r=e.onBack,i=e.onNext,m=Object(G.a)(e,["className","post","onPost","onBack","onNext"]),p=ie(),b=Object(s.useRef)(null),f=Object(s.useState)(a.content||""),g=Object(l.a)(f,2),y=g[0],v=g[1],E=Object(s.useState)(!1),O=Object(l.a)(E,2),x=O[0],N=O[1],w=Object(s.useState)(null),S=Object(l.a)(w,2),P=S[0],q=S[1],B=Object(s.useMemo)((function(){return{toolbar:{container:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["link","image","code-block"],["clean"]],handlers:{image:function(){return D()}}}}}),[]),T=function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{N(!0),n({content:y.trim()}),i&&i()}catch(a){q(a.message)}finally{N(!1)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(c.a)(o.a.mark((function e(t){var a,n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("upload",t),e.next=4,L.a.post("/posts/upload-image",a);case 4:(n=e.sent).data&&b.current&&(r=n.data.url,c=b.current.getEditorSelection(),b.current.getEditor().insertEmbed(c.index,"image",r));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(c.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=document.createElement("input")).setAttribute("type","file"),t.setAttribute("accept","image/*"),t.click(),t.onchange=function(){var e=t.files[0];/^image\//.test(e.type)?z(e):console.warn("You could only upload images.")};case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u.a.createElement("form",Object.assign({onSubmit:T,className:Object(d.a)(p.root,t)},m),u.a.createElement(j.a,{variant:"h3",color:"textPrimary"},"Content"),u.a.createElement(h.a,{mt:2},u.a.createElement(j.a,{variant:"subtitle1",color:"textSecondary"},"Do not advise people to make any financial decisions. ",u.a.createElement("br",null),"Plagiarism is not tolerated.")),u.a.createElement(k.a,{className:p.editorContainer,variant:"outlined"},u.a.createElement(le,{forwardRef:b,onChange:function(e){v(e)},value:y,className:p.editor,modules:B})),P&&u.a.createElement(h.a,{mt:2},u.a.createElement(H.a,{error:!0},H.a)),u.a.createElement(h.a,{mt:6,display:"flex"},r&&u.a.createElement(C.a,{onClick:r,size:"large"},"Previous"),u.a.createElement(h.a,{flexGrow:1}),u.a.createElement(C.a,{color:"secondary",disabled:x,type:"submit",variant:"contained",size:"large"},"Next")))};se.defaultProps={onPost:function(){},onNext:function(){},onBack:function(){}};var ue=se,me=Object(g.a)((function(e){return{root:{},editorContainer:{marginTop:e.spacing(3)},editor:{"& .ql-editor":{height:300},"& .ql-toolbar":{"& .ql-formats > .ql-picker":{display:"none"}}}}})),pe=function(e){var t=e.className,a=e.post,n=e.onPost,r=e.onBack,i=e.onNext,m=Object(G.a)(e,["className","post","onPost","onBack","onNext"]),p=me(),b=Object(s.useState)(a.disclosure||""),f=Object(l.a)(b,2),g=f[0],y=f[1],v=Object(s.useState)(!1),E=Object(l.a)(v,2),O=E[0],x=E[1],N=Object(s.useState)(null),w=Object(l.a)(N,2),S=w[0],P=w[1],q=function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{x(!0),n({disclosure:g.trim()}),i&&i()}catch(a){P(a.message)}finally{x(!1)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement("form",Object.assign({onSubmit:q,className:Object(d.a)(p.root,t)},m),u.a.createElement(j.a,{variant:"h3",color:"textPrimary"},"Disclosure"),u.a.createElement(h.a,{mt:2},u.a.createElement(j.a,{variant:"subtitle1",color:"textSecondary"},"Let the readers know if you hold or do not hold any position in the companies you are talking about. Make sure to also let readers know if you are receiving compensation for the article. You may receive one from us if your article is approved and you may receive tips from readers.")),u.a.createElement(k.a,{className:p.editorContainer,variant:"outlined"},u.a.createElement(le,{onChange:function(e){y(e)},value:g,className:p.editor})),S&&u.a.createElement(h.a,{mt:2},u.a.createElement(H.a,{error:!0},H.a)),u.a.createElement(h.a,{mt:6,display:"flex"},r&&u.a.createElement(C.a,{onClick:r,size:"large"},"Previous"),u.a.createElement(h.a,{flexGrow:1}),u.a.createElement(C.a,{color:"secondary",disabled:O,type:"submit",variant:"contained",size:"large"},"Next")))};pe.defaultProps={onPost:function(){},onNext:function(){},onBack:function(){}};var de=pe,be=a(1263),fe=a(1111),ge=Object(g.a)((function(e){return{root:{},typeOption:{alignItems:"flex-start",display:"flex",marginBottom:e.spacing(2),padding:e.spacing(2)},stepButton:{"& + &":{marginLeft:e.spacing(2)}},chip:{marginLeft:e.spacing(1)},box:Object(i.a)({padding:e.spacing(7)},e.breakpoints.down("sm"),{padding:e.spacing(3)}),content:{fontFamily:e.typography.fontFamily,marginBottom:e.spacing(2)},disclosure:{fontFamily:e.typography.fontFamily,color:v.a.grey[500],fontSize:"0.9rem"}}})),ye=function(e){var t=e.className,a=e.post,n=e.onBack,r=e.onComplete,i=Object(G.a)(e,["className","post","onBack","onComplete"]),m=ge(),p=Object(s.useState)(!1),b=Object(l.a)(p,2),f=b[0],g=b[1],y=Object(s.useState)(null),v=Object(l.a)(y,2),E=v[0],k=v[1],x=function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{g(!0),r&&r()}catch(a){k(a.message)}finally{g(!1)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement("form",Object.assign({onSubmit:x,className:Object(d.a)(m.root,t)},i),u.a.createElement(j.a,{variant:"h3",color:"textPrimary"},"Review"),u.a.createElement(h.a,{mt:2},u.a.createElement(j.a,{variant:"subtitle1",color:"textSecondary"},"Make sure everything looks good.")),u.a.createElement(h.a,{mt:3,border:1,className:m.box},u.a.createElement(O.a,{container:!0,spacing:3},u.a.createElement(O.a,{item:!0,xs:12,md:10},u.a.createElement(j.a,{variant:"h3",color:"textPrimary"},a.title),u.a.createElement(h.a,{mt:3},u.a.createElement(h.a,{mt:1},a.tags.map((function(e){return u.a.createElement(V.a,{key:e.symbol,variant:e.main?"default":"outlined",label:e.symbol,className:m.chip,color:e.main?"primary":"default"})})))))),u.a.createElement(h.a,{mt:3,className:m.content},Object(be.a)(a.content)),u.a.createElement(fe.a,null),u.a.createElement(h.a,{mt:3,className:m.disclosure},Object(be.a)(a.disclosure))),E&&u.a.createElement(h.a,{mt:2},u.a.createElement(H.a,{error:!0},E)),u.a.createElement(h.a,{mt:6,display:"flex"},n&&u.a.createElement(C.a,{onClick:n,size:"large"},"Previous"),u.a.createElement(h.a,{flexGrow:1}),u.a.createElement(C.a,{color:"secondary",disabled:f,type:"submit",variant:"contained",size:"large"},"Complete")))};ye.defaultProps={onComplete:function(){},onBack:function(){}};var ve=ye,Ee=a(608),he=[{label:"Details",icon:q.a},{label:"Content",icon:B.a},{label:"Disclosure",icon:D.a},{label:"Review",icon:F.a}],je={slug:"",title:"",content:"",disclosure:"",tags:[]},ke=Object(b.a)((function(e){return{vertical:{marginLeft:19,padding:0},line:{borderColor:e.palette.divider}}}))(f.a),Oe=Object(g.a)((function(e){return{root:{},active:{backgroundColor:e.palette.secondary.main,boxShadow:e.shadows[10],color:e.palette.secondary.contrastText},completed:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText}}})),xe=function(e){var t,a=e.active,n=e.completed,r=e.icon,o=Oe(),c=he[r-1].icon;return u.a.createElement(y.a,{className:Object(d.a)(o.root,(t={},Object(i.a)(t,o.active,a),Object(i.a)(t,o.completed,n),t))},u.a.createElement(c,{size:"20"}))},Ne=Object(g.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingTop:e.spacing(3),paddingBottom:e.spacing(3)},avatar:{backgroundColor:v.a.red[600]},stepper:{backgroundColor:"transparent"}}}));t.default=function(){var e=Ne(),t=Object(I.a)().user,a=Object(m.h)(),r=Object(s.useState)(!1),i=Object(l.a)(r,2),d=i[0],b=i[1],f=Object(s.useState)(0),g=Object(l.a)(f,2),v=g[0],q=g[1],B=Object(s.useState)(!1),z=Object(l.a)(B,2),D=z[0],R=z[1],F=Object(s.useState)(je),A=Object(l.a)(F,2),G=A[0],W=A[1];Object(s.useEffect)((function(){var e=function(){var e=Object(c.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.post("/stripe/create",{returnUrl:"/posts/new"});case 2:t=e.sent,window.location.replace(t.data.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();!t.stripeId&&e()}),[t]),Object(s.useEffect)((function(){var e=a.pathname.split("/"),n=function(){var a=Object(c.a)(o.a.mark((function a(){var n;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,L.a.get("/posts/get/".concat(e[3]),{params:{user:t._id}});case 2:(n=a.sent).data&&W(n.data.post);case 4:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();"edit"===e[2]&&(n(),b(!0))}),[a.pathname,t._id]);var Y=function(){q((function(e){return e+1}))},_=function(){q((function(e){return e-1}))},J=function(){var e=Object(c.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=/[^\w\s]/gi,a=G.title.replace(t,"").replace("/","-").split(" ").join("-").trim().toLowerCase(),!d){e.next=7;break}return e.next=5,L.a.put("/posts/update",Object(n.a)(Object(n.a)({},G),{},{slug:a}));case 5:e.next=9;break;case 7:return e.next=9,L.a.post("/posts/new",Object(n.a)(Object(n.a)({},G),{},{slug:a}));case 9:R(!0);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(e){W((function(t){return Object(n.a)(Object(n.a)({},t),e)}))};return u.a.createElement(u.a.Fragment,null,t.stripeId?u.a.createElement(M.a,{className:e.root,title:"Project Create"},u.a.createElement(E.a,{maxWidth:"lg"},u.a.createElement(h.a,{mb:3},u.a.createElement(j.a,{variant:"h3",color:"textPrimary"},"Post New Article")),D?u.a.createElement(S.a,null,u.a.createElement(P.a,null,u.a.createElement(h.a,{maxWidth:450,mx:"auto"},u.a.createElement(h.a,{display:"flex",justifyContent:"center"},u.a.createElement(y.a,{className:e.avatar},u.a.createElement(T.a,null))),u.a.createElement(h.a,{mt:2},u.a.createElement(j.a,{variant:"h3",color:"textPrimary",align:"center"},"You are all done!")),u.a.createElement(h.a,{mt:2},u.a.createElement(j.a,{variant:"subtitle1",color:"textSecondary",align:"center"},"Thank you for submitting your contribution to us. Your article is now in review and we will come back to you with our final decision.")),u.a.createElement(h.a,{mt:2,display:"flex",justifyContent:"center"},u.a.createElement(C.a,{variant:"contained",color:"secondary",component:p.a,to:"/account/profile"},"Back to Profile"))))):u.a.createElement(k.a,null,u.a.createElement(O.a,{container:!0},u.a.createElement(O.a,{item:!0,xs:12,md:3},u.a.createElement(x.a,{activeStep:v,className:e.stepper,connector:u.a.createElement(ke,null),orientation:"vertical"},he.map((function(e){return u.a.createElement(N.a,{key:e.label},u.a.createElement(w.a,{StepIconComponent:xe},e.label))})))),u.a.createElement(O.a,{item:!0,xs:12,md:9},u.a.createElement(h.a,{p:3},0===v&&u.a.createElement(ne,{post:G,onPost:K,onNext:Y}),1===v&&u.a.createElement(ue,{post:G,onPost:K,onBack:_,onNext:Y}),2===v&&u.a.createElement(de,{post:G,onPost:K,onBack:_,onNext:Y}),3===v&&u.a.createElement(ve,{post:G,onBack:_,onComplete:J}))))))):u.a.createElement(Ee.a,null))}}}]);
//# sourceMappingURL=10.d3dda098.chunk.js.map