(this["webpackJsonpdankstocks-client"]=this["webpackJsonpdankstocks-client"]||[]).push([[22],{1355:function(e,t,a){"use strict";a.r(t);var n=a(33),r=a(7),o=a.n(r),c=a(11),l=a(23),i=a(359),s=a(0),m=a.n(s),u=a(21),p=a(3),d=a(8),b=a(1129),f=a(640),y=a(1115),g=a(14),E=a(1104),v=a(636),h=a(77),j=a(161),O=a(1105),k=a(1128),x=a(1130),N=a(1131),w=a(1106),P=a(1119),S=a(1083),C=a(1345),q=a(1346),B=a(1347),T=a(1337),D=a.n(T),z=a(1338),L=a.n(z),F=a(82),I=a(56),R=a(360),G=a(43),W=a(45),A=a(1227),M=a(1228),Y=a(1096),J=a(626),K=a(135),V=a(1116),H=a(634),U=a(1202),Q=a(1344),X=Object(f.a)((function(e){return{root:{},addTab:{marginLeft:e.spacing(2)},tag:{"& + &":{marginLeft:e.spacing(1)}},datePicker:{"& + &":{marginLeft:e.spacing(2)}}}})),Z={symbol:"",securityName:""},$=function(e){var t=e.className,a=e.post,r=e.onPost,i=e.onNext,u=Object(W.a)(e,["className","post","onPost","onNext"]),d=X(),b=Object(s.useState)([]),f=Object(l.a)(b,2),y=f[0],g=f[1],E=Object(s.useState)(""),j=Object(l.a)(E,2),O=j[0],k=j[1],x=Object(s.useState)(Z),N=Object(l.a)(x,2),w=N[0],P=N[1];Object(s.useEffect)((function(){""!==O?function(){var e=Object(c.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.get("/stock/search/".concat(O));case 2:(t=e.sent).data&&t.data.length>0&&(a=t.data.map((function(e){return{symbol:e.symbol,securityName:e.securityName}})),g(a));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()():g([])}),[O]);var C=function(e,t){var a=t.split(": ");P({symbol:a[0],securityName:a[1]})};return m.a.createElement(M.a,{initialValues:{title:a.title||"",tags:a.tags||[],submit:null},validationSchema:A.d().shape({title:A.f().min(3,"Must be at least 3 characters").max(255).required("Required"),tags:A.a().required()}),onSubmit:function(){var e=Object(c.a)(o.a.mark((function e(t,a){var n,c,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.setErrors,c=a.setStatus,l=a.setSubmitting;try{console.log(t.tags),r({title:t.title.trim(),tags:t.tags}),c({success:!0}),l(!1),i&&i()}catch(o){c({success:!1}),n({submit:o.message}),l(!1)}case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},(function(e){var a=e.errors,r=e.handleBlur,o=e.handleChange,c=e.handleSubmit,l=e.isSubmitting,i=e.setFieldValue,s=e.touched,b=e.values;return m.a.createElement("form",Object.assign({onSubmit:c,className:Object(p.a)(d.root,t),onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()}},u),m.a.createElement(h.a,{variant:"h3",color:"textPrimary"},"Details"),m.a.createElement(v.a,{mt:2},m.a.createElement(h.a,{variant:"subtitle1",color:"textSecondary"},"Do not spam tags. ",m.a.createElement("br",null),"Title should not be spammy. ",m.a.createElement("br",null),"Title and article contents may be subject to grammatical and punctual editing to ensure quality.")),m.a.createElement(v.a,{mt:2},m.a.createElement(Y.a,{error:Boolean(s.title&&a.title),fullWidth:!0,helperText:s.title&&a.title,label:"Article Title",name:"title",placeholder:"Please type article title.",value:b.title,onBlur:r,onChange:o,variant:"outlined"}),m.a.createElement(v.a,{mt:3,display:"flex",alignItems:"center"},m.a.createElement(U.a,{freeSolo:!0,disableClearable:!0,options:y.map((function(e){return e.symbol+": "+e.securityName})),onChange:C,onKeyPress:function(e){if("Enter"===e.key){if(""===w.symbol||""===w.securityName)return;i("tags",[].concat(Object(G.a)(b.tags),[w])),P(Z),k("")}},value:O,renderInput:function(e){return m.a.createElement(Y.a,Object.assign({},e,{fullWidth:!0,name:"tags",label:"Article Tags",placeholder:"Please choose at least one tag.",variant:"outlined",InputProps:Object(n.a)({},e.InputProps),style:{width:"52vw"},onChange:function(e){return k(e.target.value)}}))}}),m.a.createElement(J.a,{className:d.addTab,onClick:function(){""!==w.symbol&&""!==w.securityName&&(i("tags",[].concat(Object(G.a)(b.tags),[w])),P(Z),k(""))}},m.a.createElement(K.a,null,m.a.createElement(Q.a,null)))),m.a.createElement(v.a,{mt:2},b.tags.map((function(e,t){return m.a.createElement(V.a,{variant:"outlined",key:t,label:e.symbol,className:d.tag,onDelete:function(){var t=b.tags.filter((function(t){return t.symbol!==e.symbol&&t.securityName!==e.securityName}));i("tags",t)}})}))),Boolean(s.tags&&a.tags)&&m.a.createElement(v.a,{mt:2},m.a.createElement(H.a,{error:!0},a.tags))),m.a.createElement(v.a,{mt:6,display:"flex"},m.a.createElement(v.a,{flexGrow:1}),m.a.createElement(S.a,{color:"secondary",disabled:l,type:"submit",variant:"contained",size:"large"},"Next")))}))};$.defaultProps={onPost:function(){},onNext:function(){}};var _=$,ee=a(1322),te=a.n(ee),ae=Object(f.a)((function(e){return{root:{"& .ql-toolbar":{borderLeft:"none",borderTop:"none",borderRight:"none",borderBottom:"1px solid ".concat(e.palette.divider),"& .ql-picker-label:hover":{color:e.palette.secondary.main},"& .ql-picker-label.ql-active":{color:e.palette.secondary.main},"& .ql-picker-item:hover":{color:e.palette.secondary.main},"& .ql-picker-item.ql-selected":{color:e.palette.secondary.main},"& button:hover":{color:e.palette.secondary.main,"& .ql-stroke":{stroke:e.palette.secondary.main}},"& button:focus":{color:e.palette.secondary.main,"& .ql-stroke":{stroke:e.palette.secondary.main}},"& button.ql-active":{"& .ql-stroke":{stroke:e.palette.secondary.main}},"& .ql-stroke":{stroke:e.palette.text.primary},"& .ql-picker":{color:e.palette.text.primary},"& .ql-picker-options":{padding:e.spacing(2),backgroundColor:e.palette.background.default,border:"none",boxShadow:e.shadows[10],borderRadius:e.shape.borderRadius}},"& .ql-container":{border:"none","& .ql-editor":{fontFamily:e.typography.fontFamily,fontSize:16,color:e.palette.text.primary,"&.ql-blank::before":{color:e.palette.text.secondary}}}}}})),ne=function(e){var t=e.className,a=Object(W.a)(e,["className"]),n=ae();return m.a.createElement(te.a,Object.assign({className:Object(p.a)(n.root,t)},a))},re=Object(f.a)((function(e){return{root:{},editorContainer:{marginTop:e.spacing(3)},editor:{"& .ql-editor":{height:400}}}})),oe=function(e){var t=e.className,a=e.post,n=e.onPost,r=e.onBack,i=e.onNext,u=Object(W.a)(e,["className","post","onPost","onBack","onNext"]),d=re(),b=Object(s.useState)(a.content||""),f=Object(l.a)(b,2),y=f[0],g=f[1],E=Object(s.useState)(!1),O=Object(l.a)(E,2),k=O[0],x=O[1],N=Object(s.useState)(null),w=Object(l.a)(N,2),P=w[0],C=w[1],q=function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{x(!0),n({content:y.trim()}),i&&i()}catch(a){C(a.message)}finally{x(!1)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return m.a.createElement("form",Object.assign({onSubmit:q,className:Object(p.a)(d.root,t)},u),m.a.createElement(h.a,{variant:"h3",color:"textPrimary"},"Content"),m.a.createElement(v.a,{mt:2},m.a.createElement(h.a,{variant:"subtitle1",color:"textSecondary"},"Do not advise people to make any financial decisions. ",m.a.createElement("br",null),"Plagiarism is not tolerated.")),m.a.createElement(j.a,{className:d.editorContainer,variant:"outlined"},m.a.createElement(ne,{onChange:function(e){g(e)},value:y,className:d.editor})),P&&m.a.createElement(v.a,{mt:2},m.a.createElement(H.a,{error:!0},H.a)),m.a.createElement(v.a,{mt:6,display:"flex"},r&&m.a.createElement(S.a,{onClick:r,size:"large"},"Previous"),m.a.createElement(v.a,{flexGrow:1}),m.a.createElement(S.a,{color:"secondary",disabled:k,type:"submit",variant:"contained",size:"large"},"Next")))};oe.defaultProps={onPost:function(){},onNext:function(){},onBack:function(){}};var ce=oe,le=Object(f.a)((function(e){return{root:{},editorContainer:{marginTop:e.spacing(3)},editor:{"& .ql-editor":{height:300},"& .ql-toolbar":{"& .ql-formats > .ql-picker":{display:"none"}}}}})),ie=function(e){var t=e.className,a=e.post,n=e.onPost,r=e.onBack,i=e.onNext,u=Object(W.a)(e,["className","post","onPost","onBack","onNext"]),d=le(),b=Object(s.useState)(a.disclosure||""),f=Object(l.a)(b,2),y=f[0],g=f[1],E=Object(s.useState)(!1),O=Object(l.a)(E,2),k=O[0],x=O[1],N=Object(s.useState)(null),w=Object(l.a)(N,2),P=w[0],C=w[1],q=function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{x(!0),n({disclosure:y.trim()}),i&&i()}catch(a){C(a.message)}finally{x(!1)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return m.a.createElement("form",Object.assign({onSubmit:q,className:Object(p.a)(d.root,t)},u),m.a.createElement(h.a,{variant:"h3",color:"textPrimary"},"Disclosure"),m.a.createElement(v.a,{mt:2},m.a.createElement(h.a,{variant:"subtitle1",color:"textSecondary"},"Let the readers know if you hold or do not hold any position in the companies you are talking about. Make sure to also let readers know if you are receiving compensation for the article. You may receive one from us if your article is approved and you may receive tips from readers.")),m.a.createElement(j.a,{className:d.editorContainer,variant:"outlined"},m.a.createElement(ne,{onChange:function(e){g(e)},value:y,className:d.editor})),P&&m.a.createElement(v.a,{mt:2},m.a.createElement(H.a,{error:!0},H.a)),m.a.createElement(v.a,{mt:6,display:"flex"},r&&m.a.createElement(S.a,{onClick:r,size:"large"},"Previous"),m.a.createElement(v.a,{flexGrow:1}),m.a.createElement(S.a,{color:"secondary",disabled:k,type:"submit",variant:"contained",size:"large"},"Next")))};ie.defaultProps={onPost:function(){},onNext:function(){},onBack:function(){}};var se=ie,me=a(1272),ue=a(1099),pe=Object(f.a)((function(e){return{root:{},typeOption:{alignItems:"flex-start",display:"flex",marginBottom:e.spacing(2),padding:e.spacing(2)},stepButton:{"& + &":{marginLeft:e.spacing(2)}},chip:{marginLeft:e.spacing(1)},box:Object(i.a)({padding:e.spacing(7)},e.breakpoints.down("sm"),{padding:e.spacing(3)}),content:{fontFamily:e.typography.fontFamily,marginBottom:e.spacing(2)},disclosure:{fontFamily:e.typography.fontFamily,color:g.a.grey[500],fontSize:"0.9rem"}}})),de=function(e){var t=e.className,a=e.post,n=e.onBack,r=e.onComplete,i=Object(W.a)(e,["className","post","onBack","onComplete"]),u=pe(),d=Object(s.useState)(!1),b=Object(l.a)(d,2),f=b[0],y=b[1],g=Object(s.useState)(null),E=Object(l.a)(g,2),j=E[0],k=E[1],x=function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{y(!0),r&&r()}catch(a){k(a.message)}finally{y(!1)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return m.a.createElement("form",Object.assign({onSubmit:x,className:Object(p.a)(u.root,t)},i),m.a.createElement(h.a,{variant:"h3",color:"textPrimary"},"Review"),m.a.createElement(v.a,{mt:2},m.a.createElement(h.a,{variant:"subtitle1",color:"textSecondary"},"Make sure everything looks good.")),m.a.createElement(v.a,{mt:3,border:1,className:u.box},m.a.createElement(O.a,{container:!0,spacing:3},m.a.createElement(O.a,{item:!0,xs:12,md:10},m.a.createElement(h.a,{variant:"h3",color:"textPrimary"},a.title),m.a.createElement(v.a,{mt:3},m.a.createElement(v.a,{mt:1},a.tags.map((function(e){return m.a.createElement(V.a,{key:e.symbol,variant:"outlined",label:e.symbol,className:u.chip})})))))),m.a.createElement(v.a,{mt:3,className:u.content},Object(me.a)(a.content)),m.a.createElement(ue.a,null),m.a.createElement(v.a,{mt:3,className:u.disclosure},Object(me.a)(a.disclosure))),j&&m.a.createElement(v.a,{mt:2},m.a.createElement(H.a,{error:!0},j)),m.a.createElement(v.a,{mt:6,display:"flex"},n&&m.a.createElement(S.a,{onClick:n,size:"large"},"Previous"),m.a.createElement(v.a,{flexGrow:1}),m.a.createElement(S.a,{color:"secondary",disabled:f,type:"submit",variant:"contained",size:"large"},"Complete")))};de.defaultProps={onComplete:function(){},onBack:function(){}};var be=de,fe=a(599),ye=[{label:"Details",icon:C.a},{label:"Content",icon:q.a},{label:"Disclosure",icon:D.a},{label:"Review",icon:L.a}],ge={slug:"",title:"",content:"",disclosure:"",tags:[]},Ee=Object(d.a)((function(e){return{vertical:{marginLeft:19,padding:0},line:{borderColor:e.palette.divider}}}))(b.a),ve=Object(f.a)((function(e){return{root:{},active:{backgroundColor:e.palette.secondary.main,boxShadow:e.shadows[10],color:e.palette.secondary.contrastText},completed:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText}}})),he=function(e){var t,a=e.active,n=e.completed,r=e.icon,o=ve(),c=ye[r-1].icon;return m.a.createElement(y.a,{className:Object(p.a)(o.root,(t={},Object(i.a)(t,o.active,a),Object(i.a)(t,o.completed,n),t))},m.a.createElement(c,{size:"20"}))},je=Object(f.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingTop:e.spacing(3),paddingBottom:e.spacing(3)},avatar:{backgroundColor:g.a.red[600]},stepper:{backgroundColor:"transparent"}}}));t.default=function(){var e=je(),t=Object(I.a)().user,a=Object(s.useState)(0),r=Object(l.a)(a,2),i=r[0],p=r[1],d=Object(s.useState)(!1),b=Object(l.a)(d,2),f=b[0],g=b[1],C=Object(s.useState)(ge),q=Object(l.a)(C,2),T=q[0],D=q[1];Object(s.useEffect)((function(){var e=function(){var e=Object(c.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.post("/stripe/create",{returnUrl:"/posts/new"});case 2:t=e.sent,window.location.replace(t.data.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();!t.stripeId&&e()}),[t]);var z=function(){p((function(e){return e+1}))},L=function(){p((function(e){return e-1}))},G=function(){var e=Object(c.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=/[^\w\s]/gi,a=T.title.replace(t,"").replace("/","-").split(" ").join("-").trim().toLowerCase(),e.next=4,F.a.post("/posts/new",Object(n.a)(Object(n.a)({},T),{},{slug:a}));case 4:g(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(e){D((function(t){return Object(n.a)(Object(n.a)({},t),e)}))};return m.a.createElement(m.a.Fragment,null,t.stripeId?m.a.createElement(R.a,{className:e.root,title:"Project Create"},m.a.createElement(E.a,{maxWidth:"lg"},m.a.createElement(v.a,{mb:3},m.a.createElement(h.a,{variant:"h3",color:"textPrimary"},"Post New Article")),f?m.a.createElement(w.a,null,m.a.createElement(P.a,null,m.a.createElement(v.a,{maxWidth:450,mx:"auto"},m.a.createElement(v.a,{display:"flex",justifyContent:"center"},m.a.createElement(y.a,{className:e.avatar},m.a.createElement(B.a,null))),m.a.createElement(v.a,{mt:2},m.a.createElement(h.a,{variant:"h3",color:"textPrimary",align:"center"},"You are all done!")),m.a.createElement(v.a,{mt:2},m.a.createElement(h.a,{variant:"subtitle1",color:"textSecondary",align:"center"},"Thank you for submitting your contribution to us. Your article is now in review and we will come back to you with our final decision.")),m.a.createElement(v.a,{mt:2,display:"flex",justifyContent:"center"},m.a.createElement(S.a,{variant:"contained",color:"secondary",component:u.a,to:"/account/profile"},"Back to Profile"))))):m.a.createElement(j.a,null,m.a.createElement(O.a,{container:!0},m.a.createElement(O.a,{item:!0,xs:12,md:3},m.a.createElement(k.a,{activeStep:i,className:e.stepper,connector:m.a.createElement(Ee,null),orientation:"vertical"},ye.map((function(e){return m.a.createElement(x.a,{key:e.label},m.a.createElement(N.a,{StepIconComponent:he},e.label))})))),m.a.createElement(O.a,{item:!0,xs:12,md:9},m.a.createElement(v.a,{p:3},0===i&&m.a.createElement(_,{post:T,onPost:W,onNext:z}),1===i&&m.a.createElement(ce,{post:T,onPost:W,onBack:L,onNext:z}),2===i&&m.a.createElement(se,{post:T,onPost:W,onBack:L,onNext:z}),3===i&&m.a.createElement(be,{post:T,onBack:L,onComplete:G}))))))):m.a.createElement(fe.a,null))}}}]);
//# sourceMappingURL=22.fd2866b3.chunk.js.map