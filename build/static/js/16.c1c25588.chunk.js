(this["webpackJsonpdankstocks-client"]=this["webpackJsonpdankstocks-client"]||[]).push([[16],{1138:function(e,t,a){"use strict";var n=a(1),r=a(5),c=a(0),o=(a(3),a(2)),l=a(8),s=a(78),i=c.forwardRef((function(e,t){var a=e.children,l=e.classes,i=e.className,u=e.disableTypography,m=void 0!==u&&u,d=Object(r.a)(e,["children","classes","className","disableTypography"]);return c.createElement("div",Object(n.a)({className:Object(o.a)(l.root,i),ref:t},d),m?a:c.createElement(s.a,{component:"h2",variant:"h6"},a))}));t.a=Object(l.a)({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(i)},1145:function(e,t,a){"use strict";var n=a(1),r=a(48),c=a(5),o=a(0),l=(a(3),a(1146)),s=a(17),i=a(112),u=a(1287),m=a(207),d=o.forwardRef((function(e,t){var a=e.actions,d=e.children,p=e.name,f=e.value,b=e.onChange,v=Object(c.a)(e,["actions","children","name","value","onChange"]),h=o.useRef(null),g=Object(i.a)({controlled:f,default:e.defaultValue,name:"RadioGroup"}),E=Object(r.a)(g,2),O=E[0],j=E[1];o.useImperativeHandle(a,(function(){return{focus:function(){var e=h.current.querySelector("input:not(:disabled):checked");e||(e=h.current.querySelector("input:not(:disabled)")),e&&e.focus()}}}),[]);var k=Object(s.a)(t,h),y=Object(m.a)(p);return o.createElement(u.a.Provider,{value:{name:y,onChange:function(e){j(e.target.value),b&&b(e,e.target.value)},value:O}},o.createElement(l.a,Object(n.a)({role:"radiogroup",ref:k},v),d))}));t.a=d},1146:function(e,t,a){"use strict";var n=a(1),r=a(5),c=a(0),o=(a(3),a(2)),l=a(8),s=c.forwardRef((function(e,t){var a=e.classes,l=e.className,s=e.row,i=void 0!==s&&s,u=Object(r.a)(e,["classes","className","row"]);return c.createElement("div",Object(n.a)({className:Object(o.a)(a.root,l,i&&a.row),ref:t},u))}));t.a=Object(l.a)({root:{display:"flex",flexDirection:"column",flexWrap:"wrap"},row:{flexDirection:"row"}},{name:"MuiFormGroup"})(s)},1154:function(e,t,a){"use strict";var n=a(1),r=a(5),c=a(0),o=(a(3),a(2)),l=a(375),s=a(100),i=Object(s.a)(c.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),u=Object(s.a)(c.createElement("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),m=a(8);var d=Object(m.a)((function(e){return{root:{position:"relative",display:"flex","&$checked $layer":{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}},layer:{left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest})},checked:{}}}),{name:"PrivateRadioButtonIcon"})((function(e){var t=e.checked,a=e.classes,n=e.fontSize;return c.createElement("div",{className:Object(o.a)(a.root,t&&a.checked)},c.createElement(i,{fontSize:n}),c.createElement(u,{fontSize:n,className:a.layer}))})),p=a(18),f=a(10),b=a(69),v=a(1287);var h=c.createElement(d,{checked:!0}),g=c.createElement(d,null),E=c.forwardRef((function(e,t){var a=e.checked,s=e.classes,i=e.color,u=void 0===i?"secondary":i,m=e.name,d=e.onChange,p=e.size,E=void 0===p?"medium":p,O=Object(r.a)(e,["checked","classes","color","name","onChange","size"]),j=c.useContext(v.a),k=a,y=Object(b.a)(d,j&&j.onChange),x=m;return j&&("undefined"===typeof k&&(k=j.value===e.value),"undefined"===typeof x&&(x=j.name)),c.createElement(l.a,Object(n.a)({color:u,type:"radio",icon:c.cloneElement(g,{fontSize:"small"===E?"small":"default"}),checkedIcon:c.cloneElement(h,{fontSize:"small"===E?"small":"default"}),classes:{root:Object(o.a)(s.root,s["color".concat(Object(f.a)(u))]),checked:s.checked,disabled:s.disabled},name:x,checked:k,onChange:y,ref:t},O))}));t.a=Object(m.a)((function(e){return{root:{color:e.palette.text.secondary},checked:{},disabled:{},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(p.c)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(p.c)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}}}}),{name:"MuiRadio"})(E)},1222:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(649),o=a(1130),l=Object(c.a)((function(){return{root:{textAlign:"center"},icon:{display:"flex",height:"inherit",width:"inherit"}}}));t.a=function(e){var t=l();return r.a.createElement(o.a,{classes:{root:t.root},fontSize:"small"},r.a.createElement("img",Object.assign({alt:"Custom Icon",className:t.icon,src:e.src},e)))}},1244:function(e,t,a){"use strict";var n=a(96),r=a(97);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(a(0)),o=(0,n(a(98)).default)(c.createElement("path",{d:"M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2zm0 15l-5-2.18L7 18V5h10v13z"}),"BookmarkBorderOutlined");t.default=o},1260:function(e,t,a){"use strict";var n=a(96),r=a(97);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(a(0)),o=(0,n(a(98)).default)(c.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline");t.default=o},1268:function(e,t,a){"use strict";var n=a(7),r=a.n(n),c=a(12),o=a(23),l=a(33),s=a(0),i=a.n(s),u=a(2),m=a(1243),d=a(649),p=a(1133),f=a(1134),b=a(1136),v=a(1137),h=a(35),g=a(22),E=a(11),O=a(1131),j=a(645),k=a(1132),y=a(1092),x=a(57),w={style:{base:{color:E.a.grey[500],fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:E.a.grey[500]}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}},N=Object(d.a)((function(e){return{root:{}}})),C=function(e){var t=e.className,a=(e.open,e.author),n=e.secret,o=e.amount,s=e.onOpen,d=e.onBack,p=e.onSuccess,f=Object(l.a)(e,["className","open","author","secret","amount","onOpen","onBack","onSuccess"]),b=Object(x.a)().user,v=Object(m.useStripe)(),g=Object(m.useElements)(),E=N(),C=function(){var e=Object(c.a)(r.a.mark((function e(t){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),v&&g){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,v.confirmCardPayment(n,{payment_method:{card:g.getElement(m.CardElement),billing_details:{email:a.email}}});case 5:if(!(c=e.sent).error){e.next=10;break}console.log(c.error.message),e.next=16;break;case 10:if("succeeded"!==c.paymentIntent.status){e.next=16;break}return e.next=13,h.a.post("/notifications/create",{user:a._id,type:"tips_success",title:"New payment received",description:"You got the new tips. You received $".concat(o," from ").concat(b.name),isRead:!1,url:"#"});case 13:return e.next=15,h.a.post("/transactions/create",{user:a._id,client:b._id,amount:5*o/4,fee:o/4,type:"tips"});case 15:p();case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement("div",Object.assign({className:Object(u.a)(E.root,t)},f),i.a.createElement("form",{onSubmit:C},i.a.createElement(O.a,null,i.a.createElement(j.a,{border:1,padding:2,borderRadius:5},i.a.createElement(m.CardElement,{options:w}))),i.a.createElement(k.a,null,i.a.createElement(y.a,{onClick:function(){return s()},color:"primary"},"Cancel"),i.a.createElement(y.a,{onClick:function(){return d()},color:"primary"},"Back"),i.a.createElement(y.a,{disabled:!v,type:"submit",color:"primary"},"Confirm"))))},S=a(1115),_=a(1107),z=a(1108),B=Object(d.a)((function(e){return{root:{}}})),I=function(e){var t=e.className,a=e.author,n=(e.open,e.onOpen),m=e.onNext,d=Object(l.a)(e,["className","author","open","onOpen","onNext"]),p=B(),f=Object(s.useState)(),b=Object(o.a)(f,2),v=b[0],g=b[1],E=function(){var e=Object(c.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={stripeId:a.stripeId,amount:v},e.next=3,h.a.post("/stripe/secret",t);case 3:(n=e.sent).data&&m(n.data.secret,4*v/5);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return i.a.createElement("div",Object.assign({className:Object(u.a)(p.root,t)},d),i.a.createElement(O.a,null,i.a.createElement(S.a,{container:!0,justify:"center"},i.a.createElement(S.a,{item:!0,md:5},i.a.createElement(_.a,{label:"Name",defaultValue:a.name,InputProps:{readOnly:!0}})),i.a.createElement(S.a,{item:!0,md:5},i.a.createElement(_.a,{label:"Amount",type:"number",placeholder:"Must be larger than 3",value:v,onChange:function(e){return g(e.target.value)},error:v<3,InputProps:{inputProps:{min:3},startAdornment:i.a.createElement(z.a,{position:"start"},"$")}})))),i.a.createElement(k.a,null,i.a.createElement(y.a,{onClick:function(){return n()},color:"primary"},"Cancel"),i.a.createElement(y.a,{onClick:E,disabled:v<3||!v,color:"primary"},"Confirm")))},R=Object(d.a)((function(e){return{root:{},backButton:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}}));t.a=function(e){var t=e.className,a=e.postId,n=e.open,d=e.onOpen,E=e.onSuccess,O=Object(l.a)(e,["className","postId","open","onOpen","onSuccess"]),j=R(),k=Object(s.useState)(0),y=Object(o.a)(k,2),x=y[0],w=y[1],N=Object(s.useState)(),S=Object(o.a)(N,2),_=S[0],z=S[1],B=Object(s.useState)(0),M=Object(o.a)(B,2),L=M[0],P=M[1],T=Object(s.useState)(),F=Object(o.a)(T,2),H=F[0],V=F[1],A=["Author Info","Card Details"];Object(s.useEffect)((function(){(function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("/posts/getById/"+a);case 2:(t=e.sent).data&&V(t.data.post.author);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a]);return i.a.createElement("div",Object.assign({className:Object(u.a)(j.root,t)},O),H&&i.a.createElement(p.a,{open:n,keepMounted:!0,onClose:function(){return d()},"aria-labelledby":"checkform-dialog",fullWidth:!0},i.a.createElement(f.a,{activeStep:x,alternativeLabel:!0},A.map((function(e){return i.a.createElement(b.a,{key:e},i.a.createElement(v.a,null,e))}))),0===x&&i.a.createElement(I,{open:n,author:H,onOpen:d,onNext:function(e,t){z(e),P(t),w((function(e){return e+1}))}}),1===x&&i.a.createElement(m.Elements,{stripe:g.g},i.a.createElement(C,{open:n,author:H,amount:L,secret:_,onOpen:d,onBack:function(){w((function(e){return e-1}))},onSuccess:E}))))}},1285:function(e,t,a){"use strict";var n=a(96),r=a(97);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(a(0)),o=(0,n(a(98)).default)(c.createElement("path",{d:"M14.4 6L14 4H5v17h2v-7h5.6l.4 2h7V6z"}),"Flag");t.default=o},1286:function(e,t,a){"use strict";var n=a(96),r=a(97);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(a(0)),o=(0,n(a(98)).default)(c.createElement("path",{d:"M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"}),"FlagOutlined");t.default=o},1287:function(e,t,a){"use strict";var n=a(0),r=n.createContext();t.a=r},1321:function(e,t,a){"use strict";var n=a(96),r=a(97);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(a(0)),o=(0,n(a(98)).default)(c.createElement("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"}),"Send");t.default=o},1322:function(e,t,a){"use strict";var n=a(96),r=a(97);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(a(0)),o=(0,n(a(98)).default)(c.createElement("path",{d:"M19 7v2.99s-1.99.01-2 0V7h-3s.01-1.99 0-2h3V2h2v3h3v2h-3zm-3 4V8h-3V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8h-3zM5 19l3-4 2 3 3-4 4 5H5z"}),"AddPhotoAlternate");t.default=o},1323:function(e,t,a){"use strict";var n=a(96),r=a(97);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(a(0)),o=(0,n(a(98)).default)(c.createElement("path",{d:"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z"}),"AttachFile");t.default=o},1368:function(e,t,a){"use strict";a.r(t);var n=a(7),r=a.n(n),c=a(12),o=a(23),l=a(138),s=a(0),i=a.n(s),u=a(38),m=a(13),d=a(1281),p=a(4),f=a.n(p),b=a(649),v=a(11),h=a(37),g=a(627),E=a(166),O=a(645),j=a(1115),k=a(78),y=a(1121),x=a(1091),w=a(1122),N=a(1110),C=a(35),S=a(57),_=a(357),z=a(33),B=a(2),I=a(1098),R=a(634),M=a(1244),L=a.n(M),P=a(358),T=a.n(P),F=a(1285),H=a.n(F),V=a(1286),A=a.n(V),D=a(1199),$=a(1222),G=a(1268),U=Object(b.a)((function(e){return{root:{display:"flex",alignItems:"center"},div:{flexDirection:"column",position:"sticky",float:"left",top:"45vh",left:"10vw"},reaction:Object(l.a)({},e.breakpoints.down("md"),{paddingRight:e.spacing(5)}),likedButton:{color:v.a.red[600]},likedIcon:{padding:e.spacing(1)},commentBox:Object(l.a)({marginTop:e.spacing(3)},e.breakpoints.down("sm"),{marginTop:e.typography.pxToRem(6),marginLeft:e.spacing(2),marginRight:e.spacing(1)}),iconBox:Object(l.a)({marginTop:e.spacing(1)},e.breakpoints.down("sm"),{marginTop:e.typography.pxToRem(2)}),commentIcon:{color:v.a.grey[700]}}})),W=function(e){var t=e.className,a=e.post,n=e.isBookmarked,l=e.onBookmarked,u=Object(z.a)(e,["className","post","isBookmarked","onBookmarked"]),m=U(),d=Object(S.a)(),p=d.user,f=d.isAuthenticated,b=Object(s.useState)(!1),v=Object(o.a)(b,2),h=v[0],g=v[1],E=Object(s.useState)(!1),j=Object(o.a)(E,2),y=j[0],x=j[1],w=Object(s.useState)(a.liked.count),N=Object(o.a)(w,2),_=N[0],M=N[1],P=Object(s.useState)(!1),F=Object(o.a)(P,2),V=F[0],W=F[1],q=Object(s.useState)(!1),J=Object(o.a)(q,2),Y=J[0],Z=J[1];Object(s.useEffect)((function(){f&&p._id===a.author._id&&W(!0),!f&&W(!0)}),[p,f,a.author]),Object(s.useEffect)((function(){var e;f&&(null===(e=a.liked)||void 0===e||e.users.forEach((function(e){return e===p._id&&g(!0)})),a.flags.map((function(e){return e.user===p._id&&x(!0)})))}),[a.liked.users]);var K=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={postId:a._id,isLiked:!h},e.next=3,C.a.put("/posts/liked",t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={post:a._id,type:"post",isFlag:!y},e.next=3,C.a.put("/posts/flaged",t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(c.a)(r.a.mark((function e(){var t,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={postId:a._id},c=n?"delete":"create",e.next=4,C.a.post("/bookmarks/".concat(c),t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){return Z(!Y)};return i.a.createElement("div",Object.assign({className:Object(B.a)(m.root,m[t],"div"===t&&m.reaction)},u),h?i.a.createElement(I.a,{title:"Unlike",disableTouchListener:!0,disableHoverListener:V},i.a.createElement("span",null,i.a.createElement(R.a,{className:Object(B.a)(m.likedButton,m.likedIcon),onClick:function(){g(!1),M((function(e){return e-1})),K()},disabled:V},i.a.createElement($.a,{src:"/static/icons/trending_filled.svg"})))):i.a.createElement(I.a,{title:"Like",disableTouchListener:!0,disableHoverListener:V},i.a.createElement("span",null,i.a.createElement(R.a,{className:m.likedIcon,onClick:function(){g(!0),M((function(e){return e+1})),K()},disabled:V},i.a.createElement($.a,{src:"/static/icons/trending_outlined.svg"})))),i.a.createElement(k.a,{color:"textSecondary",variant:"h6"},_),i.a.createElement(O.a,{className:m.commentBox},i.a.createElement(D.a,{className:m.commentIcon,size:"20"})),i.a.createElement(k.a,{color:"textSecondary",variant:"h6"},a.comments.length),i.a.createElement(O.a,{className:m.iconBox},n?i.a.createElement(I.a,{title:"Unsaved",disableTouchListener:!0,disableHoverListener:V},i.a.createElement("span",null,i.a.createElement(R.a,{className:m.likedButton,onClick:function(){l(!1),X()},disabled:V},i.a.createElement(L.a,{fontSize:"small"})))):i.a.createElement(I.a,{title:"Saved",disableTouchListener:!0,disableHoverListener:V},i.a.createElement("span",null,i.a.createElement(R.a,{onClick:function(){l(!0),X()},disabled:V},i.a.createElement(L.a,{fontSize:"small"}))))),i.a.createElement(O.a,{className:m.iconBox},i.a.createElement("span",null,i.a.createElement(R.a,{disabled:V,onClick:ee},i.a.createElement(T.a,{fontSize:"small"})))),y?i.a.createElement(I.a,{title:"Unflag",disableTouchListener:!0,disableHoverListener:V},i.a.createElement("span",null,i.a.createElement(R.a,{className:Object(B.a)(m.iconBox),onClick:function(){x(!1),Q()},disabled:V},i.a.createElement(H.a,{fontSize:"small"})))):i.a.createElement(I.a,{title:"Flag",disableTouchListener:!0,disableHoverListener:V},i.a.createElement("span",null,i.a.createElement(R.a,{className:m.iconBox,onClick:function(){x(!0),Q()},disabled:V},i.a.createElement(A.a,{fontSize:"small"})))),Y&&i.a.createElement(G.a,{open:Y,postId:a._id,onOpen:ee,onSuccess:ee}))},q=a(32),J=a(1119),Y=a(1092),Z=a(1260),K=a.n(Z),Q=a(1133),X=a(1138),ee=a(1131),te=a(639),ae=a(641),ne=a(1145),re=a(1102),ce=a(1154),oe=a(1107),le=a(1132),se=a(22),ie=Object(b.a)((function(e){return{root:{},toggleBtn:{"&.MuiToggleButton-root":{color:e.palette.text.primary},"&.Mui-selected":{backgroundColor:e.palette.secondary.main,color:e.palette.common.white}}}})),ue=function(e){var t=e.open,a=(e.user,e.comment),n=e.onOpen,l=e.onFlag,u=e.className,m=Object(z.a)(e,["open","user","comment","onOpen","onFlag","className"]),d=ie(),p=Object(s.useState)(""),f=Object(o.a)(p,2),b=f[0],v=f[1],h=Object(s.useState)(""),g=Object(o.a)(h,2),E=g[0],O=g[1],j=function(){var e=Object(c.a)(r.a.mark((function e(){var t,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=""!==E?E:b,c={comment:a._id,reason:t,type:"comment"},e.next=4,C.a.put("/comments/flag",c);case 4:n(),l();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){n()};return i.a.createElement("div",Object.assign({className:Object(B.a)(d.root,u)},m),i.a.createElement(Q.a,{open:t,keepMounted:!0,onClose:k,"aria-labelledby":"status-dialog"},i.a.createElement(X.a,null,"Report"),i.a.createElement(ee.a,null,i.a.createElement(te.a,{component:"fieldset"},i.a.createElement(ae.a,{component:"legend"},"Please choose the reason"),i.a.createElement(ne.a,{"aria-label":"spam-flag-report",name:"report",value:b,onChange:function(e){O(""),v(e.target.value)}},se.c.map((function(e,t){return i.a.createElement(re.a,{key:e.name+t,value:e.name,control:i.a.createElement(ce.a,null),label:e.label})})))),i.a.createElement(oe.a,{value:E,margin:"dense",type:"text",onChange:function(e){O(e.target.value)},disabled:"other"!==b,fullWidth:!0})),i.a.createElement(le.a,null,i.a.createElement(Y.a,{onClick:k,color:"primary"},"Cancel"),i.a.createElement(Y.a,{onClick:j,color:"primary"},"Confirm"))))},me={reply:!1,disable:!0,removeDisabled:!0},de=Object(b.a)((function(e){return{root:{display:"flex",marginBottom:e.spacing(2)},bubble:{borderRadius:e.shape.borderRadius},header:Object(l.a)({},e.breakpoints.down("sm"),{flexWrap:"wrap"}),name:Object(l.a)({},e.breakpoints.down("sm"),{width:"100%"}),replybtn:{marginRight:e.spacing(1)},replyIcon:{color:v.a.grey[700]},replyClickIcon:{color:v.a.red[700]},small:{width:e.spacing(4),height:e.spacing(4)},large:{width:e.spacing(5),height:e.spacing(5)},date:{marginLeft:e.spacing(1)}}})),pe=function(e){var t=e.className,a=e.comment,n=e.reply,l=e.onComment,u=Object(z.a)(e,["className","comment","reply","onComment"]),d=de(),p=Object(h.a)(),b=Object(g.a)(p.breakpoints.down("sm")),v=Object(S.a)(),E=v.user,j=v.isAuthenticated,w=Object(s.useState)(!1),N=Object(o.a)(w,2),_=N[0],I=N[1],R=Object(s.useState)(me),M=Object(o.a)(R,2),L=M[0],P=M[1],T=Object(s.useState)(!1),F=Object(o.a)(T,2),V=F[0],G=F[1],U=Object(s.useState)(!1),W=Object(o.a)(U,2),Z=W[0],Q=W[1],X=Object(s.useState)(a.liked.count),ee=Object(o.a)(X,2),te=ee[0],ae=ee[1],ne={marginLeft:p.typography.pxToRem((b?10:20)*a.depth)};Object(s.useEffect)((function(){j?(E._id===a.user._id&&P((function(e){return Object(q.a)(Object(q.a)({},e),{},{disabled:!0,removeDisabled:!1})})),"admin"===E.role&&P((function(e){return Object(q.a)(Object(q.a)({},e),{},{disabled:!1,removeDisabled:!1})}))):P((function(e){return Object(q.a)(Object(q.a)({},e),{},{disabled:!0,removeDisabled:!0})}))}),[E,j,a.user]),Object(s.useEffect)((function(){j&&a.liked.users.forEach((function(e){return e===E._id&&G(!0)}))}),[a.liked.users]),Object(s.useEffect)((function(){if(j){var e=a.flags.find((function(e){return e.user===E._id}));Q(Boolean(e))}}),[a.flags]),Object(s.useEffect)((function(){if(E){var e=n===a._id&&a.user._id!==E._id,t=a.user._id===E._id,r="admin"!==E.role&&!t;P({reply:e,disable:t,removeDisabled:r})}}),[n,a,E]);var re=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={commentId:a._id,isLiked:!V},e.next=3,C.a.put("/comments/liked",t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.delete("/comments/delete",{params:{_id:a._id}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return i.a.createElement("div",Object.assign({className:Object(B.a)(d.root,t),style:ne},u),i.a.createElement(y.a,{alt:"Person",component:m.a,src:a.user.avatar,className:Object(B.a)(b?d.small:d.large),to:"#"}),i.a.createElement(O.a,{flexGrow:1,p:2,ml:2,bgcolor:"background.dark",className:d.bubble},i.a.createElement(O.a,{display:"flex",alignItems:"center",className:d.header,mb:1},i.a.createElement(O.a,{className:d.name},i.a.createElement(x.a,{color:"textPrimary",component:m.a,to:"#",variant:"h6"},a.user.name),i.a.createElement(J.a,{smUp:!0},i.a.createElement(k.a,{color:"textSecondary",variant:"caption",className:d.date},f()(a.createdAt).fromNow()))),i.a.createElement(O.a,{flexGrow:1}),i.a.createElement(Y.a,{size:"small",className:d.replybtn,onClick:function(){var e=a.depth+1;l(a._id,e)},disabled:L.disable,startIcon:i.a.createElement(D.a,{size:"20",className:L.reply?d.replyClickIcon:d.replyIcon})},"Reply"),V?i.a.createElement(Y.a,{size:"small",className:d.replybtn,onClick:function(){G(!1),ae((function(e){return e-1})),re()},disabled:L.disable,startIcon:i.a.createElement($.a,{src:"/static/icons/trending_filled.svg"})},te," likes"):i.a.createElement(Y.a,{size:"small",className:d.replybtn,onClick:function(){G(!0),ae((function(e){return e+1})),re()},disabled:L.disable,startIcon:i.a.createElement($.a,{src:"/static/icons/trending_outlined.svg"})},te," likes"),i.a.createElement(Y.a,{size:"small",className:d.replybtn,onClick:function(){I(!0)},disabled:L.disable||Z,startIcon:Z?i.a.createElement(H.a,null):i.a.createElement(A.a,null)},"Flag"),i.a.createElement(Y.a,{size:"small",className:d.replybtn,onClick:ce,disabled:L.removeDisabled,startIcon:i.a.createElement(K.a,null)},"Remove"),i.a.createElement(J.a,{smDown:!0},i.a.createElement(k.a,{color:"textSecondary",variant:"caption",className:d.date},f()(a.createdAt).fromNow()))),i.a.createElement(k.a,{variant:"body1",color:"textPrimary"},a.comment)),_&&i.a.createElement(ue,{open:_,user:E,comment:a,onOpen:function(){I(!_)},onFlag:function(){Q(!0)}}))},fe=a(153),be=a(352),ve=a(1321),he=a.n(ve),ge=a(1322),Ee=a.n(ge),Oe=a(1323),je=a.n(Oe),ke=Object(b.a)((function(e){return{root:Object(l.a)({alignItems:"center",display:"flex"},e.breakpoints.down("sm"),{flexWrap:"wrap"}),inputContainer:Object(l.a)({flexGrow:1,marginLeft:e.spacing(2),paddingBottom:e.spacing(.5),paddingLeft:e.spacing(.5),paddingRight:e.spacing(.5),paddingTop:e.spacing(.5)},e.breakpoints.down("sm"),{width:"100%"}),divider:{height:24,width:1},fileInput:{display:"none"}}})),ye=function(e){var t=e.className,a=e.post,n=e.status,l=e.onFetch,u=Object(z.a)(e,["className","post","status","onFetch"]),m=ke(),d=Object(S.a)().user,p=Object(fe.b)().enqueueSnackbar,f=Object(h.a)(),b=Object(g.a)(f.breakpoints.down("sm")),v=Object(s.useRef)(null),O=Object(s.useState)(""),j=Object(o.a)(O,2),k=j[0],x=j[1],w=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={parent:n.parent,post:a._id,depth:n.depth,comment:k},e.next=4,C.a.post("/comments/create",t);case 4:x(""),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0.message&&p(e.t0.message,{variant:"error"});case 10:l();case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),_=function(){v.current.click()};return i.a.createElement("div",Object.assign({className:Object(B.a)(m.root,t)},u),!b&&i.a.createElement(y.a,{alt:"Person",src:d?d.avatar:""}),i.a.createElement(E.a,{className:m.inputContainer,variant:"outlined"},i.a.createElement(be.a,{value:k,disableUnderline:!0,fullWidth:!0,multiline:!0,rows:3,onChange:function(e){e.persist(),x(e.target.value)}})),i.a.createElement(I.a,{title:"Send"},i.a.createElement("span",null,i.a.createElement(R.a,{color:k.length>0?"primary":"default",onClick:w,disabled:""===k},i.a.createElement(he.a,null)))),i.a.createElement(N.a,{className:m.divider}),i.a.createElement(I.a,{title:"Attach image"},i.a.createElement(R.a,{edge:"end",onClick:_},i.a.createElement(Ee.a,null))),i.a.createElement(I.a,{title:"Attach file"},i.a.createElement(R.a,{edge:"end",onClick:_},i.a.createElement(je.a,null))),i.a.createElement("input",{className:m.fileInput,ref:v,type:"file"}))},xe={depth:0,parent:null},we=Object(b.a)((function(e){var t;return{root:(t={backgroundColor:e.palette.background.dark,margin:"0 auto",width:"80%",minHeight:"100%",paddingTop:e.spacing(3),paddingBottom:e.spacing(3)},Object(l.a)(t,e.breakpoints.down("md"),{width:"70%"}),Object(l.a)(t,e.breakpoints.down("sm"),{width:"100%"}),t),chip:{marginLeft:e.spacing(1),marginTop:e.spacing(1)},box:Object(l.a)({padding:e.spacing(7),flexGrow:1},e.breakpoints.down("sm"),{padding:e.spacing(3)}),author:{marginTop:e.spacing(2),display:"flex",alignItems:"center"},avatar:{marginRight:e.spacing(2)},content:Object(l.a)({fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(17),marginBottom:e.spacing(2)},e.breakpoints.down("sm"),{fontSize:e.typography.pxToRem(17)}),disclosure:Object(l.a)({fontFamily:e.typography.fontFamily,color:v.a.grey[500]},e.breakpoints.down("sm"),{fontSize:"0.9rem"})}}));t.default=function(){var e=we(),t=Object(h.a)(),a=Object(u.g)(),n=Object(u.h)(),l=Object(S.a)(),p=l.user,b=l.isAuthenticated,v=Object(g.a)(t.breakpoints.down("sm")),z=Object(s.useState)(),B=Object(o.a)(z,2),I=B[0],R=B[1],M=Object(s.useState)(xe),L=Object(o.a)(M,2),P=L[0],T=L[1],F=Object(s.useState)(!1),H=Object(o.a)(F,2),V=H[0],A=H[1];Object(s.useEffect)((function(){D(),se.f.on("fetchPost",(function(e){D()}))}),[]);var D=function(){var e=Object(c.a)(r.a.mark((function e(){var t,c,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.pathname.split("/")[3],c=b&&{user:p._id},e.next=5,C.a.get("/posts/get/".concat(t),{params:c});case 5:o=e.sent,R(o.data.post),A(o.data.isBookmark),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),a.push("/404");case 13:T(xe);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),$=function(e){A(e)},G=function(e,t){var a=P.parent!==e?e:null;T({parent:a,depth:t})};return i.a.createElement(i.a.Fragment,null,I&&!v&&i.a.createElement(W,{post:I,isBookmarked:V,onBookmarked:$,className:"div"}),i.a.createElement(_.a,{className:e.root,title:I&&I.title?I.title:"Post"},i.a.createElement(E.a,null,I&&i.a.createElement(O.a,{mt:3,className:e.box},i.a.createElement(j.a,{container:!0,spacing:3},v&&i.a.createElement(i.a.Fragment,null,i.a.createElement(O.a,{flexGrow:1}),i.a.createElement(W,{post:I,isBookmarked:V,onBookmarked:$})),i.a.createElement(j.a,{item:!0,xs:12,md:10},i.a.createElement(k.a,{variant:"h1",component:"header",color:"textPrimary"},I.title),i.a.createElement(O.a,{className:e.author},i.a.createElement(y.a,{alt:"Person",component:m.a,src:I.author.avatar,className:e.avatar,to:"/users/"+I.author.name}),i.a.createElement(k.a,{variant:"caption",color:"textSecondary"},i.a.createElement(x.a,{color:"textSecondary",component:m.a,to:"/users/"+I.author.name,variant:"h6"},I.author.name)," ",f()(I.createdAt).fromNow())),i.a.createElement(O.a,{mt:2},I.tags.map((function(t){return i.a.createElement(w.a,{key:t.symbol,clickable:!0,variant:"outlined",label:t.symbol,className:e.chip,onClick:function(){return e=t.symbol,a.push("/symbol/".concat(e));var e}})}))))),i.a.createElement(O.a,{mt:3,className:e.content},Object(d.a)(I.content)),i.a.createElement(N.a,null),i.a.createElement(O.a,{mt:3,className:e.disclosure},Object(d.a)(I.disclosure)))),I&&i.a.createElement(E.a,null,i.a.createElement(O.a,{mt:3,className:e.box},i.a.createElement(j.a,{container:!0,spacing:3},i.a.createElement(j.a,{item:!0,xs:12,md:12},I.comments.map((function(e){return i.a.createElement(i.a.Fragment,{key:e._id},i.a.createElement(pe,{comment:e,reply:P.parent,onComment:G}))})),i.a.createElement(O.a,{my:2},i.a.createElement(N.a,null)),i.a.createElement(ye,{post:I,status:P,onFetch:D})))))))}}}]);
//# sourceMappingURL=16.c1c25588.chunk.js.map