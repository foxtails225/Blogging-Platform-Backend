(this["webpackJsonpdankstocks-client"]=this["webpackJsonpdankstocks-client"]||[]).push([[10],{1367:function(e,t,a){"use strict";a.r(t);var n=a(32),r=a(7),o=a.n(r),c=a(12),l=a(23),i=a(138),s=a(0),m=a.n(s),u=a(38),p=a(13),d=a(2),b=a(8),f=a(1135),g=a(649),y=a(1121),E=a(11),v=a(1114),h=a(645),j=a(78),k=a(166),O=a(1115),x=a(1134),N=a(1136),w=a(1137),P=a(1116),S=a(1126),C=a(1092),q=a(1354),B=a(1355),T=a(1356),z=a(1343),D=a.n(z),L=a(1344),F=a.n(L),I=a(35),R=a(57),M=a(357),G=a(46),W=a(33),Y=a(1220),_=a(1221),A=a(1107),J=a(634),K=a(137),V=a(1122),H=a(642),U=a(1348),Q=a(1324),X=a(1209),Z=a(1353),$=[{name:"bullish",text:"Bullish"},{name:"bearish",text:"Bearish"},{name:"neutral",text:"Neutral"},{name:"no_opinion",text:"No Opinion"}],ee=Object(g.a)((function(e){return{root:{},addTab:{marginLeft:e.spacing(2)},tag:{"& + &":{marginLeft:e.spacing(1)}},datePicker:{"& + &":{marginLeft:e.spacing(2)}},toggleBtn:{marginTop:e.spacing(3),"&.MuiToggleButton-root":{color:e.palette.text.primary},"&.Mui-selected":{backgroundColor:e.palette.secondary.main,color:e.palette.common.white}}}})),te={symbol:"",securityName:"",main:!1},ae=function(e){var t=e.className,a=e.post,r=e.onPost,i=e.onNext,u=Object(W.a)(e,["className","post","onPost","onNext"]),p=ee(),b=Object(s.useState)([]),f=Object(l.a)(b,2),g=f[0],y=f[1],E=Object(s.useState)(""),v=Object(l.a)(E,2),k=v[0],O=v[1],x=Object(s.useState)(te),N=Object(l.a)(x,2),w=N[0],P=N[1];Object(s.useEffect)((function(){""!==k?function(){var e=Object(c.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.get("/stock/search/".concat(k));case 2:(t=e.sent).data&&t.data.length>0&&(a=t.data.map((function(e){return{symbol:e.symbol,securityName:e.securityName,main:!1}})),y(a));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()():y([])}),[k]);var S=function(e,t){var a=t.split(": ");P({symbol:a[0],securityName:a[1],main:!1})};return m.a.createElement(_.a,{enableReinitialize:!0,initialValues:{title:a.title||"",tags:a.tags||[],picker:a.picker||$[0].name,submit:null},validationSchema:Y.c().shape({title:Y.e().min(3,"Must be at least 3 characters").max(255).required("Required"),picker:Y.e().required("Required"),tags:Y.a().required()}),onSubmit:function(){var e=Object(c.a)(o.a.mark((function e(t,a){var n,c,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.setErrors,c=a.setStatus,l=a.setSubmitting;try{r({title:t.title.trim(),tags:t.tags,picker:t.picker}),c({success:!0}),l(!1),i&&i()}catch(o){c({success:!1}),n({submit:o.message}),l(!1)}case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},(function(e){var a=e.errors,r=e.handleBlur,o=e.handleChange,c=e.handleSubmit,l=e.isSubmitting,i=e.setFieldValue,s=e.touched,b=e.values;return m.a.createElement("form",Object.assign({onSubmit:c,className:Object(d.a)(p.root,t),onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()}},u),m.a.createElement(j.a,{variant:"h3",color:"textPrimary"},"Details"),m.a.createElement(h.a,{mt:2},m.a.createElement(j.a,{variant:"subtitle1",color:"textSecondary"},"Do not spam tags. ",m.a.createElement("br",null),"Title should not be spammy. ",m.a.createElement("br",null),"Title and article contents may be subject to grammatical and punctual editing to ensure quality.")),m.a.createElement(h.a,{mt:2},m.a.createElement(A.a,{error:Boolean(s.title&&a.title),fullWidth:!0,helperText:s.title&&a.title,label:"Article Title",name:"title",placeholder:"Please type article title.",value:b.title,onBlur:r,onChange:o,variant:"outlined"}),m.a.createElement(U.a,{value:b.picker,exclusive:!0,size:"small",onChange:function(e,t){i("picker",t)},"aria-label":"text alignment"},$.map((function(e,t){return m.a.createElement(Q.a,{key:e.name+t,value:e.name,className:p.toggleBtn},e.text)}))),m.a.createElement(h.a,{mt:3,display:"flex",alignItems:"center"},m.a.createElement(X.a,{freeSolo:!0,disableClearable:!0,options:g.map((function(e){return e.symbol+": "+e.securityName})),onChange:S,onKeyPress:function(e){if("Enter"===e.key){var t=w;if(""===w.symbol||""===w.securityName)return;0===b.tags.length&&(t.main=!0),i("tags",[].concat(Object(G.a)(b.tags),[t])),P(te),O("")}},value:k,renderInput:function(e){return m.a.createElement(A.a,Object.assign({},e,{fullWidth:!0,name:"tags",label:"Ticker",placeholder:"Please choose at least one tag.",variant:"outlined",InputProps:Object(n.a)({},e.InputProps),style:{width:"47vw"},onChange:function(e){return O(e.target.value)}}))}}),m.a.createElement(J.a,{className:p.addTab,onClick:function(){var e=w;""!==w.symbol&&""!==w.securityName&&(0===b.tags.length&&(e.main=!0),i("tags",[].concat(Object(G.a)(b.tags),[e])),P(te),O(""))}},m.a.createElement(K.a,null,m.a.createElement(Z.a,null)))),m.a.createElement(h.a,{mt:2},b.tags.map((function(e,t){return m.a.createElement(V.a,{variant:e.main?"default":"outlined",key:t,label:e.symbol,className:p.tag,onDelete:function(){b.tags.length>1&&e.main&&(b.tags[1].main=!0);var t=b.tags.filter((function(t){return t.symbol!==e.symbol&&t.securityName!==e.securityName}));i("tags",t)},color:e.main?"secondary":"default"})}))),Boolean(s.tags&&a.tags)&&m.a.createElement(h.a,{mt:2},m.a.createElement(H.a,{error:!0},a.tags))),m.a.createElement(h.a,{mt:6,display:"flex"},m.a.createElement(h.a,{flexGrow:1}),m.a.createElement(C.a,{color:"secondary",disabled:l,type:"submit",variant:"contained",size:"large"},"Next")))}))};ae.defaultProps={onPost:function(){},onNext:function(){}};var ne=ae,re=a(1328),oe=a.n(re),ce=Object(g.a)((function(e){return{root:{"& .ql-toolbar":{borderLeft:"none",borderTop:"none",borderRight:"none",borderBottom:"1px solid ".concat(e.palette.divider),"& .ql-picker-label:hover":{color:e.palette.secondary.main},"& .ql-picker-label.ql-active":{color:e.palette.secondary.main},"& .ql-picker-item:hover":{color:e.palette.secondary.main},"& .ql-picker-item.ql-selected":{color:e.palette.secondary.main},"& button:hover":{color:e.palette.secondary.main,"& .ql-stroke":{stroke:e.palette.secondary.main}},"& button:focus":{color:e.palette.secondary.main,"& .ql-stroke":{stroke:e.palette.secondary.main}},"& button.ql-active":{"& .ql-stroke":{stroke:e.palette.secondary.main}},"& .ql-stroke":{stroke:e.palette.text.primary},"& .ql-picker":{color:e.palette.text.primary},"& .ql-picker-options":{padding:e.spacing(2),backgroundColor:e.palette.background.default,border:"none",boxShadow:e.shadows[10],borderRadius:e.shape.borderRadius}},"& .ql-container":{border:"none","& .ql-editor":{fontFamily:e.typography.fontFamily,fontSize:16,color:e.palette.text.primary,"&.ql-blank::before":{color:e.palette.text.secondary}}}}}})),le=function(e){var t=e.className,a=Object(W.a)(e,["className"]),n=ce();return m.a.createElement(oe.a,Object.assign({className:Object(d.a)(n.root,t)},a))},ie=Object(g.a)((function(e){return{root:{},editorContainer:{marginTop:e.spacing(3)},editor:{"& .ql-editor":{height:400}}}})),se=function(e){var t=e.className,a=e.post,n=e.onPost,r=e.onBack,i=e.onNext,u=Object(W.a)(e,["className","post","onPost","onBack","onNext"]),p=ie(),b=Object(s.useState)(a.content||""),f=Object(l.a)(b,2),g=f[0],y=f[1],E=Object(s.useState)(!1),v=Object(l.a)(E,2),O=v[0],x=v[1],N=Object(s.useState)(null),w=Object(l.a)(N,2),P=w[0],S=w[1],q=function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{x(!0),n({content:g.trim()}),i&&i()}catch(a){S(a.message)}finally{x(!1)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return m.a.createElement("form",Object.assign({onSubmit:q,className:Object(d.a)(p.root,t)},u),m.a.createElement(j.a,{variant:"h3",color:"textPrimary"},"Content"),m.a.createElement(h.a,{mt:2},m.a.createElement(j.a,{variant:"subtitle1",color:"textSecondary"},"Do not advise people to make any financial decisions. ",m.a.createElement("br",null),"Plagiarism is not tolerated.")),m.a.createElement(k.a,{className:p.editorContainer,variant:"outlined"},m.a.createElement(le,{onChange:function(e){y(e)},value:g,className:p.editor})),P&&m.a.createElement(h.a,{mt:2},m.a.createElement(H.a,{error:!0},H.a)),m.a.createElement(h.a,{mt:6,display:"flex"},r&&m.a.createElement(C.a,{onClick:r,size:"large"},"Previous"),m.a.createElement(h.a,{flexGrow:1}),m.a.createElement(C.a,{color:"secondary",disabled:O,type:"submit",variant:"contained",size:"large"},"Next")))};se.defaultProps={onPost:function(){},onNext:function(){},onBack:function(){}};var me=se,ue=Object(g.a)((function(e){return{root:{},editorContainer:{marginTop:e.spacing(3)},editor:{"& .ql-editor":{height:300},"& .ql-toolbar":{"& .ql-formats > .ql-picker":{display:"none"}}}}})),pe=function(e){var t=e.className,a=e.post,n=e.onPost,r=e.onBack,i=e.onNext,u=Object(W.a)(e,["className","post","onPost","onBack","onNext"]),p=ue(),b=Object(s.useState)(a.disclosure||""),f=Object(l.a)(b,2),g=f[0],y=f[1],E=Object(s.useState)(!1),v=Object(l.a)(E,2),O=v[0],x=v[1],N=Object(s.useState)(null),w=Object(l.a)(N,2),P=w[0],S=w[1],q=function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{x(!0),n({disclosure:g.trim()}),i&&i()}catch(a){S(a.message)}finally{x(!1)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return m.a.createElement("form",Object.assign({onSubmit:q,className:Object(d.a)(p.root,t)},u),m.a.createElement(j.a,{variant:"h3",color:"textPrimary"},"Disclosure"),m.a.createElement(h.a,{mt:2},m.a.createElement(j.a,{variant:"subtitle1",color:"textSecondary"},"Let the readers know if you hold or do not hold any position in the companies you are talking about. Make sure to also let readers know if you are receiving compensation for the article. You may receive one from us if your article is approved and you may receive tips from readers.")),m.a.createElement(k.a,{className:p.editorContainer,variant:"outlined"},m.a.createElement(le,{onChange:function(e){y(e)},value:g,className:p.editor})),P&&m.a.createElement(h.a,{mt:2},m.a.createElement(H.a,{error:!0},H.a)),m.a.createElement(h.a,{mt:6,display:"flex"},r&&m.a.createElement(C.a,{onClick:r,size:"large"},"Previous"),m.a.createElement(h.a,{flexGrow:1}),m.a.createElement(C.a,{color:"secondary",disabled:O,type:"submit",variant:"contained",size:"large"},"Next")))};pe.defaultProps={onPost:function(){},onNext:function(){},onBack:function(){}};var de=pe,be=a(1281),fe=a(1110),ge=Object(g.a)((function(e){return{root:{},typeOption:{alignItems:"flex-start",display:"flex",marginBottom:e.spacing(2),padding:e.spacing(2)},stepButton:{"& + &":{marginLeft:e.spacing(2)}},chip:{marginLeft:e.spacing(1)},box:Object(i.a)({padding:e.spacing(7)},e.breakpoints.down("sm"),{padding:e.spacing(3)}),content:{fontFamily:e.typography.fontFamily,marginBottom:e.spacing(2)},disclosure:{fontFamily:e.typography.fontFamily,color:E.a.grey[500],fontSize:"0.9rem"}}})),ye=function(e){var t=e.className,a=e.post,n=e.onBack,r=e.onComplete,i=Object(W.a)(e,["className","post","onBack","onComplete"]),u=ge(),p=Object(s.useState)(!1),b=Object(l.a)(p,2),f=b[0],g=b[1],y=Object(s.useState)(null),E=Object(l.a)(y,2),v=E[0],k=E[1],x=function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{g(!0),r&&r()}catch(a){k(a.message)}finally{g(!1)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return m.a.createElement("form",Object.assign({onSubmit:x,className:Object(d.a)(u.root,t)},i),m.a.createElement(j.a,{variant:"h3",color:"textPrimary"},"Review"),m.a.createElement(h.a,{mt:2},m.a.createElement(j.a,{variant:"subtitle1",color:"textSecondary"},"Make sure everything looks good.")),m.a.createElement(h.a,{mt:3,border:1,className:u.box},m.a.createElement(O.a,{container:!0,spacing:3},m.a.createElement(O.a,{item:!0,xs:12,md:10},m.a.createElement(j.a,{variant:"h3",color:"textPrimary"},a.title),m.a.createElement(h.a,{mt:3},m.a.createElement(h.a,{mt:1},a.tags.map((function(e){return m.a.createElement(V.a,{key:e.symbol,variant:e.main?"default":"outlined",label:e.symbol,className:u.chip,color:e.main?"primary":"default"})})))))),m.a.createElement(h.a,{mt:3,className:u.content},Object(be.a)(a.content)),m.a.createElement(fe.a,null),m.a.createElement(h.a,{mt:3,className:u.disclosure},Object(be.a)(a.disclosure))),v&&m.a.createElement(h.a,{mt:2},m.a.createElement(H.a,{error:!0},v)),m.a.createElement(h.a,{mt:6,display:"flex"},n&&m.a.createElement(C.a,{onClick:n,size:"large"},"Previous"),m.a.createElement(h.a,{flexGrow:1}),m.a.createElement(C.a,{color:"secondary",disabled:f,type:"submit",variant:"contained",size:"large"},"Complete")))};ye.defaultProps={onComplete:function(){},onBack:function(){}};var Ee=ye,ve=a(607),he=[{label:"Details",icon:q.a},{label:"Content",icon:B.a},{label:"Disclosure",icon:D.a},{label:"Review",icon:F.a}],je={slug:"",title:"",content:"",disclosure:"",tags:[]},ke=Object(b.a)((function(e){return{vertical:{marginLeft:19,padding:0},line:{borderColor:e.palette.divider}}}))(f.a),Oe=Object(g.a)((function(e){return{root:{},active:{backgroundColor:e.palette.secondary.main,boxShadow:e.shadows[10],color:e.palette.secondary.contrastText},completed:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText}}})),xe=function(e){var t,a=e.active,n=e.completed,r=e.icon,o=Oe(),c=he[r-1].icon;return m.a.createElement(y.a,{className:Object(d.a)(o.root,(t={},Object(i.a)(t,o.active,a),Object(i.a)(t,o.completed,n),t))},m.a.createElement(c,{size:"20"}))},Ne=Object(g.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingTop:e.spacing(3),paddingBottom:e.spacing(3)},avatar:{backgroundColor:E.a.red[600]},stepper:{backgroundColor:"transparent"}}}));t.default=function(){var e=Ne(),t=Object(R.a)().user,a=Object(u.h)(),r=Object(s.useState)(!1),i=Object(l.a)(r,2),d=i[0],b=i[1],f=Object(s.useState)(0),g=Object(l.a)(f,2),E=g[0],q=g[1],B=Object(s.useState)(!1),z=Object(l.a)(B,2),D=z[0],L=z[1],F=Object(s.useState)(je),G=Object(l.a)(F,2),W=G[0],Y=G[1];Object(s.useEffect)((function(){var e=function(){var e=Object(c.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.post("/stripe/create",{returnUrl:"/posts/new"});case 2:t=e.sent,window.location.replace(t.data.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();!t.stripeId&&e()}),[t]),Object(s.useEffect)((function(){var e=a.pathname.split("/"),n=function(){var a=Object(c.a)(o.a.mark((function a(){var n;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,I.a.get("/posts/get/".concat(e[3]),{params:{user:t._id}});case 2:(n=a.sent).data&&Y(n.data.post);case 4:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();"edit"===e[2]&&(n(),b(!0))}),[a.pathname,t._id]);var _=function(){q((function(e){return e+1}))},A=function(){q((function(e){return e-1}))},J=function(){var e=Object(c.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=/[^\w\s]/gi,a=W.title.replace(t,"").replace("/","-").split(" ").join("-").trim().toLowerCase(),!d){e.next=7;break}return e.next=5,I.a.put("/posts/update",Object(n.a)(Object(n.a)({},W),{},{slug:a}));case 5:e.next=9;break;case 7:return e.next=9,I.a.post("/posts/new",Object(n.a)(Object(n.a)({},W),{},{slug:a}));case 9:L(!0);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(e){Y((function(t){return Object(n.a)(Object(n.a)({},t),e)}))};return m.a.createElement(m.a.Fragment,null,t.stripeId?m.a.createElement(M.a,{className:e.root,title:"Project Create"},m.a.createElement(v.a,{maxWidth:"lg"},m.a.createElement(h.a,{mb:3},m.a.createElement(j.a,{variant:"h3",color:"textPrimary"},"Post New Article")),D?m.a.createElement(P.a,null,m.a.createElement(S.a,null,m.a.createElement(h.a,{maxWidth:450,mx:"auto"},m.a.createElement(h.a,{display:"flex",justifyContent:"center"},m.a.createElement(y.a,{className:e.avatar},m.a.createElement(T.a,null))),m.a.createElement(h.a,{mt:2},m.a.createElement(j.a,{variant:"h3",color:"textPrimary",align:"center"},"You are all done!")),m.a.createElement(h.a,{mt:2},m.a.createElement(j.a,{variant:"subtitle1",color:"textSecondary",align:"center"},"Thank you for submitting your contribution to us. Your article is now in review and we will come back to you with our final decision.")),m.a.createElement(h.a,{mt:2,display:"flex",justifyContent:"center"},m.a.createElement(C.a,{variant:"contained",color:"secondary",component:p.a,to:"/account/profile"},"Back to Profile"))))):m.a.createElement(k.a,null,m.a.createElement(O.a,{container:!0},m.a.createElement(O.a,{item:!0,xs:12,md:3},m.a.createElement(x.a,{activeStep:E,className:e.stepper,connector:m.a.createElement(ke,null),orientation:"vertical"},he.map((function(e){return m.a.createElement(N.a,{key:e.label},m.a.createElement(w.a,{StepIconComponent:xe},e.label))})))),m.a.createElement(O.a,{item:!0,xs:12,md:9},m.a.createElement(h.a,{p:3},0===E&&m.a.createElement(ne,{post:W,onPost:K,onNext:_}),1===E&&m.a.createElement(me,{post:W,onPost:K,onBack:A,onNext:_}),2===E&&m.a.createElement(de,{post:W,onPost:K,onBack:A,onNext:_}),3===E&&m.a.createElement(Ee,{post:W,onBack:A,onComplete:J}))))))):m.a.createElement(ve.a,null))}}}]);
//# sourceMappingURL=10.d376ef50.chunk.js.map